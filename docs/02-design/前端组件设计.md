# 智能设备管理系统前端组件设计文档

## 📋 文档信息
- **项目名称**: 智能设备管理系统 (Smart Device Management System)
- **前端版本**: v1.0
- **设计日期**: 2025-09-15
- **前端架构师**: AI Assistant (Frontend Architect)
- **技术栈**: Vue3 + TypeScript + Element Plus + Pinia + Vite

## 🏗️ 前端架构设计

### 技术栈选型
```typescript
// 核心框架
Vue 3.4+ (Composition API)
TypeScript 5.0+
Vite 5.0+ (构建工具)

// UI组件库
Element Plus 2.4+
@element-plus/icons-vue

// 状态管理
Pinia 2.1+

// 路由管理
Vue Router 4.2+

// HTTP客户端
Axios 1.6+

// 工具库
dayjs (日期处理)
echarts (图表)
lodash-es (工具函数)
```

### 项目目录结构
```
frontend/
├── public/                     # 静态资源
│   ├── favicon.ico
│   └── index.html
├── src/
│   ├── api/                   # API接口层
│   │   ├── index.ts          # API客户端配置
│   │   ├── auth.ts           # 认证相关API
│   │   ├── dashboard.ts      # 系统概览API
│   │   ├── temperature.ts    # 温度监控API
│   │   ├── server.ts         # 服务器管理API
│   │   ├── breaker.ts        # 断路器控制API
│   │   ├── aiControl.ts      # AI智能控制API
│   │   ├── alarm.ts          # 智能告警API
│   │   └── security.ts       # 安全控制API
│   ├── components/           # 公共组件
│   │   ├── common/          # 通用组件
│   │   │   ├── AppHeader.vue
│   │   │   ├── AppSidebar.vue
│   │   │   ├── BreadcrumbNav.vue
│   │   │   ├── LoadingSpinner.vue
│   │   │   └── ConfirmDialog.vue
│   │   ├── charts/          # 图表组件
│   │   │   ├── LineChart.vue
│   │   │   ├── BarChart.vue
│   │   │   └── GaugeChart.vue
│   │   ├── forms/           # 表单组件
│   │   │   ├── DeviceForm.vue
│   │   │   ├── AlarmRuleForm.vue
│   │   │   └── StrategyForm.vue
│   │   └── tables/          # 表格组件
│   │       ├── DataTable.vue
│   │       └── StatusTable.vue
│   ├── composables/         # 组合式函数
│   │   ├── useAuth.ts       # 认证相关
│   │   ├── useWebSocket.ts  # WebSocket连接
│   │   ├── useApi.ts        # API请求封装
│   │   ├── useTable.ts      # 表格操作
│   │   └── useChart.ts      # 图表操作
│   ├── stores/              # Pinia状态管理
│   │   ├── index.ts         # Store配置
│   │   ├── auth.ts          # 认证状态
│   │   ├── dashboard.ts     # 系统概览状态
│   │   ├── temperature.ts   # 温度监控状态
│   │   ├── server.ts        # 服务器管理状态
│   │   ├── breaker.ts       # 断路器控制状态
│   │   ├── aiControl.ts     # AI智能控制状态
│   │   ├── alarm.ts         # 智能告警状态
│   │   └── websocket.ts     # WebSocket状态
│   ├── types/               # TypeScript类型定义
│   │   ├── api.ts           # API响应类型
│   │   ├── device.ts        # 设备相关类型
│   │   ├── user.ts          # 用户相关类型
│   │   └── common.ts        # 通用类型
│   ├── utils/               # 工具函数
│   │   ├── request.ts       # HTTP请求封装
│   │   ├── auth.ts          # 认证工具
│   │   ├── format.ts        # 格式化工具
│   │   ├── validation.ts    # 表单验证
│   │   └── constants.ts     # 常量定义
│   ├── views/               # 页面组件
│   │   ├── Login.vue        # 登录页
│   │   ├── Dashboard/       # 系统概览
│   │   │   └── index.vue
│   │   ├── Temperature/     # 温度监控
│   │   │   ├── Monitor.vue  # 实时监控
│   │   │   └── Config.vue   # 传感器管理
│   │   ├── Server/          # 服务器管理
│   │   │   ├── Monitor.vue  # 服务器监控
│   │   │   └── Config.vue   # 连接配置
│   │   ├── Breaker/         # 断路器控制
│   │   │   ├── Monitor.vue  # 断路器监控
│   │   │   └── Config.vue   # 断路器配置
│   │   ├── AIControl/       # AI智能控制
│   │   │   └── index.vue
│   │   ├── Alarm/           # 智能告警
│   │   │   └── index.vue
│   │   └── Security/        # 安全控制
│   │       └── index.vue
│   ├── router/              # 路由配置
│   │   ├── index.ts         # 路由主配置
│   │   └── guards.ts        # 路由守卫
│   ├── styles/              # 样式文件
│   │   ├── index.scss       # 全局样式
│   │   ├── variables.scss   # SCSS变量
│   │   └── components.scss  # 组件样式
│   ├── App.vue              # 根组件
│   └── main.ts              # 应用入口
├── package.json
├── tsconfig.json
├── vite.config.ts
└── README.md
```

## 🧩 核心组件设计

### 1. 布局组件

#### AppLayout.vue - 主布局组件
```vue
<template>
  <div class="app-layout">
    <AppSidebar 
      :collapsed="sidebarCollapsed"
      @toggle="toggleSidebar"
    />
    <div class="main-content" :class="{ 'sidebar-collapsed': sidebarCollapsed }">
      <AppHeader @logout="handleLogout" />
      <BreadcrumbNav :breadcrumbs="currentBreadcrumbs" />
      <div class="content-wrapper">
        <router-view />
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, computed } from 'vue'
import { useRouter } from 'vue-router'
import { useAuthStore } from '@/stores/auth'

const router = useRouter()
const authStore = useAuthStore()

const sidebarCollapsed = ref(false)

const currentBreadcrumbs = computed(() => {
  // 根据当前路由生成面包屑
  return router.currentRoute.value.meta.breadcrumbs || []
})

const toggleSidebar = () => {
  sidebarCollapsed.value = !sidebarCollapsed.value
}

const handleLogout = async () => {
  await authStore.logout()
  router.push('/login')
}
</script>
```

#### AppSidebar.vue - 侧边栏组件
```vue
<template>
  <div class="app-sidebar" :class="{ collapsed }">
    <div class="logo">
      <h2 v-if="!collapsed">智能设备管理</h2>
      <h2 v-else>智能</h2>
    </div>
    
    <el-menu
      :default-active="activeMenu"
      :collapse="collapsed"
      :unique-opened="true"
      router
    >
      <el-menu-item index="/dashboard">
        <el-icon><House /></el-icon>
        <span>系统概览</span>
      </el-menu-item>
      
      <el-sub-menu index="temperature">
        <template #title>
          <el-icon><Thermometer /></el-icon>
          <span>温度监控</span>
        </template>
        <el-menu-item index="/temperature/monitor">实时监控</el-menu-item>
        <el-menu-item index="/temperature/config">传感器管理</el-menu-item>
      </el-sub-menu>
      
      <el-sub-menu index="server">
        <template #title>
          <el-icon><Monitor /></el-icon>
          <span>服务器管理</span>
        </template>
        <el-menu-item index="/server/monitor">服务器监控</el-menu-item>
        <el-menu-item index="/server/config">连接配置</el-menu-item>
      </el-sub-menu>
      
      <el-sub-menu index="breaker">
        <template #title>
          <el-icon><Lightning /></el-icon>
          <span>智能断路器</span>
        </template>
        <el-menu-item index="/breaker/monitor">断路器监控</el-menu-item>
        <el-menu-item index="/breaker/config">断路器配置</el-menu-item>
      </el-sub-menu>
      
      <el-menu-item index="/ai-control">
        <el-icon><Cpu /></el-icon>
        <span>AI智能控制</span>
      </el-menu-item>
      
      <el-menu-item index="/alarm">
        <el-icon><Bell /></el-icon>
        <span>智能告警</span>
      </el-menu-item>
      
      <el-menu-item index="/security">
        <el-icon><Lock /></el-icon>
        <span>安全控制</span>
      </el-menu-item>
    </el-menu>
  </div>
</template>

<script setup lang="ts">
import { computed } from 'vue'
import { useRoute } from 'vue-router'
import { House, Thermometer, Monitor, Lightning, Cpu, Bell, Lock } from '@element-plus/icons-vue'

interface Props {
  collapsed: boolean
}

defineProps<Props>()
defineEmits<{
  toggle: []
}>()

const route = useRoute()

const activeMenu = computed(() => {
  return route.path
})
</script>
```

### 2. 数据展示组件

#### StatusCard.vue - 状态卡片组件
```vue
<template>
  <el-card class="status-card" :class="statusClass">
    <div class="card-header">
      <div class="icon">
        <component :is="icon" />
      </div>
      <div class="title">{{ title }}</div>
    </div>
    
    <div class="card-content">
      <div class="value">{{ formattedValue }}</div>
      <div class="unit" v-if="unit">{{ unit }}</div>
    </div>
    
    <div class="card-footer" v-if="description">
      <span class="description">{{ description }}</span>
    </div>
  </el-card>
</template>

<script setup lang="ts">
import { computed } from 'vue'

interface Props {
  title: string
  value: number | string
  unit?: string
  icon: any
  status?: 'normal' | 'warning' | 'danger' | 'success'
  description?: string
  precision?: number
}

const props = withDefaults(defineProps<Props>(), {
  status: 'normal',
  precision: 1
})

const statusClass = computed(() => {
  return `status-${props.status}`
})

const formattedValue = computed(() => {
  if (typeof props.value === 'number') {
    return props.value.toFixed(props.precision)
  }
  return props.value
})
</script>
```

#### DataTable.vue - 数据表格组件
```vue
<template>
  <div class="data-table">
    <div class="table-header" v-if="showHeader">
      <div class="table-title">{{ title }}</div>
      <div class="table-actions">
        <slot name="actions" />
      </div>
    </div>
    
    <el-table
      :data="data"
      :loading="loading"
      v-bind="$attrs"
      @selection-change="handleSelectionChange"
    >
      <el-table-column
        v-if="selectable"
        type="selection"
        width="55"
      />
      
      <slot />
    </el-table>
    
    <div class="table-pagination" v-if="showPagination">
      <el-pagination
        v-model:current-page="currentPage"
        v-model:page-size="pageSize"
        :total="total"
        :page-sizes="pageSizes"
        layout="total, sizes, prev, pager, next, jumper"
        @size-change="handleSizeChange"
        @current-change="handleCurrentChange"
      />
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'

interface Props {
  data: any[]
  loading?: boolean
  title?: string
  showHeader?: boolean
  selectable?: boolean
  showPagination?: boolean
  total?: number
  pageSizes?: number[]
}

const props = withDefaults(defineProps<Props>(), {
  loading: false,
  showHeader: true,
  selectable: false,
  showPagination: true,
  total: 0,
  pageSizes: () => [10, 20, 50, 100]
})

const emit = defineEmits<{
  selectionChange: [selection: any[]]
  sizeChange: [size: number]
  currentChange: [current: number]
}>()

const currentPage = ref(1)
const pageSize = ref(10)

const handleSelectionChange = (selection: any[]) => {
  emit('selectionChange', selection)
}

const handleSizeChange = (size: number) => {
  pageSize.value = size
  emit('sizeChange', size)
}

const handleCurrentChange = (current: number) => {
  currentPage.value = current
  emit('currentChange', current)
}
</script>
```

### 3. 业务组件

#### TemperatureChart.vue - 温度图表组件
```vue
<template>
  <div class="temperature-chart">
    <div class="chart-header">
      <h3>温度趋势图</h3>
      <div class="time-range-selector">
        <el-radio-group v-model="timeRange" @change="handleTimeRangeChange">
          <el-radio-button label="1h">1小时</el-radio-button>
          <el-radio-button label="6h">6小时</el-radio-button>
          <el-radio-button label="24h">24小时</el-radio-button>
        </el-radio-group>
      </div>
    </div>

    <div ref="chartRef" class="chart-container"></div>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted, watch } from 'vue'
import * as echarts from 'echarts'
import type { TemperatureData } from '@/types/device'

interface Props {
  data: TemperatureData[]
  loading?: boolean
}

const props = defineProps<Props>()
const emit = defineEmits<{
  timeRangeChange: [range: string]
}>()

const chartRef = ref<HTMLElement>()
const timeRange = ref('1h')
let chartInstance: echarts.ECharts | null = null

const initChart = () => {
  if (!chartRef.value) return

  chartInstance = echarts.init(chartRef.value)
  updateChart()
}

const updateChart = () => {
  if (!chartInstance) return

  const option = {
    title: {
      text: '温度监控',
      left: 'center'
    },
    tooltip: {
      trigger: 'axis',
      formatter: (params: any) => {
        const data = params[0]
        return `${data.name}<br/>温度: ${data.value}°C`
      }
    },
    xAxis: {
      type: 'time',
      boundaryGap: false
    },
    yAxis: {
      type: 'value',
      name: '温度(°C)',
      min: 'dataMin',
      max: 'dataMax'
    },
    series: [
      {
        name: '温度',
        type: 'line',
        smooth: true,
        data: props.data.map(item => [item.timestamp, item.temperature])
      }
    ]
  }

  chartInstance.setOption(option)
}

const handleTimeRangeChange = (range: string) => {
  emit('timeRangeChange', range)
}

watch(() => props.data, updateChart, { deep: true })

onMounted(() => {
  initChart()
})
</script>
```

#### ServerControlPanel.vue - 服务器控制面板
```vue
<template>
  <el-card class="server-control-panel">
    <template #header>
      <div class="card-header">
        <span>服务器控制</span>
        <el-tag :type="statusTagType">{{ server.status }}</el-tag>
      </div>
    </template>

    <div class="server-info">
      <div class="info-item">
        <span class="label">服务器名称:</span>
        <span class="value">{{ server.name }}</span>
      </div>
      <div class="info-item">
        <span class="label">IP地址:</span>
        <span class="value">{{ server.ip }}</span>
      </div>
      <div class="info-item">
        <span class="label">运行时间:</span>
        <span class="value">{{ formatUptime(server.uptime) }}</span>
      </div>
    </div>

    <div class="control-actions">
      <el-button
        type="warning"
        :loading="loading"
        @click="handleReboot"
      >
        重启服务器
      </el-button>

      <el-button
        type="danger"
        :loading="loading"
        @click="handleShutdown"
      >
        关闭服务器
      </el-button>
    </div>

    <!-- 确认对话框 -->
    <ConfirmDialog
      v-model="showConfirm"
      :title="confirmTitle"
      :message="confirmMessage"
      :confirm-text="confirmText"
      @confirm="executeAction"
    />
  </el-card>
</template>

<script setup lang="ts">
import { ref, computed } from 'vue'
import { ElMessage } from 'element-plus'
import type { Server } from '@/types/device'
import ConfirmDialog from '@/components/common/ConfirmDialog.vue'

interface Props {
  server: Server
  loading?: boolean
}

const props = defineProps<Props>()
const emit = defineEmits<{
  reboot: [serverId: number]
  shutdown: [serverId: number]
}>()

const showConfirm = ref(false)
const currentAction = ref<'reboot' | 'shutdown'>('reboot')

const statusTagType = computed(() => {
  switch (props.server.status) {
    case 'online': return 'success'
    case 'offline': return 'danger'
    case 'error': return 'danger'
    default: return 'info'
  }
})

const confirmTitle = computed(() => {
  return currentAction.value === 'reboot' ? '确认重启' : '确认关机'
})

const confirmMessage = computed(() => {
  const action = currentAction.value === 'reboot' ? '重启' : '关机'
  return `确认${action}服务器 "${props.server.name}"？此操作将中断所有服务。`
})

const confirmText = computed(() => {
  return currentAction.value === 'reboot' ? 'REBOOT' : 'SHUTDOWN'
})

const formatUptime = (seconds: number) => {
  const days = Math.floor(seconds / 86400)
  const hours = Math.floor((seconds % 86400) / 3600)
  const minutes = Math.floor((seconds % 3600) / 60)
  return `${days}天 ${hours}小时 ${minutes}分钟`
}

const handleReboot = () => {
  currentAction.value = 'reboot'
  showConfirm.value = true
}

const handleShutdown = () => {
  currentAction.value = 'shutdown'
  showConfirm.value = true
}

const executeAction = () => {
  if (currentAction.value === 'reboot') {
    emit('reboot', props.server.id)
  } else {
    emit('shutdown', props.server.id)
  }
  showConfirm.value = false
}
</script>
```

---

**前端组件设计状态**: ✅ 已完成
**审核状态**: 待审核
**下一步**: 开发规范制定
```
