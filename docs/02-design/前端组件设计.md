# æ™ºèƒ½è®¾å¤‡ç®¡ç†ç³»ç»Ÿå‰ç«¯ç»„ä»¶è®¾è®¡æ–‡æ¡£

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯
- **é¡¹ç›®åç§°**: æ™ºèƒ½è®¾å¤‡ç®¡ç†ç³»ç»Ÿ (Smart Device Management System)
- **å‰ç«¯ç‰ˆæœ¬**: v1.0
- **è®¾è®¡æ—¥æœŸ**: 2025-09-15
- **å‰ç«¯æ¶æ„å¸ˆ**: AI Assistant (Frontend Architect)
- **æŠ€æœ¯æ ˆ**: Vue3 + TypeScript + Element Plus + Pinia + Vite

## ğŸ—ï¸ å‰ç«¯æ¶æ„è®¾è®¡

### æŠ€æœ¯æ ˆé€‰å‹
```typescript
// æ ¸å¿ƒæ¡†æ¶
Vue 3.4+ (Composition API)
TypeScript 5.0+
Vite 5.0+ (æ„å»ºå·¥å…·)

// UIç»„ä»¶åº“
Element Plus 2.4+
@element-plus/icons-vue

// çŠ¶æ€ç®¡ç†
Pinia 2.1+

// è·¯ç”±ç®¡ç†
Vue Router 4.2+

// HTTPå®¢æˆ·ç«¯
Axios 1.6+

// å·¥å…·åº“
dayjs (æ—¥æœŸå¤„ç†)
echarts (å›¾è¡¨)
lodash-es (å·¥å…·å‡½æ•°)
```

### é¡¹ç›®ç›®å½•ç»“æ„
```
frontend/
â”œâ”€â”€ public/                     # é™æ€èµ„æº
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/                   # APIæ¥å£å±‚
â”‚   â”‚   â”œâ”€â”€ index.ts          # APIå®¢æˆ·ç«¯é…ç½®
â”‚   â”‚   â”œâ”€â”€ auth.ts           # è®¤è¯ç›¸å…³API
â”‚   â”‚   â”œâ”€â”€ dashboard.ts      # ç³»ç»Ÿæ¦‚è§ˆAPI
â”‚   â”‚   â”œâ”€â”€ temperature.ts    # æ¸©åº¦ç›‘æ§API
â”‚   â”‚   â”œâ”€â”€ server.ts         # æœåŠ¡å™¨ç®¡ç†API
â”‚   â”‚   â”œâ”€â”€ breaker.ts        # æ–­è·¯å™¨æ§åˆ¶API
â”‚   â”‚   â”œâ”€â”€ aiControl.ts      # AIæ™ºèƒ½æ§åˆ¶API
â”‚   â”‚   â”œâ”€â”€ alarm.ts          # æ™ºèƒ½å‘Šè­¦API
â”‚   â”‚   â””â”€â”€ security.ts       # å®‰å…¨æ§åˆ¶API
â”‚   â”œâ”€â”€ components/           # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ common/          # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ AppHeader.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ AppSidebar.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ BreadcrumbNav.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ LoadingSpinner.vue
â”‚   â”‚   â”‚   â””â”€â”€ ConfirmDialog.vue
â”‚   â”‚   â”œâ”€â”€ charts/          # å›¾è¡¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ LineChart.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ BarChart.vue
â”‚   â”‚   â”‚   â””â”€â”€ GaugeChart.vue
â”‚   â”‚   â”œâ”€â”€ forms/           # è¡¨å•ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ DeviceForm.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ AlarmRuleForm.vue
â”‚   â”‚   â”‚   â””â”€â”€ StrategyForm.vue
â”‚   â”‚   â””â”€â”€ tables/          # è¡¨æ ¼ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ DataTable.vue
â”‚   â”‚       â””â”€â”€ StatusTable.vue
â”‚   â”œâ”€â”€ composables/         # ç»„åˆå¼å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ useAuth.ts       # è®¤è¯ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ useWebSocket.ts  # WebSocketè¿æ¥
â”‚   â”‚   â”œâ”€â”€ useApi.ts        # APIè¯·æ±‚å°è£…
â”‚   â”‚   â”œâ”€â”€ useTable.ts      # è¡¨æ ¼æ“ä½œ
â”‚   â”‚   â””â”€â”€ useChart.ts      # å›¾è¡¨æ“ä½œ
â”‚   â”œâ”€â”€ stores/              # PiniaçŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ index.ts         # Storeé…ç½®
â”‚   â”‚   â”œâ”€â”€ auth.ts          # è®¤è¯çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ dashboard.ts     # ç³»ç»Ÿæ¦‚è§ˆçŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ temperature.ts   # æ¸©åº¦ç›‘æ§çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ server.ts        # æœåŠ¡å™¨ç®¡ç†çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ breaker.ts       # æ–­è·¯å™¨æ§åˆ¶çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ aiControl.ts     # AIæ™ºèƒ½æ§åˆ¶çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ alarm.ts         # æ™ºèƒ½å‘Šè­¦çŠ¶æ€
â”‚   â”‚   â””â”€â”€ websocket.ts     # WebSocketçŠ¶æ€
â”‚   â”œâ”€â”€ types/               # TypeScriptç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ api.ts           # APIå“åº”ç±»å‹
â”‚   â”‚   â”œâ”€â”€ device.ts        # è®¾å¤‡ç›¸å…³ç±»å‹
â”‚   â”‚   â”œâ”€â”€ user.ts          # ç”¨æˆ·ç›¸å…³ç±»å‹
â”‚   â”‚   â””â”€â”€ common.ts        # é€šç”¨ç±»å‹
â”‚   â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ request.ts       # HTTPè¯·æ±‚å°è£…
â”‚   â”‚   â”œâ”€â”€ auth.ts          # è®¤è¯å·¥å…·
â”‚   â”‚   â”œâ”€â”€ format.ts        # æ ¼å¼åŒ–å·¥å…·
â”‚   â”‚   â”œâ”€â”€ validation.ts    # è¡¨å•éªŒè¯
â”‚   â”‚   â””â”€â”€ constants.ts     # å¸¸é‡å®šä¹‰
â”‚   â”œâ”€â”€ views/               # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Login.vue        # ç™»å½•é¡µ
â”‚   â”‚   â”œâ”€â”€ Dashboard/       # ç³»ç»Ÿæ¦‚è§ˆ
â”‚   â”‚   â”‚   â””â”€â”€ index.vue
â”‚   â”‚   â”œâ”€â”€ Temperature/     # æ¸©åº¦ç›‘æ§
â”‚   â”‚   â”‚   â”œâ”€â”€ Monitor.vue  # å®æ—¶ç›‘æ§
â”‚   â”‚   â”‚   â””â”€â”€ Config.vue   # ä¼ æ„Ÿå™¨ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ Server/          # æœåŠ¡å™¨ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ Monitor.vue  # æœåŠ¡å™¨ç›‘æ§
â”‚   â”‚   â”‚   â””â”€â”€ Config.vue   # è¿æ¥é…ç½®
â”‚   â”‚   â”œâ”€â”€ Breaker/         # æ–­è·¯å™¨æ§åˆ¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Monitor.vue  # æ–­è·¯å™¨ç›‘æ§
â”‚   â”‚   â”‚   â””â”€â”€ Config.vue   # æ–­è·¯å™¨é…ç½®
â”‚   â”‚   â”œâ”€â”€ AIControl/       # AIæ™ºèƒ½æ§åˆ¶
â”‚   â”‚   â”‚   â””â”€â”€ index.vue
â”‚   â”‚   â”œâ”€â”€ Alarm/           # æ™ºèƒ½å‘Šè­¦
â”‚   â”‚   â”‚   â””â”€â”€ index.vue
â”‚   â”‚   â””â”€â”€ Security/        # å®‰å…¨æ§åˆ¶
â”‚   â”‚       â””â”€â”€ index.vue
â”‚   â”œâ”€â”€ router/              # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ index.ts         # è·¯ç”±ä¸»é…ç½®
â”‚   â”‚   â””â”€â”€ guards.ts        # è·¯ç”±å®ˆå«
â”‚   â”œâ”€â”€ styles/              # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ index.scss       # å…¨å±€æ ·å¼
â”‚   â”‚   â”œâ”€â”€ variables.scss   # SCSSå˜é‡
â”‚   â”‚   â””â”€â”€ components.scss  # ç»„ä»¶æ ·å¼
â”‚   â”œâ”€â”€ App.vue              # æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.ts              # åº”ç”¨å…¥å£
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ vite.config.ts
â””â”€â”€ README.md
```

## ğŸ§© æ ¸å¿ƒç»„ä»¶è®¾è®¡

### 1. å¸ƒå±€ç»„ä»¶

#### AppLayout.vue - ä¸»å¸ƒå±€ç»„ä»¶
```vue
<template>
  <div class="app-layout">
    <AppSidebar 
      :collapsed="sidebarCollapsed"
      @toggle="toggleSidebar"
    />
    <div class="main-content" :class="{ 'sidebar-collapsed': sidebarCollapsed }">
      <AppHeader @logout="handleLogout" />
      <BreadcrumbNav :breadcrumbs="currentBreadcrumbs" />
      <div class="content-wrapper">
        <router-view />
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, computed } from 'vue'
import { useRouter } from 'vue-router'
import { useAuthStore } from '@/stores/auth'

const router = useRouter()
const authStore = useAuthStore()

const sidebarCollapsed = ref(false)

const currentBreadcrumbs = computed(() => {
  // æ ¹æ®å½“å‰è·¯ç”±ç”Ÿæˆé¢åŒ…å±‘
  return router.currentRoute.value.meta.breadcrumbs || []
})

const toggleSidebar = () => {
  sidebarCollapsed.value = !sidebarCollapsed.value
}

const handleLogout = async () => {
  await authStore.logout()
  router.push('/login')
}
</script>
```

#### AppSidebar.vue - ä¾§è¾¹æ ç»„ä»¶
```vue
<template>
  <div class="app-sidebar" :class="{ collapsed }">
    <div class="logo">
      <h2 v-if="!collapsed">æ™ºèƒ½è®¾å¤‡ç®¡ç†</h2>
      <h2 v-else>æ™ºèƒ½</h2>
    </div>
    
    <el-menu
      :default-active="activeMenu"
      :collapse="collapsed"
      :unique-opened="true"
      router
    >
      <el-menu-item index="/dashboard">
        <el-icon><House /></el-icon>
        <span>ç³»ç»Ÿæ¦‚è§ˆ</span>
      </el-menu-item>
      
      <el-sub-menu index="temperature">
        <template #title>
          <el-icon><Thermometer /></el-icon>
          <span>æ¸©åº¦ç›‘æ§</span>
        </template>
        <el-menu-item index="/temperature/monitor">å®æ—¶ç›‘æ§</el-menu-item>
        <el-menu-item index="/temperature/config">ä¼ æ„Ÿå™¨ç®¡ç†</el-menu-item>
      </el-sub-menu>
      
      <el-sub-menu index="server">
        <template #title>
          <el-icon><Monitor /></el-icon>
          <span>æœåŠ¡å™¨ç®¡ç†</span>
        </template>
        <el-menu-item index="/server/monitor">æœåŠ¡å™¨ç›‘æ§</el-menu-item>
        <el-menu-item index="/server/config">è¿æ¥é…ç½®</el-menu-item>
      </el-sub-menu>
      
      <el-sub-menu index="breaker">
        <template #title>
          <el-icon><Lightning /></el-icon>
          <span>æ™ºèƒ½æ–­è·¯å™¨</span>
        </template>
        <el-menu-item index="/breaker/monitor">æ–­è·¯å™¨ç›‘æ§</el-menu-item>
        <el-menu-item index="/breaker/config">æ–­è·¯å™¨é…ç½®</el-menu-item>
      </el-sub-menu>
      
      <el-menu-item index="/ai-control">
        <el-icon><Cpu /></el-icon>
        <span>AIæ™ºèƒ½æ§åˆ¶</span>
      </el-menu-item>
      
      <el-menu-item index="/alarm">
        <el-icon><Bell /></el-icon>
        <span>æ™ºèƒ½å‘Šè­¦</span>
      </el-menu-item>
      
      <el-menu-item index="/security">
        <el-icon><Lock /></el-icon>
        <span>å®‰å…¨æ§åˆ¶</span>
      </el-menu-item>
    </el-menu>
  </div>
</template>

<script setup lang="ts">
import { computed } from 'vue'
import { useRoute } from 'vue-router'
import { House, Thermometer, Monitor, Lightning, Cpu, Bell, Lock } from '@element-plus/icons-vue'

interface Props {
  collapsed: boolean
}

defineProps<Props>()
defineEmits<{
  toggle: []
}>()

const route = useRoute()

const activeMenu = computed(() => {
  return route.path
})
</script>
```

### 2. æ•°æ®å±•ç¤ºç»„ä»¶

#### StatusCard.vue - çŠ¶æ€å¡ç‰‡ç»„ä»¶
```vue
<template>
  <el-card class="status-card" :class="statusClass">
    <div class="card-header">
      <div class="icon">
        <component :is="icon" />
      </div>
      <div class="title">{{ title }}</div>
    </div>
    
    <div class="card-content">
      <div class="value">{{ formattedValue }}</div>
      <div class="unit" v-if="unit">{{ unit }}</div>
    </div>
    
    <div class="card-footer" v-if="description">
      <span class="description">{{ description }}</span>
    </div>
  </el-card>
</template>

<script setup lang="ts">
import { computed } from 'vue'

interface Props {
  title: string
  value: number | string
  unit?: string
  icon: any
  status?: 'normal' | 'warning' | 'danger' | 'success'
  description?: string
  precision?: number
}

const props = withDefaults(defineProps<Props>(), {
  status: 'normal',
  precision: 1
})

const statusClass = computed(() => {
  return `status-${props.status}`
})

const formattedValue = computed(() => {
  if (typeof props.value === 'number') {
    return props.value.toFixed(props.precision)
  }
  return props.value
})
</script>
```

#### DataTable.vue - æ•°æ®è¡¨æ ¼ç»„ä»¶
```vue
<template>
  <div class="data-table">
    <div class="table-header" v-if="showHeader">
      <div class="table-title">{{ title }}</div>
      <div class="table-actions">
        <slot name="actions" />
      </div>
    </div>
    
    <el-table
      :data="data"
      :loading="loading"
      v-bind="$attrs"
      @selection-change="handleSelectionChange"
    >
      <el-table-column
        v-if="selectable"
        type="selection"
        width="55"
      />
      
      <slot />
    </el-table>
    
    <div class="table-pagination" v-if="showPagination">
      <el-pagination
        v-model:current-page="currentPage"
        v-model:page-size="pageSize"
        :total="total"
        :page-sizes="pageSizes"
        layout="total, sizes, prev, pager, next, jumper"
        @size-change="handleSizeChange"
        @current-change="handleCurrentChange"
      />
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'

interface Props {
  data: any[]
  loading?: boolean
  title?: string
  showHeader?: boolean
  selectable?: boolean
  showPagination?: boolean
  total?: number
  pageSizes?: number[]
}

const props = withDefaults(defineProps<Props>(), {
  loading: false,
  showHeader: true,
  selectable: false,
  showPagination: true,
  total: 0,
  pageSizes: () => [10, 20, 50, 100]
})

const emit = defineEmits<{
  selectionChange: [selection: any[]]
  sizeChange: [size: number]
  currentChange: [current: number]
}>()

const currentPage = ref(1)
const pageSize = ref(10)

const handleSelectionChange = (selection: any[]) => {
  emit('selectionChange', selection)
}

const handleSizeChange = (size: number) => {
  pageSize.value = size
  emit('sizeChange', size)
}

const handleCurrentChange = (current: number) => {
  currentPage.value = current
  emit('currentChange', current)
}
</script>
```

### 3. ä¸šåŠ¡ç»„ä»¶

#### TemperatureChart.vue - æ¸©åº¦å›¾è¡¨ç»„ä»¶
```vue
<template>
  <div class="temperature-chart">
    <div class="chart-header">
      <h3>æ¸©åº¦è¶‹åŠ¿å›¾</h3>
      <div class="time-range-selector">
        <el-radio-group v-model="timeRange" @change="handleTimeRangeChange">
          <el-radio-button label="1h">1å°æ—¶</el-radio-button>
          <el-radio-button label="6h">6å°æ—¶</el-radio-button>
          <el-radio-button label="24h">24å°æ—¶</el-radio-button>
        </el-radio-group>
      </div>
    </div>

    <div ref="chartRef" class="chart-container"></div>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted, watch } from 'vue'
import * as echarts from 'echarts'
import type { TemperatureData } from '@/types/device'

interface Props {
  data: TemperatureData[]
  loading?: boolean
}

const props = defineProps<Props>()
const emit = defineEmits<{
  timeRangeChange: [range: string]
}>()

const chartRef = ref<HTMLElement>()
const timeRange = ref('1h')
let chartInstance: echarts.ECharts | null = null

const initChart = () => {
  if (!chartRef.value) return

  chartInstance = echarts.init(chartRef.value)
  updateChart()
}

const updateChart = () => {
  if (!chartInstance) return

  const option = {
    title: {
      text: 'æ¸©åº¦ç›‘æ§',
      left: 'center'
    },
    tooltip: {
      trigger: 'axis',
      formatter: (params: any) => {
        const data = params[0]
        return `${data.name}<br/>æ¸©åº¦: ${data.value}Â°C`
      }
    },
    xAxis: {
      type: 'time',
      boundaryGap: false
    },
    yAxis: {
      type: 'value',
      name: 'æ¸©åº¦(Â°C)',
      min: 'dataMin',
      max: 'dataMax'
    },
    series: [
      {
        name: 'æ¸©åº¦',
        type: 'line',
        smooth: true,
        data: props.data.map(item => [item.timestamp, item.temperature])
      }
    ]
  }

  chartInstance.setOption(option)
}

const handleTimeRangeChange = (range: string) => {
  emit('timeRangeChange', range)
}

watch(() => props.data, updateChart, { deep: true })

onMounted(() => {
  initChart()
})
</script>
```

#### ServerControlPanel.vue - æœåŠ¡å™¨æ§åˆ¶é¢æ¿
```vue
<template>
  <el-card class="server-control-panel">
    <template #header>
      <div class="card-header">
        <span>æœåŠ¡å™¨æ§åˆ¶</span>
        <el-tag :type="statusTagType">{{ server.status }}</el-tag>
      </div>
    </template>

    <div class="server-info">
      <div class="info-item">
        <span class="label">æœåŠ¡å™¨åç§°:</span>
        <span class="value">{{ server.name }}</span>
      </div>
      <div class="info-item">
        <span class="label">IPåœ°å€:</span>
        <span class="value">{{ server.ip }}</span>
      </div>
      <div class="info-item">
        <span class="label">è¿è¡Œæ—¶é—´:</span>
        <span class="value">{{ formatUptime(server.uptime) }}</span>
      </div>
    </div>

    <div class="control-actions">
      <el-button
        type="warning"
        :loading="loading"
        @click="handleReboot"
      >
        é‡å¯æœåŠ¡å™¨
      </el-button>

      <el-button
        type="danger"
        :loading="loading"
        @click="handleShutdown"
      >
        å…³é—­æœåŠ¡å™¨
      </el-button>
    </div>

    <!-- ç¡®è®¤å¯¹è¯æ¡† -->
    <ConfirmDialog
      v-model="showConfirm"
      :title="confirmTitle"
      :message="confirmMessage"
      :confirm-text="confirmText"
      @confirm="executeAction"
    />
  </el-card>
</template>

<script setup lang="ts">
import { ref, computed } from 'vue'
import { ElMessage } from 'element-plus'
import type { Server } from '@/types/device'
import ConfirmDialog from '@/components/common/ConfirmDialog.vue'

interface Props {
  server: Server
  loading?: boolean
}

const props = defineProps<Props>()
const emit = defineEmits<{
  reboot: [serverId: number]
  shutdown: [serverId: number]
}>()

const showConfirm = ref(false)
const currentAction = ref<'reboot' | 'shutdown'>('reboot')

const statusTagType = computed(() => {
  switch (props.server.status) {
    case 'online': return 'success'
    case 'offline': return 'danger'
    case 'error': return 'danger'
    default: return 'info'
  }
})

const confirmTitle = computed(() => {
  return currentAction.value === 'reboot' ? 'ç¡®è®¤é‡å¯' : 'ç¡®è®¤å…³æœº'
})

const confirmMessage = computed(() => {
  const action = currentAction.value === 'reboot' ? 'é‡å¯' : 'å…³æœº'
  return `ç¡®è®¤${action}æœåŠ¡å™¨ "${props.server.name}"ï¼Ÿæ­¤æ“ä½œå°†ä¸­æ–­æ‰€æœ‰æœåŠ¡ã€‚`
})

const confirmText = computed(() => {
  return currentAction.value === 'reboot' ? 'REBOOT' : 'SHUTDOWN'
})

const formatUptime = (seconds: number) => {
  const days = Math.floor(seconds / 86400)
  const hours = Math.floor((seconds % 86400) / 3600)
  const minutes = Math.floor((seconds % 3600) / 60)
  return `${days}å¤© ${hours}å°æ—¶ ${minutes}åˆ†é’Ÿ`
}

const handleReboot = () => {
  currentAction.value = 'reboot'
  showConfirm.value = true
}

const handleShutdown = () => {
  currentAction.value = 'shutdown'
  showConfirm.value = true
}

const executeAction = () => {
  if (currentAction.value === 'reboot') {
    emit('reboot', props.server.id)
  } else {
    emit('shutdown', props.server.id)
  }
  showConfirm.value = false
}
</script>
```

---

**å‰ç«¯ç»„ä»¶è®¾è®¡çŠ¶æ€**: âœ… å·²å®Œæˆ
**å®¡æ ¸çŠ¶æ€**: å¾…å®¡æ ¸
**ä¸‹ä¸€æ­¥**: å¼€å‘è§„èŒƒåˆ¶å®š
```
