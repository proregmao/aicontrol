<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>智能机房管理系统 - 完整UI展示</title>
    <style>
        /* 基于frontend的Element Plus设计系统 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #f5f5f5;
        }

        #app {
            min-height: 100vh;
            background-color: #f5f5f5;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            padding-top: 0;
        }

        /* 页面容器 - 严格按照frontend设计 */
        .page-container {
            width: 1400px;
            height: 1080px;
            margin: 0 auto;
            background: white;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            overflow: hidden;
        }

        .main-layout {
            display: flex;
            height: 100%;
        }

        /* 左侧菜单 - 严格按照frontend设计 */
        .sidebar {
            width: 200px;
            background: #001529;
            color: white;
            flex-shrink: 0;
        }

        .logo {
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-bottom: 1px solid #1f1f1f;
            margin-bottom: 20px;
        }

        .logo h2 {
            color: white;
            font-size: 18px;
            font-weight: 600;
        }

        .sidebar-menu {
            border: none;
            height: calc(100% - 84px);
            overflow-y: auto;
        }

        .menu-item {
            height: 50px;
            line-height: 50px;
            padding: 0 15px;
            color: #fff;
            background-color: transparent;
            border: none;
            width: 100%;
            text-align: left;
            cursor: pointer;
            font-size: 13px;
            transition: background-color 0.3s;
            display: block;
        }

        .menu-item:hover {
            background-color: #1890ff !important;
        }

        .menu-item.active {
            background-color: #1890ff;
        }

        .submenu-item {
            height: 40px;
            line-height: 40px;
            padding: 0 25px;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
            background-color: transparent;
            border: none;
            width: 100%;
            text-align: left;
            cursor: pointer;
            display: none;
        }

        .submenu-item.show {
            display: block;
        }

        .submenu-item:hover {
            background-color: #1890ff !important;
            color: #fff;
        }

        .submenu-item.active {
            background-color: #1890ff;
            color: #fff;
        }

        .menu-arrow {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            transition: transform 0.3s ease;
            color: rgba(255, 255, 255, 0.6);
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .menu-arrow::before {
            content: '';
            display: inline-block;
            width: 0;
            height: 0;
            border-style: solid;
        }

        .menu-arrow.right::before {
            border-left: 8px solid rgba(255, 255, 255, 0.6);
            border-top: 6px solid transparent;
            border-bottom: 6px solid transparent;
            border-right: none;
        }

        .menu-arrow.down::before {
            border-top: 8px solid rgba(255, 255, 255, 0.6);
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-bottom: none;
        }

        .menu-item:hover .menu-arrow.right::before {
            border-left-color: white;
        }

        .menu-item:hover .menu-arrow.down::before {
            border-top-color: white;
        }

        .menu-item {
            position: relative;
        }

        .menu-item:hover .menu-arrow {
            color: white;
        }

        .submenu-group {
            overflow: hidden;
            transition: all 0.3s ease;
            background-color: rgba(0, 0, 0, 0.1);
        }

        .submenu-group .submenu-item {
            margin-left: 20px;
            width: calc(100% - 20px);
            border-left: 2px solid transparent;
        }

        .submenu-group .submenu-item:hover {
            border-left-color: #1890ff;
        }

        .submenu-group .submenu-item.active {
            border-left-color: #1890ff;
        }

        /* 右侧内容区域 - 严格按照frontend设计 */
        .content-area {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        /* 面包屑导航 - 严格按照frontend设计 */
        .breadcrumb-nav {
            height: 60px;
            background: white;
            border-bottom: 1px solid #e8e8e8;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
        }

        .nav-actions {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-actions .btn {
            color: #666;
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 4px;
            transition: color 0.3s;
        }

        .nav-actions .btn:hover {
            color: #1890ff;
        }

        /* 主要内容 - 严格按照frontend设计 */
        .main-content {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
        }

        /* 页面布局组件 - 基于PageLayout.vue */
        .page-layout {
            padding: 20px;
        }

        .page-header {
            margin-bottom: 20px;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .page-header h1 {
            margin: 0 0 10px 0;
            color: #1890ff;
            font-size: 24px;
            font-weight: 600;
        }

        .page-header p {
            margin: 0;
            color: #666;
            font-size: 14px;
        }

        /* 统计卡片区域 */
        .stats-section {
            margin-bottom: 20px;
        }

        .status-cards {
            display: flex;
            gap: 20px;
            margin-bottom: 0;
        }

        /* 统计卡片 - 基于StatCard.vue */
        .status-card {
            flex: 1;
            height: 120px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            position: relative;
        }

        .status-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transform: translateY(-2px);
        }

        .status-item {
            display: flex;
            align-items: center;
            height: 100%;
            padding: 16px;
        }

        .status-icon {
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
        }

        .status-info {
            flex: 1;
        }

        .status-info h3 {
            margin: 0 0 10px 0;
            font-size: 14px;
            color: #666;
            font-weight: 500;
        }

        .status-value {
            margin: 0 0 5px 0;
            font-size: 24px;
            font-weight: bold;
            line-height: 1;
            color: #1890ff;
        }

        .status-subtitle {
            margin: 0;
            font-size: 12px;
            color: #999;
        }

        /* 状态样式 */
        .status-card.success {
            border-left: 4px solid #52c41a;
        }

        .status-card.warning {
            border-left: 4px solid #faad14;
        }

        .status-card.danger {
            border-left: 4px solid #ff4d4f;
        }

        .status-card.info {
            border-left: 4px solid #1890ff;
        }

        /* 功能卡片 */
        .function-card {
            margin-bottom: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .function-card .card-header {
            padding: 18px 20px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .function-card .card-header h3 {
            margin: 0;
            font-size: 16px;
            font-weight: 600;
            color: #262626;
        }

        .function-card .card-body {
            padding: 20px;
        }

        /* 按钮样式 - Element Plus风格 */
        .btn {
            display: inline-block;
            padding: 8px 15px;
            font-size: 14px;
            border-radius: 4px;
            border: 1px solid #d9d9d9;
            background: #fff;
            color: #000000d9;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            margin-right: 8px;
        }

        .btn:hover {
            color: #40a9ff;
            border-color: #40a9ff;
        }

        .btn-primary {
            color: #fff;
            background-color: #1890ff;
            border-color: #1890ff;
        }

        .btn-primary:hover {
            background-color: #40a9ff;
            border-color: #40a9ff;
        }

        /* 时间范围按钮组样式 */
        .time-range-buttons {
            display: inline-flex;
            gap: 0;
        }

        .time-range-buttons .btn {
            margin-right: 0;
            border-radius: 0;
            min-width: 60px;
            text-align: center;
            box-sizing: border-box;
            transition: background-color 0.3s, border-color 0.3s, color 0.3s;
        }

        .time-range-buttons .btn:first-child {
            border-radius: 4px 0 0 4px;
        }

        .time-range-buttons .btn:last-child {
            border-radius: 0 4px 4px 0;
        }

        .time-range-buttons .btn + .btn {
            border-left: none;
        }

        .time-range-buttons .btn.active {
            color: #fff;
            background-color: #1890ff;
            border-color: #1890ff;
            z-index: 1;
            position: relative;
        }

        .time-range-buttons .btn.active:hover {
            background-color: #40a9ff;
            border-color: #40a9ff;
        }

        /* 操作步骤样式 */
        .step-item {
            display: flex;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #e8e8e8;
        }

        .step-item:last-child {
            border-bottom: none;
        }

        .step-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            background: #f0f0f0;
            color: #666;
            border-radius: 50%;
            font-size: 12px;
            font-weight: bold;
            margin-right: 12px;
            flex-shrink: 0;
        }

        .step-item.active .step-number {
            background: #1890ff;
            color: white;
        }

        .step-item.completed .step-number {
            background: #52c41a;
            color: white;
        }

        .step-text {
            flex: 1;
            font-size: 14px;
            color: #333;
        }

        .step-status {
            font-size: 12px;
            color: #666;
            padding: 2px 8px;
            border-radius: 12px;
            background: #f0f0f0;
        }

        .step-item.active .step-status {
            background: #e6f7ff;
            color: #1890ff;
        }

        .step-item.completed .step-status {
            background: #f6ffed;
            color: #52c41a;
        }

        /* 进度条样式 */
        .progress-container {
            margin-top: 8px;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #1890ff, #40a9ff);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 10px;
        }

        .progress-text {
            text-align: center;
            font-size: 12px;
            color: #666;
            margin-top: 4px;
        }

        /* 开关按钮样式 */
        .switch {
            position: relative;
            display: inline-block;
            width: 44px;
            height: 24px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #1890ff;
        }

        input:checked + .slider:before {
            transform: translateX(20px);
        }

        .btn-success {
            color: #fff;
            background-color: #52c41a;
            border-color: #52c41a;
        }

        .btn-warning {
            color: #fff;
            background-color: #faad14;
            border-color: #faad14;
        }

        .btn-danger {
            color: #fff;
            background-color: #ff4d4f;
            border-color: #ff4d4f;
        }

        /* 页面内容 */
        .page-content {
            display: none;
        }

        .page-content.active {
            display: block !important;
        }

        /* 表格样式 */
        .table {
            width: 100%;
            border-collapse: collapse;
            border: 1px solid #e8e8e8;
        }

        .table th,
        .table td {
            padding: 12px;
            text-align: left;
            border: 1px solid #e8e8e8;
        }

        .table th {
            background-color: #fafafa;
            font-weight: 600;
            color: #000000d9;
            text-align: center;
        }

        .table tbody tr:hover {
            background-color: #fafafa;
        }

        /* 状态标签 */
        .status {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-online {
            background-color: #f6ffed;
            color: #52c41a;
            border: 1px solid #b7eb8f;
        }

        .status-offline {
            background-color: #fff2f0;
            color: #ff4d4f;
            border: 1px solid #ffccc7;
        }

        .status-warning {
            background-color: #fffbe6;
            color: #faad14;
            border: 1px solid #ffe58f;
        }

        .status-error {
            background-color: #fff2f0;
            color: #ff4d4f;
            border: 1px solid #ffccc7;
        }

        /* 表单样式 */
        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #000000d9;
        }

        .form-input {
            width: 100%;
            padding: 8px 11px;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: #1890ff;
            box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);
        }

        /* 模态框 */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.45);
            z-index: 1000;
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            max-width: 520px;
            width: 90%;
            max-height: 80vh;
            display: flex;
            flex-direction: column;
        }

        .modal-header {
            padding: 16px 24px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            border-radius: 8px 8px 0 0;
            flex-shrink: 0;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .modal-title {
            font-size: 16px;
            font-weight: 500;
            margin: 0;
            color: #000000d9;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 16px;
            cursor: pointer;
            color: #00000073;
            padding: 0;
            width: 22px;
            height: 22px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 2px;
            transition: all 0.3s;
        }

        .modal-close:hover {
            background-color: rgba(0, 0, 0, 0.06);
            color: #000000d9;
        }

        .modal-body {
            padding: 24px;
            flex: 1;
            overflow-y: auto;
            max-height: calc(80vh - 120px);
        }

        .modal-footer {
            padding: 10px 16px;
            border-top: 1px solid #f0f0f0;
            display: flex;
            justify-content: flex-end;
            gap: 8px;
            background: white;
            border-radius: 0 0 8px 8px;
            flex-shrink: 0;
            position: sticky;
            bottom: 0;
            z-index: 10;
        }

        /* 图表容器 */
        .chart-container {
            height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #fafafa;
            border-radius: 4px;
            color: #00000073;
            font-size: 16px;
        }

        /* 硬件信息卡片样式 */
        .hardware-info-card {
            background: #fff;
            border: 1px solid #e8e8e8;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .hardware-info-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }

        .hardware-icon {
            font-size: 32px;
            margin-bottom: 12px;
        }

        .hardware-details h4 {
            margin: 0 0 8px 0;
            color: #262626;
            font-size: 16px;
            font-weight: 600;
        }

        .hardware-value {
            color: #1890ff;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .hardware-usage {
            color: #52c41a;
            font-size: 12px;
            margin-bottom: 2px;
        }

        .hardware-temp {
            color: #8c8c8c;
            font-size: 12px;
        }

        /* 快速操作按钮 */
        .quick-action-buttons {
            display: flex;
            gap: 20px;
        }

        .quick-action-buttons .btn {
            flex: 1;
            height: 60px;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="page-container">
            <div class="main-layout">
                <!-- 左侧菜单 -->
                <div class="sidebar">
                    <div class="logo">
                        <h2>智能设备管理</h2>
                    </div>
                    <div class="sidebar-menu">
                        <button class="menu-item" onclick="showPage('dashboard', '', '🏠 系统概览')">🏠 系统概览</button>

                        <button class="menu-item" onclick="toggleMainMenu('temperature', '🌡️ 温度监控', 'temp-monitor', this)">
                            🌡️ 温度监控 <span class="menu-arrow right"></span>
                        </button>
                        <div class="submenu-group" id="temperature-submenu" style="display: none;">
                            <button class="submenu-item" onclick="showPage('temp-monitor', '🌡️ 温度监控', '📊 实时监控')">📊 实时监控</button>
                            <button class="submenu-item" onclick="showPage('temp-config', '🌡️ 温度监控', '⚙️ 传感器管理')">⚙️ 传感器管理</button>
                        </div>

                        <button class="menu-item" onclick="toggleMainMenu('servers', '🖥️ 服务器管理', 'server-monitor', this)">
                            🖥️ 服务器管理 <span class="menu-arrow down"></span>
                        </button>
                        <div class="submenu-group" id="servers-submenu" style="display: block;">
                            <button class="submenu-item active" onclick="showPage('server-monitor', '🖥️ 服务器管理', '📊 服务器监控')">📊 服务器监控</button>
                            <button class="submenu-item" onclick="showPage('server-config', '🖥️ 服务器管理', '⚙️ 连接配置')">⚙️ 连接配置</button>
                        </div>

                        <button class="menu-item" onclick="toggleMainMenu('breaker', '⚡ 智能断路器', 'breaker-monitor', this)">
                            ⚡ 智能断路器 <span class="menu-arrow right"></span>
                        </button>
                        <div class="submenu-group" id="breaker-submenu" style="display: none;">
                            <button class="submenu-item" onclick="showPage('breaker-monitor', '⚡ 智能断路器', '📊 断路器监控')">📊 断路器监控</button>
                            <button class="submenu-item" onclick="showPage('breaker-config', '⚡ 智能断路器', '⚙️ 断路器配置')">⚙️ 断路器配置</button>
                        </div>

                        <button class="menu-item" onclick="showPage('ai-control', '', '🤖 AI智能控制')">🤖 AI智能控制</button>
                        <button class="menu-item" onclick="showPage('alarms', '', '🔔 智能告警')">🔔 智能告警</button>
                        <button class="menu-item" onclick="showPage('security', '', '🔒 安全控制')">🔒 安全控制</button>
                    </div>
                </div>

                <!-- 右侧内容区域 -->
                <div class="content-area">
                    <!-- 面包屑导航 -->
                    <div class="breadcrumb-nav">
                        <div>
                            <span>首页 / </span>
                            <span id="current-page-title">服务器管理 / 服务器监控</span>
                        </div>
                        
                        <div class="nav-actions">
                            <button class="btn" onclick="showModal('logoutModal')">
                                🚪 退出登录
                            </button>
                        </div>
                    </div>

                    <!-- 主要内容 -->
                    <div class="main-content">
                        <!-- 🏠 系统概览页面 -->
                        <div id="dashboard" class="page-content">
                            <div class="page-layout">
                                <!-- 页面标题区域 -->
                                <div class="page-header">
                                    <h1>🏠 系统概览</h1>
                                    <p>智能机房管理系统 - 硬件信息展示、系统状态概览、实时数据汇总、告警信息中心</p>
                                </div>

                                <!-- 统计卡片区域 -->
                                <div class="stats-section">
                                    <div class="status-cards">
                                        <div class="status-card info">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #1890ff">🖥️</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>硬件设备</h3>
                                                    <div class="status-value" style="color: #1890ff">8台</div>
                                                    <div class="status-subtitle">服务器2台 + 传感器4个 + 断路器2个</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">🌡️</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>环境温度</h3>
                                                    <div class="status-value" style="color: #52c41a">24.5°C</div>
                                                    <div class="status-subtitle">4路传感器平均值 | 正常范围</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">⚡</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>电源状态</h3>
                                                    <div class="status-value" style="color: #52c41a">正常</div>
                                                    <div class="status-subtitle">2路断路器在线 | 负载正常</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">🔔</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>告警状态</h3>
                                                    <div class="status-value" style="color: #52c41a">0</div>
                                                    <div class="status-subtitle">无活跃告警 | 系统运行正常</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- F1.1 硬件信息展示 -->
                                <div class="function-card">
                                    <div class="card-header">
                                        <h3>🖥️ 本机硬件信息</h3>
                                        <button class="btn btn-primary">🔄 刷新信息</button>
                                    </div>
                                    <div class="card-body">
                                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 20px;">
                                            <div class="hardware-info-card">
                                                <div class="hardware-icon">💻</div>
                                                <div class="hardware-details">
                                                    <h4>CPU</h4>
                                                    <div class="hardware-value">Intel Core i7-12700</div>
                                                    <div class="hardware-usage">使用率: 15.2%</div>
                                                    <div class="hardware-temp">温度: 42°C</div>
                                                </div>
                                            </div>
                                            <div class="hardware-info-card">
                                                <div class="hardware-icon">🧠</div>
                                                <div class="hardware-details">
                                                    <h4>内存</h4>
                                                    <div class="hardware-value">32GB DDR4</div>
                                                    <div class="hardware-usage">使用率: 68.5%</div>
                                                    <div class="hardware-temp">已用: 21.9GB</div>
                                                </div>
                                            </div>
                                            <div class="hardware-info-card">
                                                <div class="hardware-icon">💾</div>
                                                <div class="hardware-details">
                                                    <h4>磁盘</h4>
                                                    <div class="hardware-value">1TB NVMe SSD</div>
                                                    <div class="hardware-usage">使用率: 45.8%</div>
                                                    <div class="hardware-temp">可用: 542GB</div>
                                                </div>
                                            </div>
                                            <div class="hardware-info-card">
                                                <div class="hardware-icon">🌐</div>
                                                <div class="hardware-details">
                                                    <h4>网络</h4>
                                                    <div class="hardware-value">千兆以太网</div>
                                                    <div class="hardware-usage">上传: 2.5MB/s</div>
                                                    <div class="hardware-temp">下载: 15.8MB/s</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- F1.2 系统状态监控 -->
                                <div class="function-card">
                                    <div class="card-header">
                                        <h3>📊 系统状态监控</h3>
                                        <button class="btn btn-primary">🔄 刷新状态</button>
                                    </div>
                                    <div class="card-body">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>设备类型</th>
                                                    <th>设备名称</th>
                                                    <th>连接状态</th>
                                                    <th>运行状态</th>
                                                    <th>最后更新</th>
                                                    <th>快速操作</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>🌡️ 温度传感器</td>
                                                    <td>4路温度监控</td>
                                                    <td><span class="status status-online">在线</span></td>
                                                    <td><span class="status status-online">正常</span></td>
                                                    <td>2025-09-15 12:00:00</td>
                                                    <td><button class="btn" onclick="showPage('temp-monitor')">查看详情</button></td>
                                                </tr>
                                                <tr>
                                                    <td>🖥️ 服务器</td>
                                                    <td>主服务器 + 备用服务器</td>
                                                    <td><span class="status status-online">在线</span></td>
                                                    <td><span class="status status-online">运行中</span></td>
                                                    <td>2025-09-15 12:00:00</td>
                                                    <td><button class="btn" onclick="showPage('server-monitor')">查看详情</button></td>
                                                </tr>
                                                <tr>
                                                    <td>⚡ 智能断路器</td>
                                                    <td>断路器#1 + 断路器#2</td>
                                                    <td><span class="status status-online">在线</span></td>
                                                    <td><span class="status status-online">合闸</span></td>
                                                    <td>2025-09-15 12:00:00</td>
                                                    <td><button class="btn" onclick="showPage('breaker-monitor')">查看详情</button></td>
                                                </tr>
                                                <tr>
                                                    <td>🤖 AI控制</td>
                                                    <td>智能控制系统</td>
                                                    <td><span class="status status-online">启用</span></td>
                                                    <td><span class="status status-online">运行中</span></td>
                                                    <td>2025-09-15 12:00:00</td>
                                                    <td><button class="btn" onclick="showPage('ai-control')">查看详情</button></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- 告警信息中心 -->
                                <div class="function-card">
                                    <div class="card-header">
                                        <h3>🔔 告警信息中心</h3>
                                        <button class="btn" onclick="showPage('alarms')">查看全部告警</button>
                                    </div>
                                    <div class="card-body">
                                        <div style="text-align: center; padding: 40px; color: #52c41a;">
                                            <div style="font-size: 48px; margin-bottom: 16px;">✅</div>
                                            <div style="font-size: 18px; font-weight: 600; margin-bottom: 8px;">系统运行正常</div>
                                            <div style="color: #8c8c8c;">当前无活跃告警，所有设备运行状态良好</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 🌡️ 温度监控 - 📊 实时监控页面 -->
                        <div id="temp-monitor" class="page-content">
                            <div class="page-layout">
                                <!-- 页面标题区域 -->
                                <div class="page-header">
                                    <h1>🌡️ 温度监控 - 📊 实时监控</h1>
                                    <p>4路温度实时显示、历史趋势图表、告警阈值设置</p>
                                </div>

                                <!-- 统计卡片区域 -->
                                <div class="stats-section">
                                    <div class="status-cards">
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">🌡️</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>探头1 (室温)</h3>
                                                    <div class="status-value" style="color: #52c41a">23.5°C</div>
                                                    <div class="status-subtitle">正常范围 18-25°C | 5秒刷新</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">🌡️</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>探头2 (进风口)</h3>
                                                    <div class="status-value" style="color: #52c41a">21.2°C</div>
                                                    <div class="status-subtitle">正常范围 18-25°C | 5秒刷新</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card warning">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #faad14">🌡️</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>探头3 (出风口)</h3>
                                                    <div class="status-value" style="color: #faad14">35.8°C</div>
                                                    <div class="status-subtitle">警告范围 30-45°C | 5秒刷新</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">🌡️</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>探头4 (网络设备)</h3>
                                                    <div class="status-value" style="color: #52c41a">28.3°C</div>
                                                    <div class="status-subtitle">正常范围 22-40°C | 5秒刷新</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- 历史趋势图表 -->
                                <div class="function-card">
                                    <div class="card-header">
                                        <h3>📈 历史趋势图表</h3>
                                        <div class="time-range-buttons">
                                            <button class="btn" onclick="changeTimeRange('1h', this)">1小时</button>
                                            <button class="btn active" onclick="changeTimeRange('6h', this)">6小时</button>
                                            <button class="btn" onclick="changeTimeRange('24h', this)">24小时</button>
                                            <button class="btn" onclick="changeTimeRange('7d', this)">7天</button>
                                            <button class="btn" onclick="changeTimeRange('30d', this)">30天</button>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <div class="chart-container">
                                            📊 温度趋势图表 (ECharts)
                                            <br>显示4个探头的历史温度变化趋势
                                            <br>支持1小时到1年的历史数据查询
                                        </div>
                                    </div>
                                </div>

                                <!-- 告警阈值设置 -->
                                <div class="function-card">
                                    <div class="card-header">
                                        <h3>⚠️ 告警阈值设置</h3>
                                        <button class="btn btn-primary" onclick="showModal('temperatureAlarmModal')">设置告警</button>
                                    </div>
                                    <div class="card-body">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>探头</th>
                                                    <th>位置</th>
                                                    <th>正常范围</th>
                                                    <th>警告阈值</th>
                                                    <th>危险阈值</th>
                                                    <th>当前状态</th>
                                                    <th>操作</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>探头1</td>
                                                    <td>室温监测</td>
                                                    <td>18-25°C</td>
                                                    <td>25-30°C</td>
                                                    <td>>30°C</td>
                                                    <td><span class="status status-online">正常</span></td>
                                                    <td><button class="btn" onclick="showModal('temperatureAlarmModal')">编辑</button></td>
                                                </tr>
                                                <tr>
                                                    <td>探头2</td>
                                                    <td>进风口</td>
                                                    <td>18-25°C</td>
                                                    <td>25-30°C</td>
                                                    <td>>30°C</td>
                                                    <td><span class="status status-online">正常</span></td>
                                                    <td><button class="btn" onclick="showModal('temperatureAlarmModal')">编辑</button></td>
                                                </tr>
                                                <tr>
                                                    <td>探头3</td>
                                                    <td>出风口</td>
                                                    <td>30-45°C</td>
                                                    <td>45-60°C</td>
                                                    <td>>60°C</td>
                                                    <td><span class="status status-warning">警告</span></td>
                                                    <td><button class="btn" onclick="showModal('temperatureAlarmModal')">编辑</button></td>
                                                </tr>
                                                <tr>
                                                    <td>探头4</td>
                                                    <td>网络设备</td>
                                                    <td>22-40°C</td>
                                                    <td>40-50°C</td>
                                                    <td>>50°C</td>
                                                    <td><span class="status status-online">正常</span></td>
                                                    <td><button class="btn" onclick="showModal('temperatureAlarmModal')">编辑</button></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 🌡️ 温度监控 - ⚙️ 传感器管理页面 -->
                        <div id="temp-config" class="page-content">
                            <div class="page-layout">
                                <!-- 页面标题区域 -->
                                <div class="page-header">
                                    <h1>🌡️ 温度监控 - ⚙️ 传感器管理</h1>
                                    <p>连接状态管理、传感器校准、配置参数设置、操作日志记录</p>
                                </div>

                                <!-- 统计卡片区域 -->
                                <div class="stats-section">
                                    <div class="status-cards">
                                        <div class="status-card info">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #1890ff">🔗</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>连接状态</h3>
                                                    <div class="status-value" style="color: #52c41a">在线</div>
                                                    <div class="status-subtitle">RS485-ETH-M04 网关正常</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">📡</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>传感器数量</h3>
                                                    <div class="status-value" style="color: #52c41a">4个</div>
                                                    <div class="status-subtitle">RS485-18B20-6H1 全部在线</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">⚙️</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>校准状态</h3>
                                                    <div class="status-value" style="color: #52c41a">已校准</div>
                                                    <div class="status-subtitle">最后校准: 30天前</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card info">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #1890ff">💾</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>数据存储</h3>
                                                    <div class="status-value" style="color: #1890ff">正常</div>
                                                    <div class="status-subtitle">5秒间隔 | PostgreSQL</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- 连接状态管理 -->
                                <div class="function-card">
                                    <div class="card-header">
                                        <h3>🔗 连接状态管理</h3>
                                        <button class="btn btn-primary">测试连接</button>
                                    </div>
                                    <div class="card-body">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>设备</th>
                                                    <th>连接地址</th>
                                                    <th>通信协议</th>
                                                    <th>连接状态</th>
                                                    <th>最后通信</th>
                                                    <th>操作</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>RS485-ETH-M04 网关</td>
                                                    <td>192.168.110.50:502</td>
                                                    <td>Modbus-TCP</td>
                                                    <td><span class="status status-online">在线</span></td>
                                                    <td>2025-09-15 12:00:00</td>
                                                    <td>
                                                        <button class="btn" onclick="showModal('deviceConfigModal')">配置</button>
                                                        <button class="btn" onclick="showModal('deviceTestModal')">测试</button>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>RS485-18B20-6H1 传感器</td>
                                                    <td>Modbus地址: 1-4</td>
                                                    <td>Modbus-RTU</td>
                                                    <td><span class="status status-online">在线</span></td>
                                                    <td>2025-09-15 12:00:00</td>
                                                    <td>
                                                        <button class="btn" onclick="showModal('deviceConfigModal')">配置</button>
                                                        <button class="btn" onclick="showModal('sensorCalibrationModal')">校准</button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- 配置参数设置 -->
                                <div class="function-card">
                                    <div class="card-header">
                                        <h3>⚙️ 配置参数设置</h3>
                                        <button class="btn btn-primary">保存配置</button>
                                    </div>
                                    <div class="card-body">
                                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                                            <div class="form-group">
                                                <label class="form-label">数据采集间隔</label>
                                                <select class="form-input">
                                                    <option>1秒</option>
                                                    <option selected>5秒</option>
                                                    <option>10秒</option>
                                                    <option>30秒</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">数据存储间隔</label>
                                                <select class="form-input">
                                                    <option selected>5秒</option>
                                                    <option>10秒</option>
                                                    <option>30秒</option>
                                                    <option>1分钟</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">通信超时时间</label>
                                                <input type="number" class="form-input" value="3000" placeholder="毫秒">
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">重试次数</label>
                                                <input type="number" class="form-input" value="3" placeholder="次数">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- 操作日志记录 -->
                                <div class="function-card">
                                    <div class="card-header">
                                        <h3>📝 操作日志记录</h3>
                                        <button class="btn" onclick="showModal('exportDataModal')">导出日志</button>
                                    </div>
                                    <div class="card-body">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>时间</th>
                                                    <th>操作类型</th>
                                                    <th>操作内容</th>
                                                    <th>操作结果</th>
                                                    <th>操作用户</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>2025-09-15 12:00:00</td>
                                                    <td>配置修改</td>
                                                    <td>修改数据采集间隔为5秒</td>
                                                    <td><span class="status status-online">成功</span></td>
                                                    <td>admin</td>
                                                </tr>
                                                <tr>
                                                    <td>2025-09-15 11:30:00</td>
                                                    <td>传感器校准</td>
                                                    <td>执行探头1-4零点校准</td>
                                                    <td><span class="status status-online">成功</span></td>
                                                    <td>admin</td>
                                                </tr>
                                                <tr>
                                                    <td>2025-09-15 11:00:00</td>
                                                    <td>连接测试</td>
                                                    <td>测试RS485网关连接</td>
                                                    <td><span class="status status-online">成功</span></td>
                                                    <td>admin</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 🖥️ 服务器管理 - 📊 服务器监控页面 -->
                        <div id="server-monitor" class="page-content active">
                            <div class="page-layout">
                                <!-- 页面标题区域 -->
                                <div class="page-header">
                                    <h1>🖥️ 服务器管理 - 📊 服务器监控</h1>
                                    <p>硬件信息监控、系统状态监控、远程控制操作</p>
                                </div>

                                <!-- 统计卡片区域 -->
                                <div class="stats-section">
                                    <div class="status-cards">
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">🖥️</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>主服务器</h3>
                                                    <div class="status-value" style="color: #52c41a">运行中</div>
                                                    <div class="status-subtitle">CPU: 45% | 内存: 62% | 正常</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">🖥️</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>备用服务器</h3>
                                                    <div class="status-value" style="color: #52c41a">待机</div>
                                                    <div class="status-subtitle">CPU: 5% | 内存: 15% | 正常</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card info">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #1890ff">🔗</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>网络连接</h3>
                                                    <div class="status-value" style="color: #52c41a">正常</div>
                                                    <div class="status-subtitle">SSH连接 | 延迟: 2ms</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">💾</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>存储空间</h3>
                                                    <div class="status-value" style="color: #52c41a">充足</div>
                                                    <div class="status-subtitle">使用率: 35% | 剩余: 650GB</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- 硬件信息监控 -->
                                <div class="function-card">
                                    <div class="card-header">
                                        <h3>🔧 硬件信息监控</h3>
                                        <button class="btn btn-primary" onclick="refreshServerInfo()">🔄 刷新信息</button>
                                    </div>
                                    <div class="card-body">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>服务器</th>
                                                    <th>CPU型号</th>
                                                    <th>内存容量</th>
                                                    <th>存储容量</th>
                                                    <th>网络接口</th>
                                                    <th>运行状态</th>
                                                    <th>操作</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>主服务器</td>
                                                    <td>Intel Xeon E5-2680 v4</td>
                                                    <td>32GB DDR4</td>
                                                    <td>1TB SSD</td>
                                                    <td>千兆以太网</td>
                                                    <td><span class="status status-online">运行中</span></td>
                                                    <td>
                                                        <button class="btn" onclick="showModal('serverControlModal')">控制</button>
                                                        <button class="btn" onclick="showModal('serverDetailModal')">详情</button>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>备用服务器</td>
                                                    <td>Intel Xeon E5-2660 v3</td>
                                                    <td>16GB DDR4</td>
                                                    <td>500GB SSD</td>
                                                    <td>千兆以太网</td>
                                                    <td><span class="status status-online">待机</span></td>
                                                    <td>
                                                        <button class="btn" onclick="showModal('serverControlModal')">控制</button>
                                                        <button class="btn" onclick="showModal('serverDetailModal')">详情</button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- 系统状态监控 -->
                                <div class="function-card">
                                    <div class="card-header">
                                        <h3>📊 系统状态监控</h3>
                                        <button class="btn" onclick="showNotification('详细监控功能开发中...', 'info')">查看详细监控</button>
                                    </div>
                                    <div class="card-body">
                                        <div class="chart-container">
                                            📊 系统资源使用率图表 (ECharts)
                                            <br>CPU使用率、内存使用率、磁盘I/O、网络流量
                                            <br>实时监控服务器性能指标
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 🖥️ 服务器管理 - ⚙️ 连接配置页面 -->
                        <div id="server-config" class="page-content">
                            <div class="page-layout">
                                <!-- 页面标题区域 -->
                                <div class="page-header">
                                    <h1>🖥️ 服务器管理 - ⚙️ 连接配置</h1>
                                    <p>SSH连接配置、认证方式设置、连接参数管理、操作日志记录</p>
                                </div>

                                <!-- 统计卡片区域 -->
                                <div class="stats-section">
                                    <div class="status-cards">
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">🔐</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>SSH连接</h3>
                                                    <div class="status-value" style="color: #52c41a">已连接</div>
                                                    <div class="status-subtitle">2个服务器连接正常</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card info">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #1890ff">🔑</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>认证方式</h3>
                                                    <div class="status-value" style="color: #1890ff">密钥</div>
                                                    <div class="status-subtitle">RSA 2048位密钥认证</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">⏱️</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>连接延迟</h3>
                                                    <div class="status-value" style="color: #52c41a">2ms</div>
                                                    <div class="status-subtitle">网络连接稳定</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">🛡️</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>安全状态</h3>
                                                    <div class="status-value" style="color: #52c41a">安全</div>
                                                    <div class="status-subtitle">防火墙已启用</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- SSH连接配置 -->
                                <div class="function-card">
                                    <div class="card-header">
                                        <h3>🔐 SSH连接配置</h3>
                                        <button class="btn btn-primary" onclick="showModal('addServerModal')">添加服务器</button>
                                    </div>
                                    <div class="card-body">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>服务器名称</th>
                                                    <th>IP地址</th>
                                                    <th>端口</th>
                                                    <th>用户名</th>
                                                    <th>认证方式</th>
                                                    <th>连接状态</th>
                                                    <th>操作</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>主服务器</td>
                                                    <td>192.168.110.100</td>
                                                    <td>22</td>
                                                    <td>root</td>
                                                    <td>RSA密钥</td>
                                                    <td><span class="status status-online">已连接</span></td>
                                                    <td>
                                                        <button class="btn" onclick="showModal('deviceConfigModal')">编辑</button>
                                                        <button class="btn" onclick="showModal('deviceTestModal')">测试</button>
                                                        <button class="btn btn-danger" onclick="showNotification('SSH连接已断开', 'warning')">断开</button>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>备用服务器</td>
                                                    <td>192.168.110.101</td>
                                                    <td>22</td>
                                                    <td>root</td>
                                                    <td>RSA密钥</td>
                                                    <td><span class="status status-online">已连接</span></td>
                                                    <td>
                                                        <button class="btn" onclick="showModal('deviceConfigModal')">编辑</button>
                                                        <button class="btn" onclick="showModal('deviceTestModal')">测试</button>
                                                        <button class="btn btn-danger" onclick="showNotification('SSH连接已断开', 'warning')">断开</button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- 认证方式设置 -->
                                <div class="function-card">
                                    <div class="card-header">
                                        <h3>🔑 认证方式设置</h3>
                                        <button class="btn btn-primary">生成新密钥</button>
                                    </div>
                                    <div class="card-body">
                                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                                            <div class="form-group">
                                                <label class="form-label">认证类型</label>
                                                <select class="form-input">
                                                    <option>密码认证</option>
                                                    <option selected>RSA密钥认证</option>
                                                    <option>ED25519密钥认证</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">密钥长度</label>
                                                <select class="form-input">
                                                    <option>1024位</option>
                                                    <option selected>2048位</option>
                                                    <option>4096位</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">连接超时</label>
                                                <input type="number" class="form-input" value="30" placeholder="秒">
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">保持连接</label>
                                                <select class="form-input">
                                                    <option>禁用</option>
                                                    <option selected>启用</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ⚡ 智能断路器控制 - 📊 断路器监控页面 -->
                        <div id="breaker-monitor" class="page-content">
                            <div class="page-layout">
                                <!-- 页面标题区域 -->
                                <div class="page-header">
                                    <h1>⚡ 智能断路器控制 - 📊 断路器监控</h1>
                                    <p>电气参数监控、设备状态监控、手动控制操作、电能质量分析</p>
                                </div>

                                <!-- 统计卡片区域 -->
                                <div class="stats-section">
                                    <div class="status-cards">
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">⚡</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>断路器#1 (503)</h3>
                                                    <div class="status-value" style="color: #52c41a">合闸</div>
                                                    <div class="status-subtitle">220V | 15.2A | 3.34kW</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">⚡</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>断路器#2 (505)</h3>
                                                    <div class="status-value" style="color: #52c41a">合闸</div>
                                                    <div class="status-subtitle">220V | 8.7A | 1.91kW</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">🔗</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>通信状态</h3>
                                                    <div class="status-value" style="color: #52c41a">在线</div>
                                                    <div class="status-subtitle">Modbus-TCP 连接正常</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">🛡️</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>保护状态</h3>
                                                    <div class="status-value" style="color: #52c41a">正常</div>
                                                    <div class="status-subtitle">所有保护功能启用</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- 电气参数监控 -->
                                <div class="function-card">
                                    <div class="card-header">
                                        <h3>📊 电气参数监控</h3>
                                        <button class="btn btn-primary">🔄 刷新数据</button>
                                    </div>
                                    <div class="card-body">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>断路器</th>
                                                    <th>电压(V)</th>
                                                    <th>电流(A)</th>
                                                    <th>有功功率(kW)</th>
                                                    <th>功率因数</th>
                                                    <th>频率(Hz)</th>
                                                    <th>漏电流(mA)</th>
                                                    <th>温度(°C)</th>
                                                    <th>状态</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>断路器#1 (503)</td>
                                                    <td><span style="color: #52c41a; font-weight: bold;">220.5</span></td>
                                                    <td><span style="color: #52c41a; font-weight: bold;">15.2</span></td>
                                                    <td><span style="color: #52c41a; font-weight: bold;">3.34</span></td>
                                                    <td><span style="color: #52c41a; font-weight: bold;">0.98</span></td>
                                                    <td><span style="color: #52c41a; font-weight: bold;">50.0</span></td>
                                                    <td><span style="color: #52c41a; font-weight: bold;">2.1</span></td>
                                                    <td><span style="color: #52c41a; font-weight: bold;">35.2</span></td>
                                                    <td><span class="status status-online">合闸</span></td>
                                                </tr>
                                                <tr>
                                                    <td>断路器#2 (505)</td>
                                                    <td><span style="color: #52c41a; font-weight: bold;">220.8</span></td>
                                                    <td><span style="color: #52c41a; font-weight: bold;">8.7</span></td>
                                                    <td><span style="color: #52c41a; font-weight: bold;">1.91</span></td>
                                                    <td><span style="color: #52c41a; font-weight: bold;">0.99</span></td>
                                                    <td><span style="color: #52c41a; font-weight: bold;">50.0</span></td>
                                                    <td><span style="color: #52c41a; font-weight: bold;">1.8</span></td>
                                                    <td><span style="color: #52c41a; font-weight: bold;">32.8</span></td>
                                                    <td><span class="status status-online">合闸</span></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- 手动控制操作 -->
                                <div class="function-card">
                                    <div class="card-header">
                                        <h3>🎛️ 手动控制操作</h3>
                                        <div style="color: #ff4d4f; font-size: 12px;">⚠️ 危险操作，请谨慎执行</div>
                                    </div>
                                    <div class="card-body">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>断路器</th>
                                                    <th>当前状态</th>
                                                    <th>锁定状态</th>
                                                    <th>最后操作</th>
                                                    <th>控制操作</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>断路器#1 (503)<br><small id="breaker1Binding" style="color: #666;">绑定: 主服务器</small></td>
                                                    <td><span class="status status-online">合闸</span></td>
                                                    <td><span class="status status-offline">未锁定</span></td>
                                                    <td>2025-09-15 08:00:00</td>
                                                    <td>
                                                        <button class="btn btn-danger" onclick="showBreakerControl('breaker1', getCurrentBinding('breaker1'))">分闸</button>
                                                        <button class="btn" onclick="showNotification('断路器已锁定', 'success')">锁定</button>
                                                        <button class="btn btn-primary" onclick="showBindingModal('breaker1')">绑定</button>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>断路器#2 (505)<br><small id="breaker2Binding" style="color: #666;">绑定: 备用服务器</small></td>
                                                    <td><span class="status status-online">合闸</span></td>
                                                    <td><span class="status status-offline">未锁定</span></td>
                                                    <td>2025-09-15 08:00:00</td>
                                                    <td>
                                                        <button class="btn btn-danger" onclick="showBreakerControl('breaker2', getCurrentBinding('breaker2'))">分闸</button>
                                                        <button class="btn" onclick="showNotification('断路器已锁定', 'success')">锁定</button>
                                                        <button class="btn btn-primary" onclick="showBindingModal('breaker2')">绑定</button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- 电能质量分析 -->
                                <div class="function-card">
                                    <div class="card-header">
                                        <h3>📈 电能质量分析</h3>
                                        <button class="btn" onclick="showModal('exportDataModal')">导出报告</button>
                                    </div>
                                    <div class="card-body">
                                        <div class="chart-container">
                                            📊 电能质量分析图表 (ECharts)
                                            <br>电压偏差、负载率、功率因数评估
                                            <br>实时监控电能质量指标
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ⚡ 智能断路器控制 - ⚙️ 断路器配置页面 -->
                        <div id="breaker-config" class="page-content">
                            <div class="page-layout">
                                <!-- 页面标题区域 -->
                                <div class="page-header">
                                    <h1>⚡ 智能断路器控制 - ⚙️ 断路器配置</h1>
                                    <p>设备连接配置、保护参数设置、安全保护机制、定时控制配置、条件控制配置、操作日志</p>
                                </div>

                                <!-- 统计卡片区域 -->
                                <div class="stats-section">
                                    <div class="status-cards">
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">🔧</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>设备配置</h3>
                                                    <div class="status-value" style="color: #52c41a">已配置</div>
                                                    <div class="status-subtitle">2个断路器配置完成</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">🛡️</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>保护参数</h3>
                                                    <div class="status-value" style="color: #52c41a">已设置</div>
                                                    <div class="status-subtitle">过压/欠压/过流/漏电保护</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card info" style="cursor: pointer;" onclick="showScheduledTasksModal()">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #1890ff">⏰</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>定时任务</h3>
                                                    <div class="status-value" style="color: #1890ff" id="taskCount">3个</div>
                                                    <div class="status-subtitle">自动开关机任务</div>
                                                </div>
                                                <div style="position: absolute; top: 8px; right: 8px;">
                                                    <button class="btn btn-primary" style="padding: 4px 8px; font-size: 12px;" onclick="event.stopPropagation(); showAddTaskModal()">管理</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">🤖</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>智能控制</h3>
                                                    <div class="status-value" style="color: #52c41a">启用</div>
                                                    <div class="status-subtitle">基于温度的自动控制</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- 设备连接配置 -->
                                <div class="function-card">
                                    <div class="card-header">
                                        <h3>🔗 设备连接配置</h3>
                                        <button class="btn btn-primary">保存配置</button>
                                    </div>
                                    <div class="card-body">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>断路器</th>
                                                    <th>IP地址</th>
                                                    <th>端口</th>
                                                    <th>设备地址</th>
                                                    <th>通信协议</th>
                                                    <th>连接状态</th>
                                                    <th>操作</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>断路器#1</td>
                                                    <td>192.168.110.50</td>
                                                    <td>503</td>
                                                    <td>1</td>
                                                    <td>Modbus-TCP</td>
                                                    <td><span class="status status-online">已连接</span></td>
                                                    <td>
                                                        <button class="btn" onclick="showModal('deviceConfigModal')">编辑</button>
                                                        <button class="btn" onclick="showModal('deviceTestModal')">测试</button>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>断路器#2</td>
                                                    <td>192.168.110.50</td>
                                                    <td>505</td>
                                                    <td>2</td>
                                                    <td>Modbus-TCP</td>
                                                    <td><span class="status status-online">已连接</span></td>
                                                    <td>
                                                        <button class="btn" onclick="showModal('deviceConfigModal')">编辑</button>
                                                        <button class="btn" onclick="showModal('deviceTestModal')">测试</button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- 保护参数设置 -->
                                <div class="function-card">
                                    <div class="card-header">
                                        <h3>🛡️ 保护参数设置</h3>
                                        <button class="btn btn-primary">应用设置</button>
                                    </div>
                                    <div class="card-body">
                                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 20px;">
                                            <div class="form-group">
                                                <label class="form-label">过压保护 (V)</label>
                                                <input type="number" class="form-input" value="275" placeholder="过压阈值">
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">欠压保护 (V)</label>
                                                <input type="number" class="form-input" value="160" placeholder="欠压阈值">
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">过流保护 (A)</label>
                                                <input type="number" class="form-input" value="63" placeholder="过流阈值">
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">漏电保护 (mA)</label>
                                                <input type="number" class="form-input" value="30" placeholder="漏电阈值">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- 安全保护机制 -->
                                <div class="function-card">
                                    <div class="card-header">
                                        <h3>🔒 安全保护机制</h3>
                                        <button class="btn btn-primary">保存设置</button>
                                    </div>
                                    <div class="card-body">
                                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                                            <div class="form-group">
                                                <label class="form-label">断电前自动关机</label>
                                                <select class="form-input">
                                                    <option>禁用</option>
                                                    <option selected>启用</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">延迟断电时间 (秒)</label>
                                                <input type="number" class="form-input" value="60" placeholder="延迟时间">
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">温度保护阈值 (°C)</label>
                                                <input type="number" class="form-input" value="70" placeholder="温度阈值">
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">紧急断电确认</label>
                                                <select class="form-input">
                                                    <option>无需确认</option>
                                                    <option selected>需要确认</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 🤖 AI智能控制模块页面 -->
                        <div id="ai-control" class="page-content">
                            <div class="page-layout">
                                <!-- 页面标题区域 -->
                                <div class="page-header">
                                    <h1>🤖 AI智能控制模块</h1>
                                    <p>智能策略配置、自动控制执行、控制历史记录、系统健康评估</p>
                                </div>

                                <!-- 统计卡片区域 -->
                                <div class="stats-section">
                                    <div class="status-cards">
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">🤖</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>智能策略</h3>
                                                    <div class="status-value" style="color: #52c41a">启用</div>
                                                    <div class="status-subtitle">温度控制 + 节能优化策略</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card info">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #1890ff">📊</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>自动控制</h3>
                                                    <div class="status-value" style="color: #1890ff">运行中</div>
                                                    <div class="status-subtitle">今日执行12次 | 成功率100%</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">📈</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>控制历史</h3>
                                                    <div class="status-value" style="color: #52c41a">完整</div>
                                                    <div class="status-subtitle">记录保存30天 | 可追溯</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">❤️</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>系统健康度</h3>
                                                    <div class="status-value" style="color: #52c41a">95分</div>
                                                    <div class="status-subtitle">多维度数据综合评估</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- 智能策略配置 -->
                                <div class="function-card">
                                    <div class="card-header">
                                        <h3>🧠 智能策略配置</h3>
                                        <button class="btn btn-primary" onclick="showAddStrategyModal()">新增策略</button>
                                    </div>
                                    <div class="card-body">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>策略名称</th>
                                                    <th>策略类型</th>
                                                    <th>触发条件</th>
                                                    <th>执行动作</th>
                                                    <th>状态</th>
                                                    <th>最后执行</th>
                                                    <th>操作</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>温度保护策略</td>
                                                    <td>温度控制</td>
                                                    <td>出风口温度 > 60°C</td>
                                                    <td>自动关机 + 延迟断电</td>
                                                    <td><span class="status status-online">启用</span></td>
                                                    <td>从未触发</td>
                                                    <td>
                                                        <button class="btn" onclick="showModal('aiStrategyEditModal')">编辑</button>
                                                        <button class="btn" onclick="showNotification('策略测试已启动', 'info')">测试</button>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>节能优化策略</td>
                                                    <td>节能优化</td>
                                                    <td>非工作时间 + CPU < 20%</td>
                                                    <td>关闭备用服务器</td>
                                                    <td><span class="status status-online">启用</span></td>
                                                    <td>2025-09-15 00:00:00</td>
                                                    <td>
                                                        <button class="btn" onclick="showModal('aiStrategyEditModal')">编辑</button>
                                                        <button class="btn" onclick="showNotification('策略测试已启动', 'info')">测试</button>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>定时开关机策略</td>
                                                    <td>定时控制</td>
                                                    <td>工作日 8:00 / 18:00</td>
                                                    <td>自动开机 / 关机</td>
                                                    <td><span class="status status-online">启用</span></td>
                                                    <td>2025-09-15 08:00:00</td>
                                                    <td>
                                                        <button class="btn" onclick="showModal('aiStrategyEditModal')">编辑</button>
                                                        <button class="btn" onclick="showNotification('策略测试已启动', 'info')">测试</button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- 控制历史记录 -->
                                <div class="function-card">
                                    <div class="card-header">
                                        <h3>📝 控制历史记录</h3>
                                        <button class="btn" onclick="showModal('exportDataModal')">导出记录</button>
                                    </div>
                                    <div class="card-body">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>时间</th>
                                                    <th>策略名称</th>
                                                    <th>触发条件</th>
                                                    <th>执行动作</th>
                                                    <th>执行结果</th>
                                                    <th>影响设备</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>2025-09-15 08:00:00</td>
                                                    <td>定时开关机策略</td>
                                                    <td>工作日 8:00</td>
                                                    <td>自动开机</td>
                                                    <td><span class="status status-online">成功</span></td>
                                                    <td>主服务器 + 备用服务器</td>
                                                </tr>
                                                <tr>
                                                    <td>2025-09-15 00:00:00</td>
                                                    <td>节能优化策略</td>
                                                    <td>非工作时间 + 低负载</td>
                                                    <td>关闭备用服务器</td>
                                                    <td><span class="status status-online">成功</span></td>
                                                    <td>备用服务器</td>
                                                </tr>
                                                <tr>
                                                    <td>2025-09-14 18:00:00</td>
                                                    <td>定时开关机策略</td>
                                                    <td>工作日 18:00</td>
                                                    <td>自动关机</td>
                                                    <td><span class="status status-online">成功</span></td>
                                                    <td>备用服务器</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 🔔 智能告警模块页面 -->
                        <div id="alarms" class="page-content">
                            <div class="page-layout">
                                <!-- 页面标题区域 -->
                                <div class="page-header">
                                    <h1>🔔 智能告警模块</h1>
                                    <p>告警规则配置、告警等级管理、告警通知方式、告警历史管理、告警处理流程</p>
                                </div>

                                <!-- 统计卡片区域 -->
                                <div class="stats-section">
                                    <div class="status-cards">
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">🔔</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>活跃告警</h3>
                                                    <div class="status-value" style="color: #52c41a">0</div>
                                                    <div class="status-subtitle">当前无告警 | 系统正常</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card info">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #1890ff">📋</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>告警规则</h3>
                                                    <div class="status-value" style="color: #1890ff">12条</div>
                                                    <div class="status-subtitle">温度/电气/设备异常规则</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">📧</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>通知方式</h3>
                                                    <div class="status-value" style="color: #52c41a">已配置</div>
                                                    <div class="status-subtitle">界面提示 + 邮件通知</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card info">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #1890ff">📊</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>历史统计</h3>
                                                    <div class="status-value" style="color: #1890ff">本月3次</div>
                                                    <div class="status-subtitle">处理率100% | 平均5分钟</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- 告警规则配置 -->
                                <div class="function-card">
                                    <div class="card-header">
                                        <h3>⚙️ 告警规则配置</h3>
                                        <button class="btn btn-primary" onclick="showAddAlarmRuleModal()">新增规则</button>
                                    </div>
                                    <div class="card-body">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>规则名称</th>
                                                    <th>告警类型</th>
                                                    <th>触发条件</th>
                                                    <th>告警等级</th>
                                                    <th>通知方式</th>
                                                    <th>状态</th>
                                                    <th>操作</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>温度异常告警</td>
                                                    <td>温度异常</td>
                                                    <td>任意探头 > 50°C</td>
                                                    <td><span class="status status-warning">警告</span></td>
                                                    <td>界面提示 + 邮件</td>
                                                    <td><span class="status status-online">启用</span></td>
                                                    <td>
                                                        <button class="btn" onclick="showModal('alarmRuleEditModal')">编辑</button>
                                                        <button class="btn" onclick="showNotification('告警规则测试已启动', 'info')">测试</button>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>电压异常告警</td>
                                                    <td>电气异常</td>
                                                    <td>电压 < 200V 或 > 250V</td>
                                                    <td><span class="status status-error">严重</span></td>
                                                    <td>界面提示 + 邮件 + 短信</td>
                                                    <td><span class="status status-online">启用</span></td>
                                                    <td>
                                                        <button class="btn" onclick="showModal('alarmRuleEditModal')">编辑</button>
                                                        <button class="btn" onclick="showNotification('告警规则测试已启动', 'info')">测试</button>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>设备离线告警</td>
                                                    <td>设备异常</td>
                                                    <td>设备通信中断 > 30秒</td>
                                                    <td><span class="status status-warning">警告</span></td>
                                                    <td>界面提示</td>
                                                    <td><span class="status status-online">启用</span></td>
                                                    <td>
                                                        <button class="btn" onclick="showModal('alarmRuleEditModal')">编辑</button>
                                                        <button class="btn" onclick="showNotification('告警规则测试已启动', 'info')">测试</button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- 告警历史管理 -->
                                <div class="function-card">
                                    <div class="card-header">
                                        <h3>📊 告警历史管理</h3>
                                        <button class="btn" onclick="showModal('exportDataModal')">导出报告</button>
                                    </div>
                                    <div class="card-body">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>时间</th>
                                                    <th>告警类型</th>
                                                    <th>告警内容</th>
                                                    <th>告警等级</th>
                                                    <th>处理状态</th>
                                                    <th>处理时间</th>
                                                    <th>操作</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>2025-09-14 15:30:00</td>
                                                    <td>温度异常</td>
                                                    <td>探头3温度达到52°C</td>
                                                    <td><span class="status status-warning">警告</span></td>
                                                    <td><span class="status status-online">已处理</span></td>
                                                    <td>5分钟</td>
                                                    <td><button class="btn" onclick="showModal('alarmDetailModal')">查看详情</button></td>
                                                </tr>
                                                <tr>
                                                    <td>2025-09-13 09:15:00</td>
                                                    <td>设备异常</td>
                                                    <td>断路器#2通信中断</td>
                                                    <td><span class="status status-warning">警告</span></td>
                                                    <td><span class="status status-online">已处理</span></td>
                                                    <td>2分钟</td>
                                                    <td><button class="btn" onclick="showModal('alarmDetailModal')">查看详情</button></td>
                                                </tr>
                                                <tr>
                                                    <td>2025-09-12 14:20:00</td>
                                                    <td>电气异常</td>
                                                    <td>电压波动超出正常范围</td>
                                                    <td><span class="status status-error">严重</span></td>
                                                    <td><span class="status status-online">已处理</span></td>
                                                    <td>8分钟</td>
                                                    <td><button class="btn" onclick="showModal('alarmDetailModal')">查看详情</button></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 🔒 安全控制模块页面 -->
                        <div id="security" class="page-content">
                            <div class="page-layout">
                                <!-- 页面标题区域 -->
                                <div class="page-header">
                                    <h1>🔒 安全控制模块</h1>
                                    <p>用户权限管理、操作确认机制、操作审计日志、紧急控制功能、会话管理</p>
                                </div>

                                <!-- 统计卡片区域 -->
                                <div class="stats-section">
                                    <div class="status-cards">
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">👥</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>用户权限</h3>
                                                    <div class="status-value" style="color: #52c41a">已配置</div>
                                                    <div class="status-subtitle">3个角色 | 权限分级管理</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">🔐</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>操作确认</h3>
                                                    <div class="status-value" style="color: #52c41a">启用</div>
                                                    <div class="status-subtitle">危险操作二次确认</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card info">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #1890ff">📝</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>审计日志</h3>
                                                    <div class="status-value" style="color: #1890ff">完整</div>
                                                    <div class="status-subtitle">所有操作可追溯</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="status-card success">
                                            <div class="status-item">
                                                <div class="status-icon">
                                                    <span style="color: #52c41a">🚨</span>
                                                </div>
                                                <div class="status-info">
                                                    <h3>紧急控制</h3>
                                                    <div class="status-value" style="color: #52c41a">就绪</div>
                                                    <div class="status-subtitle">一键紧急断电功能</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- 用户权限管理 -->
                                <div class="function-card">
                                    <div class="card-header">
                                        <h3>👥 用户权限管理</h3>
                                        <button class="btn btn-primary">添加用户</button>
                                    </div>
                                    <div class="card-body">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>用户名</th>
                                                    <th>角色</th>
                                                    <th>权限范围</th>
                                                    <th>最后登录</th>
                                                    <th>状态</th>
                                                    <th>操作</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>admin</td>
                                                    <td>系统管理员</td>
                                                    <td>全部权限</td>
                                                    <td>2025-09-15 12:00:00</td>
                                                    <td><span class="status status-online">在线</span></td>
                                                    <td>
                                                        <button class="btn" onclick="showModal('userEditModal')">编辑</button>
                                                        <button class="btn btn-danger" onclick="showNotification('用户已禁用', 'warning')">禁用</button>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>operator</td>
                                                    <td>运维工程师</td>
                                                    <td>监控 + 基础控制</td>
                                                    <td>2025-09-15 09:30:00</td>
                                                    <td><span class="status status-offline">离线</span></td>
                                                    <td>
                                                        <button class="btn" onclick="showModal('userEditModal')">编辑</button>
                                                        <button class="btn btn-danger" onclick="showNotification('用户已禁用', 'warning')">禁用</button>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>viewer</td>
                                                    <td>只读用户</td>
                                                    <td>仅查看权限</td>
                                                    <td>2025-09-14 16:20:00</td>
                                                    <td><span class="status status-offline">离线</span></td>
                                                    <td>
                                                        <button class="btn" onclick="showModal('userEditModal')">编辑</button>
                                                        <button class="btn btn-danger" onclick="showNotification('用户已禁用', 'warning')">禁用</button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- 紧急控制功能 -->
                                <div class="function-card">
                                    <div class="card-header">
                                        <h3>🚨 紧急控制功能</h3>
                                        <div style="color: #ff4d4f; font-size: 12px;">⚠️ 仅在紧急情况下使用</div>
                                    </div>
                                    <div class="card-body">
                                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                                            <div style="text-align: center; padding: 20px; border: 2px solid #ff4d4f; border-radius: 8px;">
                                                <div style="font-size: 48px; color: #ff4d4f; margin-bottom: 16px;">🚨</div>
                                                <h3 style="color: #ff4d4f; margin-bottom: 16px;">紧急断电</h3>
                                                <p style="color: #8c8c8c; margin-bottom: 20px;">立即切断所有服务器电源</p>
                                                <button class="btn btn-danger" onclick="showModal('emergencyPowerOffModal')">紧急断电</button>
                                            </div>
                                            <div style="text-align: center; padding: 20px; border: 2px solid #faad14; border-radius: 8px;">
                                                <div style="font-size: 48px; color: #faad14; margin-bottom: 16px;">🔒</div>
                                                <h3 style="color: #faad14; margin-bottom: 16px;">系统锁定</h3>
                                                <p style="color: #8c8c8c; margin-bottom: 20px;">锁定所有控制操作</p>
                                                <button class="btn btn-warning" onclick="showModal('systemLockModal')">系统锁定</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- 操作审计日志 -->
                                <div class="function-card">
                                    <div class="card-header">
                                        <h3>📝 操作审计日志</h3>
                                        <button class="btn" onclick="showModal('exportDataModal')">导出日志</button>
                                    </div>
                                    <div class="card-body">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>时间</th>
                                                    <th>用户</th>
                                                    <th>操作类型</th>
                                                    <th>操作内容</th>
                                                    <th>操作结果</th>
                                                    <th>IP地址</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>2025-09-15 12:00:00</td>
                                                    <td>admin</td>
                                                    <td>系统配置</td>
                                                    <td>修改温度告警阈值</td>
                                                    <td><span class="status status-online">成功</span></td>
                                                    <td>192.168.110.100</td>
                                                </tr>
                                                <tr>
                                                    <td>2025-09-15 11:30:00</td>
                                                    <td>operator</td>
                                                    <td>设备控制</td>
                                                    <td>重启备用服务器</td>
                                                    <td><span class="status status-online">成功</span></td>
                                                    <td>192.168.110.101</td>
                                                </tr>
                                                <tr>
                                                    <td>2025-09-15 09:15:00</td>
                                                    <td>admin</td>
                                                    <td>用户管理</td>
                                                    <td>创建新用户账户</td>
                                                    <td><span class="status status-online">成功</span></td>
                                                    <td>192.168.110.100</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>


                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 模态框 -->
    <!-- 退出登录确认 -->
    <div id="logoutModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">确认退出</h3>
                <button class="modal-close" onclick="hideModal('logoutModal')">&times;</button>
            </div>
            <div class="modal-body">
                <p>确定要退出登录吗？</p>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="hideModal('logoutModal')">取消</button>
                <button class="btn btn-primary" onclick="logout()">确认退出</button>
            </div>
        </div>
    </div>

    <!-- 温度告警设置 -->
    <div id="temperatureAlarmModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">温度告警阈值设置</h3>
                <button class="modal-close" onclick="hideModal('temperatureAlarmModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">选择探头</label>
                    <select class="form-input">
                        <option>探头1 (室温)</option>
                        <option>探头2 (进风口)</option>
                        <option>探头3 (出风口)</option>
                        <option>探头4 (网络设备)</option>
                    </select>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                    <div class="form-group">
                        <label class="form-label">正常范围最低温度 (°C)</label>
                        <input type="number" class="form-input" value="18" placeholder="最低温度">
                    </div>
                    <div class="form-group">
                        <label class="form-label">正常范围最高温度 (°C)</label>
                        <input type="number" class="form-input" value="25" placeholder="最高温度">
                    </div>
                    <div class="form-group">
                        <label class="form-label">警告阈值 (°C)</label>
                        <input type="number" class="form-input" value="30" placeholder="警告温度">
                    </div>
                    <div class="form-group">
                        <label class="form-label">危险阈值 (°C)</label>
                        <input type="number" class="form-input" value="35" placeholder="危险温度">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="hideModal('temperatureAlarmModal')">取消</button>
                <button class="btn btn-primary" onclick="saveTemperatureAlarm()">保存设置</button>
            </div>
        </div>
    </div>

    <!-- 传感器校准 -->
    <div id="sensorCalibrationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">传感器校准</h3>
                <button class="modal-close" onclick="hideModal('sensorCalibrationModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">校准类型</label>
                    <select class="form-input">
                        <option>零点校准</option>
                        <option>满量程校准</option>
                        <option>两点校准</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">参考温度 (°C)</label>
                    <input type="number" class="form-input" placeholder="输入标准温度值">
                </div>
                <div class="form-group">
                    <label class="form-label">当前读数 (°C)</label>
                    <input type="number" class="form-input" value="23.5" readonly>
                </div>
                <div style="background: #f0f0f0; padding: 16px; border-radius: 4px; margin: 16px 0;">
                    <p style="margin: 0; color: #8c8c8c; font-size: 14px;">
                        ⚠️ 校准操作将影响温度读数的准确性，请确保参考温度值准确无误。
                    </p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="hideModal('sensorCalibrationModal')">取消</button>
                <button class="btn btn-primary" onclick="calibrateSensor()">开始校准</button>
            </div>
        </div>
    </div>

    <!-- 服务器控制 -->
    <div id="serverControlModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">服务器控制操作</h3>
                <button class="modal-close" onclick="hideModal('serverControlModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">选择服务器</label>
                    <select class="form-input">
                        <option>主服务器 (192.168.110.100)</option>
                        <option>备用服务器 (192.168.110.101)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">控制操作</label>
                    <select class="form-input" id="serverOperation">
                        <option>重启服务器</option>
                        <option>安全关机</option>
                        <option>强制关机</option>
                    </select>
                </div>
                <div style="background: #fff2f0; border: 1px solid #ffccc7; padding: 16px; border-radius: 4px; margin: 16px 0;">
                    <p style="margin: 0; color: #ff4d4f; font-size: 14px;">
                        ⚠️ <strong>危险操作警告</strong><br>
                        此操作将影响服务器运行状态，可能导致服务中断。请确认操作无误后继续。
                    </p>
                </div>
                <div class="form-group">
                    <label class="form-label">安全确认 (请输入 "CONFIRM")</label>
                    <input type="text" class="form-input" id="serverConfirmText" placeholder="输入 CONFIRM 确认操作">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="hideModal('serverControlModal')">取消</button>
                <button class="btn btn-danger" onclick="executeServerControl()">执行操作</button>
            </div>
        </div>
    </div>

    <!-- 断路器控制 -->
    <div id="breakerControlModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="breakerControlTitle">断路器控制操作</h3>
                <button class="modal-close" onclick="hideModal('breakerControlModal')">&times;</button>
            </div>
            <div class="modal-body">
                <!-- 断路器信息显示 -->
                <div class="form-group">
                    <label class="form-label">目标断路器</label>
                    <div style="background: #f5f5f5; padding: 12px; border-radius: 4px; border: 1px solid #d9d9d9;">
                        <div id="breakerInfo" style="font-weight: bold; color: #1890ff;">断路器#1 (端口503)</div>
                        <div id="serverInfo" style="color: #666; font-size: 14px; margin-top: 4px;">绑定服务器: 主服务器</div>
                    </div>
                </div>

                <!-- 操作流程步骤 -->
                <div class="form-group">
                    <label class="form-label">操作流程</label>
                    <div id="operationSteps" style="background: #f9f9f9; padding: 16px; border-radius: 4px; border: 1px solid #e8e8e8;">
                        <div class="step-item" id="step1">
                            <span class="step-number">1</span>
                            <span class="step-text">远程关闭服务器</span>
                            <span class="step-status" id="step1Status">等待中</span>
                        </div>
                        <div class="step-item" id="step2">
                            <span class="step-number">2</span>
                            <span class="step-text">等待服务器完全关机</span>
                            <span class="step-status" id="step2Status">等待中</span>
                        </div>
                        <div class="step-item" id="step3">
                            <span class="step-number">3</span>
                            <span class="step-text">断开断路器电源</span>
                            <span class="step-status" id="step3Status">等待中</span>
                        </div>
                    </div>
                </div>

                <!-- 关机进度条 -->
                <div class="form-group" id="shutdownProgressGroup" style="display: none;">
                    <label class="form-label">服务器关机进度</label>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" id="shutdownProgress"></div>
                        </div>
                        <div class="progress-text" id="shutdownProgressText">准备关机...</div>
                    </div>
                </div>

                <!-- 危险警告 -->
                <div style="background: #fff2f0; border: 1px solid #ffccc7; padding: 16px; border-radius: 4px; margin: 16px 0;">
                    <p style="margin: 0; color: #ff4d4f; font-size: 14px;">
                        🚨 <strong>极度危险操作警告</strong><br>
                        断路器操作将直接影响服务器电源供应！请确保：<br>
                        1. 服务器已安全关机<br>
                        2. 数据已完成备份<br>
                        3. 已通知相关人员
                    </p>
                </div>

                <!-- 安全确认 -->
                <div class="form-group">
                    <label class="form-label">安全确认 (请输入 "POWER OFF")</label>
                    <input type="text" class="form-input" id="safetyConfirmInput" placeholder="输入 POWER OFF 确认断电操作">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="hideModal('breakerControlModal')">取消</button>
                <button class="btn btn-danger" id="executeBreakerBtn" onclick="startBreakerControlProcess()">开始操作</button>
            </div>
        </div>
    </div>

    <!-- 断路器绑定设置 -->
    <div id="bindingModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="bindingModalTitle">断路器绑定设置</h3>
                <button class="modal-close" onclick="hideModal('bindingModal')">&times;</button>
            </div>
            <div class="modal-body">
                <!-- 断路器信息 -->
                <div class="form-group">
                    <label class="form-label">断路器信息</label>
                    <div style="background: #f5f5f5; padding: 12px; border-radius: 4px; border: 1px solid #d9d9d9;">
                        <div id="bindingBreakerInfo" style="font-weight: bold; color: #1890ff;">断路器#1 (端口503)</div>
                        <div style="color: #666; font-size: 12px; margin-top: 4px;">电气参数监控、设备状态监控、手动控制操作</div>
                    </div>
                </div>

                <!-- 当前绑定状态 -->
                <div class="form-group">
                    <label class="form-label">当前绑定状态</label>
                    <div style="background: #f9f9f9; padding: 12px; border-radius: 4px; border: 1px solid #e8e8e8;">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="color: #52c41a;">●</span>
                            <span id="currentBindingStatus">已绑定: 主服务器</span>
                        </div>
                        <div id="bindingTime" style="color: #666; font-size: 12px; margin-top: 4px;">绑定时间: 2025-09-15 08:00:00</div>
                    </div>
                </div>

                <!-- 服务器选择 -->
                <div class="form-group">
                    <label class="form-label">选择绑定服务器</label>
                    <select class="form-input" id="serverSelect">
                        <option value="">-- 请选择服务器 --</option>
                        <option value="主服务器">主服务器 (192.168.110.101)</option>
                        <option value="备用服务器">备用服务器 (192.168.110.102)</option>
                        <option value="数据库服务器">数据库服务器 (192.168.110.103)</option>
                        <option value="Web服务器">Web服务器 (192.168.110.104)</option>
                        <option value="存储服务器">存储服务器 (192.168.110.105)</option>
                        <option value="监控服务器">监控服务器 (192.168.110.106)</option>
                    </select>
                </div>

                <!-- 绑定说明 -->
                <div style="background: #e6f7ff; border: 1px solid #91d5ff; padding: 12px; border-radius: 4px; margin: 16px 0;">
                    <div style="color: #1890ff; font-size: 14px; margin-bottom: 8px;">
                        <strong>📋 绑定说明</strong>
                    </div>
                    <ul style="margin: 0; padding-left: 16px; color: #666; font-size: 13px;">
                        <li>绑定后，断路器操作将自动关联到对应服务器</li>
                        <li>分闸操作会先远程关闭绑定的服务器</li>
                        <li>每个断路器只能绑定一台服务器</li>
                        <li>修改绑定会立即生效</li>
                    </ul>
                </div>

                <!-- 绑定历史 -->
                <div class="form-group">
                    <label class="form-label">绑定历史</label>
                    <div style="max-height: 120px; overflow-y: auto; border: 1px solid #e8e8e8; border-radius: 4px;">
                        <table style="width: 100%; font-size: 12px;">
                            <thead style="background: #fafafa;">
                                <tr>
                                    <th style="padding: 8px; text-align: left;">时间</th>
                                    <th style="padding: 8px; text-align: left;">操作</th>
                                    <th style="padding: 8px; text-align: left;">服务器</th>
                                </tr>
                            </thead>
                            <tbody id="bindingHistory">
                                <tr>
                                    <td style="padding: 6px 8px;">2025-09-15 08:00:00</td>
                                    <td style="padding: 6px 8px; color: #52c41a;">绑定</td>
                                    <td style="padding: 6px 8px;">主服务器</td>
                                </tr>
                                <tr>
                                    <td style="padding: 6px 8px;">2025-09-14 16:30:00</td>
                                    <td style="padding: 6px 8px; color: #faad14;">修改</td>
                                    <td style="padding: 6px 8px;">备用服务器 → 主服务器</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="hideModal('bindingModal')">取消</button>
                <button class="btn btn-warning" onclick="unbindServer()">解除绑定</button>
                <button class="btn btn-primary" onclick="saveBinding()">保存绑定</button>
            </div>
        </div>
    </div>

    <!-- 定时任务管理 -->
    <div id="scheduledTasksModal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h3 class="modal-title">定时任务管理</h3>
                <button class="modal-close" onclick="hideModal('scheduledTasksModal')">&times;</button>
            </div>
            <div class="modal-body">
                <!-- 任务统计 -->
                <div style="display: flex; gap: 16px; margin-bottom: 20px;">
                    <div style="flex: 1; background: #f0f9ff; padding: 16px; border-radius: 8px; border: 1px solid #bae7ff;">
                        <div style="color: #1890ff; font-size: 24px; font-weight: bold;" id="totalTasks">3</div>
                        <div style="color: #666; font-size: 14px;">总任务数</div>
                    </div>
                    <div style="flex: 1; background: #f6ffed; padding: 16px; border-radius: 8px; border: 1px solid #b7eb8f;">
                        <div style="color: #52c41a; font-size: 24px; font-weight: bold;" id="activeTasks">2</div>
                        <div style="color: #666; font-size: 14px;">启用任务</div>
                    </div>
                    <div style="flex: 1; background: #fff2f0; padding: 16px; border-radius: 8px; border: 1px solid #ffccc7;">
                        <div style="color: #ff4d4f; font-size: 24px; font-weight: bold;" id="inactiveTasks">1</div>
                        <div style="color: #666; font-size: 14px;">禁用任务</div>
                    </div>
                </div>

                <!-- 操作按钮 -->
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                    <h4 style="margin: 0;">定时任务列表</h4>
                    <button class="btn btn-primary" onclick="showAddTaskModal()">
                        <span style="margin-right: 4px;">+</span>添加任务
                    </button>
                </div>

                <!-- 任务列表 -->
                <div style="border: 1px solid #e8e8e8; border-radius: 4px;">
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead style="background: #fafafa;">
                            <tr>
                                <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e8e8e8;">任务名称</th>
                                <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e8e8e8;">执行时间</th>
                                <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e8e8e8;">操作类型</th>
                                <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e8e8e8;">目标设备</th>
                                <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e8e8e8;">状态</th>
                                <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e8e8e8;">操作</th>
                            </tr>
                        </thead>
                        <tbody id="taskListBody">
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">
                                    <div style="font-weight: bold;">夜间自动断电</div>
                                    <div style="color: #666; font-size: 12px;">每日23:00执行</div>
                                </td>
                                <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">23:00</td>
                                <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">
                                    <span style="background: #fff2f0; color: #ff4d4f; padding: 2px 8px; border-radius: 12px; font-size: 12px;">分闸</span>
                                </td>
                                <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">断路器#1</td>
                                <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">
                                    <label class="switch">
                                        <input type="checkbox" checked onchange="toggleTask(1, this.checked)">
                                        <span class="slider"></span>
                                    </label>
                                </td>
                                <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">
                                    <button class="btn" style="padding: 4px 8px; font-size: 12px; margin-right: 4px;" onclick="editTask(1)">编辑</button>
                                    <button class="btn btn-danger" style="padding: 4px 8px; font-size: 12px;" onclick="deleteTask(1)">删除</button>
                                </td>
                            </tr>
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">
                                    <div style="font-weight: bold;">早晨自动通电</div>
                                    <div style="color: #666; font-size: 12px;">每日07:00执行</div>
                                </td>
                                <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">07:00</td>
                                <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">
                                    <span style="background: #f6ffed; color: #52c41a; padding: 2px 8px; border-radius: 12px; font-size: 12px;">合闸</span>
                                </td>
                                <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">断路器#1</td>
                                <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">
                                    <label class="switch">
                                        <input type="checkbox" checked onchange="toggleTask(2, this.checked)">
                                        <span class="slider"></span>
                                    </label>
                                </td>
                                <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">
                                    <button class="btn" style="padding: 4px 8px; font-size: 12px; margin-right: 4px;" onclick="editTask(2)">编辑</button>
                                    <button class="btn btn-danger" style="padding: 4px 8px; font-size: 12px;" onclick="deleteTask(2)">删除</button>
                                </td>
                            </tr>
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">
                                    <div style="font-weight: bold;">周末维护断电</div>
                                    <div style="color: #666; font-size: 12px;">每周日02:00执行</div>
                                </td>
                                <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">周日 02:00</td>
                                <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">
                                    <span style="background: #fff2f0; color: #ff4d4f; padding: 2px 8px; border-radius: 12px; font-size: 12px;">分闸</span>
                                </td>
                                <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">断路器#2</td>
                                <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">
                                    <label class="switch">
                                        <input type="checkbox" onchange="toggleTask(3, this.checked)">
                                        <span class="slider"></span>
                                    </label>
                                </td>
                                <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">
                                    <button class="btn" style="padding: 4px 8px; font-size: 12px; margin-right: 4px;" onclick="editTask(3)">编辑</button>
                                    <button class="btn btn-danger" style="padding: 4px 8px; font-size: 12px;" onclick="deleteTask(3)">删除</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="hideModal('scheduledTasksModal')">关闭</button>
            </div>
        </div>
    </div>

    <!-- 添加/编辑定时任务 -->
    <div id="addTaskModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="taskModalTitle">添加定时任务</h3>
                <button class="modal-close" onclick="hideModal('addTaskModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">任务名称</label>
                    <input type="text" class="form-input" id="taskName" placeholder="请输入任务名称">
                </div>

                <div class="form-group">
                    <label class="form-label">执行时间</label>
                    <div style="display: flex; gap: 12px; align-items: center;">
                        <select class="form-input" id="taskType" style="flex: 1;" onchange="updateTimeOptions()">
                            <option value="daily">每日执行</option>
                            <option value="weekly">每周执行</option>
                            <option value="monthly">每月执行</option>
                        </select>
                        <div id="timeSelector" style="display: flex; gap: 8px; align-items: center;">
                            <input type="time" class="form-input" id="taskTime" style="width: 120px;">
                        </div>
                    </div>
                </div>

                <div class="form-group" id="weekDaySelector" style="display: none;">
                    <label class="form-label">星期</label>
                    <select class="form-input" id="weekDay">
                        <option value="1">星期一</option>
                        <option value="2">星期二</option>
                        <option value="3">星期三</option>
                        <option value="4">星期四</option>
                        <option value="5">星期五</option>
                        <option value="6">星期六</option>
                        <option value="0">星期日</option>
                    </select>
                </div>

                <div class="form-group" id="monthDaySelector" style="display: none;">
                    <label class="form-label">日期</label>
                    <select class="form-input" id="monthDay">
                        <!-- 1-31日选项 -->
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">操作类型</label>
                    <select class="form-input" id="taskAction">
                        <option value="close">分闸 (断电)</option>
                        <option value="open">合闸 (通电)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">目标断路器</label>
                    <select class="form-input" id="targetBreaker">
                        <option value="breaker1">断路器#1 (端口503)</option>
                        <option value="breaker2">断路器#2 (端口505)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">任务描述</label>
                    <textarea class="form-input" id="taskDescription" rows="3" placeholder="请输入任务描述（可选）"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="hideModal('addTaskModal')">取消</button>
                <button class="btn btn-primary" onclick="saveTask()">保存任务</button>
            </div>
        </div>
    </div>

    <!-- 新增AI智能策略 -->
    <div id="addStrategyModal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h3 class="modal-title" id="strategyModalTitle">新增AI智能策略</h3>
                <button class="modal-close" onclick="hideModal('addStrategyModal')">&times;</button>
            </div>
            <div class="modal-body">
                <!-- 基本信息 -->
                <div class="form-group">
                    <label class="form-label">策略名称</label>
                    <input type="text" class="form-input" id="strategyName" placeholder="请输入策略名称，如：高温保护策略">
                </div>

                <div class="form-group">
                    <label class="form-label">策略类型</label>
                    <select class="form-input" id="strategyType" onchange="updateStrategyOptions()">
                        <option value="temperature">温度控制</option>
                        <option value="humidity">湿度控制</option>
                        <option value="power">功耗控制</option>
                        <option value="time">时间控制</option>
                        <option value="energy">节能优化</option>
                        <option value="safety">安全保护</option>
                    </select>
                </div>

                <!-- 触发条件 -->
                <div class="form-group">
                    <label class="form-label">触发条件</label>
                    <div style="border: 1px solid #d9d9d9; border-radius: 4px; padding: 16px; background: #fafafa;">
                        <div id="conditionBuilder">
                            <div class="condition-row" style="display: flex; gap: 12px; align-items: center; margin-bottom: 12px;">
                                <select class="form-input" id="conditionParam" style="flex: 1;" onchange="updateConditionOptions()">
                                    <option value="temperature">温度</option>
                                    <option value="humidity">湿度</option>
                                    <option value="power">功耗</option>
                                    <option value="cpu">CPU使用率</option>
                                    <option value="time">时间</option>
                                </select>
                                <select class="form-input" id="conditionOperator" style="width: 100px;">
                                    <option value=">">&gt;</option>
                                    <option value="<">&lt;</option>
                                    <option value=">=">&gt;=</option>
                                    <option value="<=">&lt;=</option>
                                    <option value="==">=</option>
                                </select>
                                <input type="text" class="form-input" id="conditionValue" placeholder="阈值" style="width: 120px;">
                                <span id="conditionUnit" style="color: #666; min-width: 30px;">°C</span>
                            </div>
                            <div style="font-size: 12px; color: #666;">
                                示例：出风口温度 > 60°C 或 CPU使用率 < 20%
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 执行动作 -->
                <div class="form-group">
                    <label class="form-label">执行动作</label>
                    <div style="border: 1px solid #d9d9d9; border-radius: 4px; padding: 16px; background: #fafafa;">
                        <div class="action-builder">
                            <div style="margin-bottom: 12px;">
                                <label style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <input type="checkbox" id="actionShutdown" style="margin-right: 8px;">
                                    <span>远程关机服务器</span>
                                </label>
                                <div id="shutdownOptions" style="margin-left: 24px; display: none;">
                                    <select class="form-input" style="width: 200px;">
                                        <option value="all">所有服务器</option>
                                        <option value="main">仅主服务器</option>
                                        <option value="backup">仅备用服务器</option>
                                    </select>
                                </div>
                            </div>

                            <div style="margin-bottom: 12px;">
                                <label style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <input type="checkbox" id="actionBreaker" style="margin-right: 8px;">
                                    <span>断路器操作</span>
                                </label>
                                <div id="breakerOptions" style="margin-left: 24px; display: none;">
                                    <div style="display: flex; gap: 12px; align-items: center;">
                                        <select class="form-input" id="breakerTarget" style="width: 150px;">
                                            <option value="breaker1">断路器#1</option>
                                            <option value="breaker2">断路器#2</option>
                                            <option value="all">所有断路器</option>
                                        </select>
                                        <select class="form-input" id="breakerAction" style="width: 100px;">
                                            <option value="open">合闸</option>
                                            <option value="close">分闸</option>
                                        </select>
                                        <span style="color: #666;">延迟</span>
                                        <input type="number" class="form-input" id="breakerDelay" value="30" style="width: 80px;">
                                        <span style="color: #666;">秒</span>
                                    </div>
                                </div>
                            </div>

                            <div style="margin-bottom: 12px;">
                                <label style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <input type="checkbox" id="actionNotify" style="margin-right: 8px;">
                                    <span>发送通知</span>
                                </label>
                                <div id="notifyOptions" style="margin-left: 24px; display: none;">
                                    <div style="display: flex; gap: 8px;">
                                        <label><input type="checkbox" checked> 系统通知</label>
                                        <label><input type="checkbox"> 邮件通知</label>
                                        <label><input type="checkbox"> 短信通知</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 策略描述 -->
                <div class="form-group">
                    <label class="form-label">策略描述</label>
                    <textarea class="form-input" id="strategyDescription" rows="3" placeholder="请描述该策略的作用和注意事项"></textarea>
                </div>

                <!-- 高级设置 -->
                <div class="form-group">
                    <label class="form-label">高级设置</label>
                    <div style="display: flex; gap: 16px; align-items: center;">
                        <label style="display: flex; align-items: center;">
                            <input type="checkbox" id="strategyEnabled" checked style="margin-right: 8px;">
                            <span>创建后立即启用</span>
                        </label>
                        <label style="display: flex; align-items: center;">
                            <input type="checkbox" id="strategyLogging" checked style="margin-right: 8px;">
                            <span>记录执行日志</span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="hideModal('addStrategyModal')">取消</button>
                <button class="btn btn-primary" onclick="saveStrategy()">保存策略</button>
            </div>
        </div>
    </div>

    <!-- 新增告警规则 -->
    <div id="addAlarmRuleModal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h3 class="modal-title" id="alarmRuleModalTitle">新增告警规则</h3>
                <button class="modal-close" onclick="hideModal('addAlarmRuleModal')">&times;</button>
            </div>
            <div class="modal-body">
                <!-- 基本信息 -->
                <div class="form-group">
                    <label class="form-label">规则名称</label>
                    <input type="text" class="form-input" id="alarmRuleName" placeholder="请输入告警规则名称，如：高温告警规则">
                </div>

                <div class="form-group">
                    <label class="form-label">告警类型</label>
                    <select class="form-input" id="alarmType" onchange="updateAlarmConditions()">
                        <option value="temperature">温度异常</option>
                        <option value="humidity">湿度异常</option>
                        <option value="power">功耗异常</option>
                        <option value="voltage">电压异常</option>
                        <option value="current">电流异常</option>
                        <option value="device">设备异常</option>
                        <option value="network">网络异常</option>
                        <option value="system">系统异常</option>
                    </select>
                </div>

                <!-- 触发条件 -->
                <div class="form-group">
                    <label class="form-label">触发条件</label>
                    <div style="border: 1px solid #d9d9d9; border-radius: 4px; padding: 16px; background: #fafafa;">
                        <div class="condition-builder">
                            <div style="display: flex; gap: 12px; align-items: center; margin-bottom: 12px;">
                                <select class="form-input" id="alarmConditionParam" style="flex: 1;" onchange="updateAlarmUnits()">
                                    <option value="temperature">出风口温度</option>
                                    <option value="ambient_temp">环境温度</option>
                                    <option value="cpu_temp">CPU温度</option>
                                </select>
                                <select class="form-input" id="alarmConditionOperator" style="width: 100px;">
                                    <option value=">">&gt;</option>
                                    <option value="<">&lt;</option>
                                    <option value=">=">&gt;=</option>
                                    <option value="<=">&lt;=</option>
                                    <option value="==">=</option>
                                    <option value="!=">&ne;</option>
                                </select>
                                <input type="text" class="form-input" id="alarmConditionValue" placeholder="阈值" style="width: 120px;">
                                <span id="alarmConditionUnit" style="color: #666; min-width: 30px;">°C</span>
                            </div>

                            <!-- 持续时间 -->
                            <div style="display: flex; gap: 12px; align-items: center; margin-bottom: 12px;">
                                <span style="color: #666;">持续时间：</span>
                                <input type="number" class="form-input" id="alarmDuration" value="5" style="width: 80px;">
                                <span style="color: #666;">分钟</span>
                                <span style="color: #999; font-size: 12px; margin-left: 12px;">（避免瞬时波动触发误报）</span>
                            </div>

                            <div style="font-size: 12px; color: #666;">
                                示例：出风口温度 > 50°C 且持续5分钟
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 告警等级 -->
                <div class="form-group">
                    <label class="form-label">告警等级</label>
                    <div style="display: flex; gap: 16px;">
                        <label style="display: flex; align-items: center;">
                            <input type="radio" name="alarmLevel" value="info" style="margin-right: 8px;">
                            <span style="color: #1890ff;">🔵 信息</span>
                        </label>
                        <label style="display: flex; align-items: center;">
                            <input type="radio" name="alarmLevel" value="warning" checked style="margin-right: 8px;">
                            <span style="color: #faad14;">🟡 警告</span>
                        </label>
                        <label style="display: flex; align-items: center;">
                            <input type="radio" name="alarmLevel" value="error" style="margin-right: 8px;">
                            <span style="color: #ff4d4f;">🔴 严重</span>
                        </label>
                        <label style="display: flex; align-items: center;">
                            <input type="radio" name="alarmLevel" value="critical" style="margin-right: 8px;">
                            <span style="color: #722ed1;">🟣 紧急</span>
                        </label>
                    </div>
                </div>

                <!-- 通知方式 -->
                <div class="form-group">
                    <label class="form-label">通知方式</label>
                    <div style="border: 1px solid #d9d9d9; border-radius: 4px; padding: 16px; background: #fafafa;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                            <label style="display: flex; align-items: center;">
                                <input type="checkbox" id="notifySystem" checked style="margin-right: 8px;">
                                <span>🖥️ 系统界面通知</span>
                            </label>
                            <label style="display: flex; align-items: center;">
                                <input type="checkbox" id="notifyEmail" style="margin-right: 8px;">
                                <span>📧 邮件通知</span>
                            </label>
                            <label style="display: flex; align-items: center;">
                                <input type="checkbox" id="notifyDingTalk" style="margin-right: 8px;">
                                <span>💬 钉钉通知</span>
                            </label>
                        </div>

                        <!-- 钉钉配置 -->
                        <div id="dingTalkConfig" style="margin-top: 16px; padding: 12px; background: #e6f7ff; border-radius: 4px; display: none;">
                            <h4 style="margin: 0 0 12px 0; color: #1890ff;">钉钉通知配置</h4>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                                <div>
                                    <label class="form-label" style="font-size: 12px;">Webhook地址</label>
                                    <input type="text" class="form-input" id="dingTalkWebhook" placeholder="https://oapi.dingtalk.com/robot/send?access_token=..." style="font-size: 12px;">
                                </div>
                                <div>
                                    <label class="form-label" style="font-size: 12px;">安全密钥（可选）</label>
                                    <input type="text" class="form-input" id="dingTalkSecret" placeholder="SEC..." style="font-size: 12px;">
                                </div>
                            </div>
                            <div style="margin-top: 8px;">
                                <label class="form-label" style="font-size: 12px;">@提醒人员（手机号，多个用逗号分隔）</label>
                                <input type="text" class="form-input" id="dingTalkAtMobiles" placeholder="13800138000,13900139000" style="font-size: 12px;">
                            </div>
                            <div style="margin-top: 8px; font-size: 11px; color: #666;">
                                💡 提示：在钉钉群中添加自定义机器人，复制Webhook地址到上方输入框
                            </div>
                        </div>

                        <!-- 邮件配置 -->
                        <div id="emailConfig" style="margin-top: 16px; padding: 12px; background: #f6ffed; border-radius: 4px; display: none;">
                            <h4 style="margin: 0 0 12px 0; color: #52c41a;">邮件通知配置</h4>
                            <div>
                                <label class="form-label" style="font-size: 12px;">收件人邮箱（多个用逗号分隔）</label>
                                <input type="text" class="form-input" id="emailRecipients" placeholder="admin@company.com,ops@company.com" style="font-size: 12px;">
                            </div>
                        </div>


                    </div>
                </div>

                <!-- 规则描述 -->
                <div class="form-group">
                    <label class="form-label">规则描述</label>
                    <textarea class="form-input" id="alarmRuleDescription" rows="3" placeholder="请描述该告警规则的作用和注意事项"></textarea>
                </div>

                <!-- 高级设置 -->
                <div class="form-group">
                    <label class="form-label">高级设置</label>
                    <div style="display: flex; gap: 16px; align-items: center; flex-wrap: wrap;">
                        <label style="display: flex; align-items: center;">
                            <input type="checkbox" id="alarmRuleEnabled" checked style="margin-right: 8px;">
                            <span>创建后立即启用</span>
                        </label>
                        <label style="display: flex; align-items: center;">
                            <input type="checkbox" id="alarmRuleLogging" checked style="margin-right: 8px;">
                            <span>记录告警日志</span>
                        </label>
                        <label style="display: flex; align-items: center;">
                            <input type="checkbox" id="alarmRuleAutoRecover" style="margin-right: 8px;">
                            <span>条件恢复时自动解除告警</span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="hideModal('addAlarmRuleModal')">取消</button>
                <button class="btn btn-primary" onclick="saveAlarmRule()">保存规则</button>
            </div>
        </div>
    </div>

    <!-- 紧急断电确认 -->
    <div id="emergencyPowerOffModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" style="color: #ff4d4f;">🚨 紧急断电确认</h3>
                <button class="modal-close" onclick="hideModal('emergencyPowerOffModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div style="background: #fff2f0; border: 1px solid #ffccc7; padding: 20px; border-radius: 4px; margin-bottom: 20px;">
                    <div style="text-align: center; color: #ff4d4f;">
                        <div style="font-size: 48px; margin-bottom: 16px;">⚠️</div>
                        <h3 style="margin-bottom: 16px;">极度危险操作警告</h3>
                        <p style="margin: 0; font-size: 16px; line-height: 1.5;">
                            此操作将立即切断所有服务器电源！<br>
                            可能导致数据丢失和系统损坏！<br>
                            仅在紧急情况下使用！
                        </p>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">紧急情况描述</label>
                    <textarea class="form-input" rows="3" placeholder="请描述紧急情况..."></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">最终确认 (请输入 "EMERGENCY POWER OFF")</label>
                    <input type="text" class="form-input" placeholder="输入完整确认文本">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="hideModal('emergencyPowerOffModal')">取消</button>
                <button class="btn btn-danger" onclick="executeEmergencyPowerOff()">🚨 紧急断电</button>
            </div>
        </div>
    </div>

    <!-- 系统锁定确认 -->
    <div id="systemLockModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" style="color: #faad14;">🔒 系统锁定确认</h3>
                <button class="modal-close" onclick="hideModal('systemLockModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div style="background: #fffbe6; border: 1px solid #ffe58f; padding: 20px; border-radius: 4px; margin-bottom: 20px;">
                    <div style="text-align: center; color: #faad14;">
                        <div style="font-size: 48px; margin-bottom: 16px;">🔒</div>
                        <h3 style="margin-bottom: 16px;">系统锁定警告</h3>
                        <p style="margin: 0; font-size: 16px; line-height: 1.5;">
                            此操作将锁定所有控制功能！<br>
                            只有管理员可以解锁系统！<br>
                            请确认需要锁定系统！
                        </p>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">锁定原因</label>
                    <select class="form-input">
                        <option>系统维护</option>
                        <option>安全检查</option>
                        <option>紧急情况</option>
                        <option>其他原因</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">预计锁定时间 (分钟)</label>
                    <input type="number" class="form-input" value="30" placeholder="锁定时间">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="hideModal('systemLockModal')">取消</button>
                <button class="btn btn-warning" onclick="executeSystemLock()">🔒 锁定系统</button>
            </div>
        </div>
    </div>

    <!-- 数据导出弹窗 -->
    <div id="exportDataModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">📊 数据导出</h3>
                <button class="modal-close" onclick="hideModal('exportDataModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">导出格式</label>
                    <select class="form-input">
                        <option>Excel (.xlsx)</option>
                        <option>CSV (.csv)</option>
                        <option>PDF (.pdf)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">时间范围</label>
                    <select class="form-input">
                        <option>最近1小时</option>
                        <option>最近24小时</option>
                        <option>最近7天</option>
                        <option>最近30天</option>
                        <option>自定义范围</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">包含数据</label>
                    <div style="display: flex; flex-direction: column; gap: 8px;">
                        <label><input type="checkbox" checked> 温度数据</label>
                        <label><input type="checkbox" checked> 电气参数</label>
                        <label><input type="checkbox"> 告警记录</label>
                        <label><input type="checkbox"> 操作日志</label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="hideModal('exportDataModal')">取消</button>
                <button class="btn btn-primary" onclick="exportData()">开始导出</button>
            </div>
        </div>
    </div>

    <!-- 设备配置弹窗 -->
    <div id="deviceConfigModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">⚙️ 设备配置</h3>
                <button class="modal-close" onclick="hideModal('deviceConfigModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">设备名称</label>
                    <input type="text" class="form-input" placeholder="输入设备名称">
                </div>
                <div class="form-group">
                    <label class="form-label">IP地址</label>
                    <input type="text" class="form-input" placeholder="192.168.110.50">
                </div>
                <div class="form-group">
                    <label class="form-label">端口</label>
                    <input type="number" class="form-input" placeholder="502">
                </div>
                <div class="form-group">
                    <label class="form-label">通信协议</label>
                    <select class="form-input">
                        <option>Modbus-TCP</option>
                        <option>Modbus-RTU</option>
                        <option>HTTP</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="hideModal('deviceConfigModal')">取消</button>
                <button class="btn btn-primary" onclick="saveDeviceConfig()">保存配置</button>
            </div>
        </div>
    </div>

    <!-- 设备测试弹窗 -->
    <div id="deviceTestModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">🔧 设备连接测试</h3>
                <button class="modal-close" onclick="hideModal('deviceTestModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div style="text-align: center; padding: 20px;">
                    <div style="font-size: 48px; margin-bottom: 16px;">🔄</div>
                    <h3>正在测试设备连接...</h3>
                    <p style="color: #8c8c8c;">请稍候，正在检测设备通信状态</p>
                    <div style="margin: 20px 0;">
                        <div style="width: 100%; height: 4px; background: #f0f0f0; border-radius: 2px;">
                            <div style="width: 60%; height: 100%; background: #1890ff; border-radius: 2px; animation: progress 2s infinite;"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="hideModal('deviceTestModal')">关闭</button>
            </div>
        </div>
    </div>

    <!-- 告警详情弹窗 -->
    <div id="alarmDetailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">🔔 告警详情</h3>
                <button class="modal-close" onclick="hideModal('alarmDetailModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">告警时间</label>
                    <input type="text" class="form-input" value="2025-09-14 15:30:00" readonly>
                </div>
                <div class="form-group">
                    <label class="form-label">告警类型</label>
                    <input type="text" class="form-input" value="温度异常" readonly>
                </div>
                <div class="form-group">
                    <label class="form-label">告警内容</label>
                    <textarea class="form-input" rows="3" readonly>探头3温度达到52°C，超出正常范围(18-25°C)，可能影响设备正常运行。</textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">处理措施</label>
                    <textarea class="form-input" rows="3" readonly>已通知运维人员，调整空调温度设置，温度已恢复正常。</textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">处理人员</label>
                    <input type="text" class="form-input" value="运维工程师 - 张三" readonly>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="hideModal('alarmDetailModal')">关闭</button>
            </div>
        </div>
    </div>

    <!-- 用户编辑弹窗 -->
    <div id="userEditModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">👤 编辑用户</h3>
                <button class="modal-close" onclick="hideModal('userEditModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">用户名</label>
                    <input type="text" class="form-input" value="operator" readonly>
                </div>
                <div class="form-group">
                    <label class="form-label">角色</label>
                    <select class="form-input">
                        <option>系统管理员</option>
                        <option selected>运维工程师</option>
                        <option>只读用户</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">权限范围</label>
                    <div style="display: flex; flex-direction: column; gap: 8px;">
                        <label><input type="checkbox" checked> 系统监控</label>
                        <label><input type="checkbox" checked> 设备控制</label>
                        <label><input type="checkbox"> 系统配置</label>
                        <label><input type="checkbox"> 用户管理</label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">账户状态</label>
                    <select class="form-input">
                        <option selected>启用</option>
                        <option>禁用</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="hideModal('userEditModal')">取消</button>
                <button class="btn btn-primary" onclick="saveUserEdit()">保存修改</button>
            </div>
        </div>
    </div>

    <!-- AI策略编辑弹窗 -->
    <div id="aiStrategyEditModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">🤖 编辑AI策略</h3>
                <button class="modal-close" onclick="hideModal('aiStrategyEditModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">策略名称</label>
                    <input type="text" class="form-input" value="温度保护策略">
                </div>
                <div class="form-group">
                    <label class="form-label">策略类型</label>
                    <select class="form-input">
                        <option selected>温度控制</option>
                        <option>节能优化</option>
                        <option>定时控制</option>
                        <option>故障处理</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">触发条件</label>
                    <textarea class="form-input" rows="3">出风口温度 > 60°C</textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">执行动作</label>
                    <textarea class="form-input" rows="3">自动关机 + 延迟断电</textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">策略状态</label>
                    <select class="form-input">
                        <option selected>启用</option>
                        <option>禁用</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="hideModal('aiStrategyEditModal')">取消</button>
                <button class="btn btn-primary" onclick="saveAiStrategy()">保存策略</button>
            </div>
        </div>
    </div>

    <!-- 告警规则编辑弹窗 -->
    <div id="alarmRuleEditModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">⚠️ 编辑告警规则</h3>
                <button class="modal-close" onclick="hideModal('alarmRuleEditModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">规则名称</label>
                    <input type="text" class="form-input" value="温度异常告警">
                </div>
                <div class="form-group">
                    <label class="form-label">告警类型</label>
                    <select class="form-input">
                        <option selected>温度异常</option>
                        <option>电气异常</option>
                        <option>设备异常</option>
                        <option>系统异常</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">触发条件</label>
                    <input type="text" class="form-input" value="任意探头 > 50°C">
                </div>
                <div class="form-group">
                    <label class="form-label">告警等级</label>
                    <select class="form-input">
                        <option>信息</option>
                        <option selected>警告</option>
                        <option>严重</option>
                        <option>紧急</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">通知方式</label>
                    <div style="display: flex; flex-direction: column; gap: 8px;">
                        <label><input type="checkbox" checked> 界面提示</label>
                        <label><input type="checkbox" checked> 邮件通知</label>
                        <label><input type="checkbox"> 短信通知</label>
                        <label><input type="checkbox"> 微信通知</label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="hideModal('alarmRuleEditModal')">取消</button>
                <button class="btn btn-primary" onclick="saveAlarmRule()">保存规则</button>
            </div>
        </div>
    </div>

    <!-- 服务器详情弹窗 -->
    <div id="serverDetailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">🖥️ 服务器详情</h3>
                <button class="modal-close" onclick="hideModal('serverDetailModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                    <div class="form-group">
                        <label class="form-label">服务器名称</label>
                        <input type="text" class="form-input" value="主服务器" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">IP地址</label>
                        <input type="text" class="form-input" value="192.168.110.100" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">CPU型号</label>
                        <input type="text" class="form-input" value="Intel Xeon E5-2680 v4" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">内存容量</label>
                        <input type="text" class="form-input" value="32GB DDR4" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">存储容量</label>
                        <input type="text" class="form-input" value="1TB SSD" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">网络接口</label>
                        <input type="text" class="form-input" value="千兆以太网" readonly>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">运行状态</label>
                    <div style="display: flex; gap: 20px;">
                        <div>CPU使用率: <span style="color: #52c41a;">15.2%</span></div>
                        <div>内存使用率: <span style="color: #52c41a;">68.5%</span></div>
                        <div>磁盘使用率: <span style="color: #52c41a;">45.8%</span></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="hideModal('serverDetailModal')">关闭</button>
            </div>
        </div>
    </div>

    <!-- 添加服务器弹窗 -->
    <div id="addServerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">🖥️ 添加服务器</h3>
                <button class="modal-close" onclick="hideModal('addServerModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">服务器名称</label>
                    <input type="text" class="form-input" placeholder="输入服务器名称，如：Web服务器01">
                </div>
                <div class="form-group">
                    <label class="form-label">服务器IP地址</label>
                    <input type="text" class="form-input" placeholder="192.168.110.102">
                </div>
                <div class="form-group">
                    <label class="form-label">SSH端口</label>
                    <input type="number" class="form-input" value="22" placeholder="22">
                </div>
                <div class="form-group">
                    <label class="form-label">用户名</label>
                    <input type="text" class="form-input" value="root" placeholder="root">
                </div>
                <div class="form-group">
                    <label class="form-label">认证方式</label>
                    <select class="form-input" id="authMethodSelect" onchange="toggleAuthFields()">
                        <option value="rsa">RSA密钥</option>
                        <option value="password">密码认证</option>
                        <option value="certificate">证书认证</option>
                    </select>
                </div>

                <!-- RSA密钥认证字段 -->
                <div class="form-group" id="rsaAuthFields">
                    <label class="form-label">RSA私钥内容</label>
                    <textarea class="form-input" rows="6" placeholder="请粘贴RSA私钥内容，格式如：&#10;-----BEGIN RSA PRIVATE KEY-----&#10;MIIEpAIBAAKCAQEA...&#10;-----END RSA PRIVATE KEY-----"></textarea>
                    <small style="color: #8c8c8c; margin-top: 4px; display: block;">请粘贴完整的RSA私钥内容，包括BEGIN和END标记</small>
                </div>

                <!-- 密码认证字段 -->
                <div class="form-group" id="passwordAuthFields" style="display: none;">
                    <label class="form-label">登录密码</label>
                    <input type="password" class="form-input" id="password1" placeholder="输入SSH登录密码">
                    <div style="margin-top: 8px;">
                        <label class="form-label">确认密码</label>
                        <input type="password" class="form-input" id="password2" placeholder="再次输入密码确认" oninput="checkPasswordMatch()">
                        <small id="passwordMatchMsg" style="margin-top: 4px; display: block;"></small>
                    </div>
                    <small style="color: #faad14; margin-top: 4px; display: block;">⚠️ 建议使用RSA密钥认证，更加安全</small>
                </div>

                <!-- 证书认证字段 -->
                <div class="form-group" id="certificateAuthFields" style="display: none;">
                    <label class="form-label">证书内容</label>
                    <textarea class="form-input" rows="4" placeholder="请粘贴证书内容，格式如：&#10;-----BEGIN CERTIFICATE-----&#10;MIIDXTCCAkWgAwIBAgIJAL...&#10;-----END CERTIFICATE-----"></textarea>
                    <div style="margin-top: 8px;">
                        <label class="form-label">私钥内容</label>
                        <textarea class="form-input" rows="4" placeholder="请粘贴私钥内容，格式如：&#10;-----BEGIN PRIVATE KEY-----&#10;MIIEvQIBADANBgkqhkiG9w0B...&#10;-----END PRIVATE KEY-----"></textarea>
                    </div>
                    <small style="color: #8c8c8c; margin-top: 4px; display: block;">请分别粘贴证书和私钥的完整内容</small>
                </div>
                <div class="form-group">
                    <label class="form-label">服务器类型</label>
                    <select class="form-input">
                        <option>主服务器</option>
                        <option>备用服务器</option>
                        <option>Web服务器</option>
                        <option>数据库服务器</option>
                        <option>应用服务器</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">服务器描述</label>
                    <textarea class="form-input" rows="3" placeholder="输入服务器用途和配置说明..."></textarea>
                </div>
                <div style="background: #f6ffed; border: 1px solid #b7eb8f; padding: 16px; border-radius: 4px; margin-top: 16px;">
                    <p style="margin: 0; color: #52c41a;">
                        💡 <strong>提示：</strong>添加服务器后，系统将自动测试SSH连接并获取硬件信息。
                    </p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="hideModal('addServerModal')">取消</button>
                <button class="btn btn-primary" onclick="addNewServer()">添加服务器</button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // 全局变量
        let currentPage = 'server-monitor';

        // 切换主菜单（手风琴效果）
        function toggleMainMenu(submenuId, mainMenuName, defaultPageId, clickedButton) {
            const submenuGroup = document.getElementById(submenuId + '-submenu');
            const arrow = clickedButton.querySelector('.menu-arrow');

            if (!submenuGroup || !arrow) return;

            // 获取当前状态
            const isCurrentlyOpen = submenuGroup.style.display === 'block';

            // 关闭所有其他子菜单
            document.querySelectorAll('.submenu-group').forEach(group => {
                group.style.display = 'none';
            });

            // 重置所有箭头为向右
            document.querySelectorAll('.menu-arrow').forEach(arr => {
                arr.className = 'menu-arrow right';
            });

            // 移除所有菜单项的active状态
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });

            // 如果当前菜单是关闭的，则打开它
            if (!isCurrentlyOpen) {
                submenuGroup.style.display = 'block';
                arrow.className = 'menu-arrow down';
                // 不给一级菜单添加active类，只展开子菜单

                // 显示默认的第一个子页面
                showPage(defaultPageId, mainMenuName, getSubMenuName(defaultPageId));
            } else {
                // 如果当前菜单是打开的，关闭它并回到首页
                showPage('dashboard', '', '🏠 系统概览');
            }
        }

        // 页面切换
        function showPage(pageId, mainMenuName = '', subMenuName = '') {
            // 隐藏所有页面
            document.querySelectorAll('.page-content').forEach(page => {
                page.classList.remove('active');
            });

            // 显示目标页面
            const targetPage = document.getElementById(pageId);
            if (targetPage) {
                targetPage.classList.add('active');
            } else {
                console.error('页面不存在:', pageId);
                return;
            }

            // 更新导航状态
            document.querySelectorAll('.menu-item, .submenu-item').forEach(item => {
                item.classList.remove('active');
            });

            // 高亮当前菜单项
            const activeMenuItem = document.querySelector(`[onclick*="'${pageId}'"]`);
            if (activeMenuItem) {
                activeMenuItem.classList.add('active');

                // 如果是子菜单项，确保对应的主菜单保持展开状态
                if (activeMenuItem.classList.contains('submenu-item')) {
                    const submenuGroup = activeMenuItem.closest('.submenu-group');
                    if (submenuGroup) {
                        submenuGroup.style.display = 'block';

                        // 找到对应的主菜单按钮并设置箭头状态，但不添加active类
                        const mainMenuButton = submenuGroup.previousElementSibling;
                        if (mainMenuButton && mainMenuButton.classList.contains('menu-item')) {
                            const arrow = mainMenuButton.querySelector('.menu-arrow');
                            if (arrow) {
                                arrow.className = 'menu-arrow down';
                            }
                            // 不给一级菜单添加active类，保持默认颜色
                        }
                    }
                }
            }

            // 设置当前页面
            currentPage = pageId;

            // 更新面包屑导航
            updateBreadcrumb(pageId, mainMenuName, subMenuName);
        }

        // 获取子菜单名称
        function getSubMenuName(pageId) {
            const menuNames = {
                'temp-monitor': '📊 实时监控',
                'temp-config': '⚙️ 传感器管理',
                'server-monitor': '📊 服务器监控',
                'server-config': '⚙️ 连接配置',
                'breaker-monitor': '📊 断路器监控',
                'breaker-config': '⚙️ 断路器配置',
                'ai-control': '🤖 AI智能控制',
                'alarms': '🔔 智能告警',
                'security': '🔒 安全控制',
                'dashboard': '🏠 系统概览'
            };
            return menuNames[pageId] || '';
        }

        // 更新面包屑导航
        function updateBreadcrumb(pageId, mainMenuName, subMenuName) {
            const breadcrumbElement = document.getElementById('current-page-title');

            if (pageId === 'dashboard') {
                breadcrumbElement.textContent = '系统概览';
            } else if (mainMenuName && subMenuName) {
                // 有主菜单和子菜单的情况
                const cleanMainMenu = mainMenuName.replace(/[🌡️🖥️⚡🤖🔔🔒]/g, '').trim();
                const cleanSubMenu = subMenuName.replace(/[📊⚙️]/g, '').trim();
                breadcrumbElement.textContent = `${cleanMainMenu} / ${cleanSubMenu}`;
            } else if (subMenuName) {
                // 只有子菜单名称的情况（单级菜单）
                breadcrumbElement.textContent = subMenuName.replace(/[🤖🔔🔒]/g, '').trim();
            } else {
                // 默认情况
                const defaultTitles = {
                    'temp-monitor': '温度监控 / 实时监控',
                    'temp-config': '温度监控 / 传感器管理',
                    'server-monitor': '服务器管理 / 服务器监控',
                    'server-config': '服务器管理 / 连接配置',
                    'breaker-monitor': '智能断路器 / 断路器监控',
                    'breaker-config': '智能断路器 / 断路器配置',
                    'ai-control': 'AI智能控制',
                    'alarms': '智能告警',
                    'security': '安全控制'
                };
                breadcrumbElement.textContent = defaultTitles[pageId] || pageId;
            }
        }

        // 模态框显示
        function showModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('show');
            }
        }

        // 模态框隐藏
        function hideModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('show');
            }
        }

        // 切换子菜单
        function toggleSubmenu(submenuId) {
            // 找到对应的子菜单项
            const menuButton = document.querySelector(`[onclick="toggleSubmenu('${submenuId}')"]`);
            if (!menuButton) return;

            // 找到紧跟在菜单按钮后面的所有子菜单项
            let nextElement = menuButton.nextElementSibling;
            const submenuItems = [];

            while (nextElement && nextElement.classList.contains('submenu-item')) {
                submenuItems.push(nextElement);
                nextElement = nextElement.nextElementSibling;
            }

            // 切换显示状态
            submenuItems.forEach(item => {
                const isVisible = item.style.display === 'block';
                item.style.display = isVisible ? 'none' : 'block';
            });
        }

        // 点击模态框背景关闭
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                e.target.classList.remove('show');
            }
        });

        // 通知系统
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <span>${message}</span>
                <button onclick="this.parentElement.remove()" style="background: none; border: none; color: white; font-size: 18px; cursor: pointer; margin-left: 12px;">&times;</button>
            `;

            // 添加通知样式
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 12px 16px;
                border-radius: 4px;
                color: white;
                z-index: 10000;
                display: flex;
                align-items: center;
                min-width: 300px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                font-size: 14px;
            `;

            // 根据类型设置颜色
            const colors = {
                'success': '#52c41a',
                'error': '#ff4d4f',
                'warning': '#faad14',
                'info': '#1890ff'
            };
            notification.style.backgroundColor = colors[type] || colors.info;

            document.body.appendChild(notification);

            // 3秒后自动消失
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 3000);
        }

        // 业务功能函数
        function logout() {
            showNotification('退出登录成功！', 'success');
            hideModal('logoutModal');
        }

        function saveTemperatureAlarm() {
            showNotification('温度告警阈值设置已保存！', 'success');
            hideModal('temperatureAlarmModal');
        }

        function calibrateSensor() {
            showNotification('传感器校准已开始，请等待完成...', 'info');
            hideModal('sensorCalibrationModal');
            setTimeout(() => {
                showNotification('传感器校准完成！', 'success');
            }, 3000);
        }

        function executeServerControl() {
            const confirmText = document.getElementById('serverConfirmText');
            if (confirmText && confirmText.value !== 'CONFIRM') {
                showNotification('请输入正确的确认文本！', 'error');
                return;
            }
            showNotification('服务器控制操作已执行！', 'success');
            hideModal('serverControlModal');
        }

        // 全局变量存储当前操作的断路器信息
        let currentBreakerInfo = {
            breakerId: '',
            serverName: ''
        };

        // 全局变量存储断路器绑定关系
        let breakerBindings = {
            breaker1: '主服务器',
            breaker2: '备用服务器'
        };

        // 当前正在设置绑定的断路器
        let currentBindingBreaker = '';

        // 获取当前绑定的服务器
        function getCurrentBinding(breakerId) {
            return breakerBindings[breakerId] || '未绑定';
        }

        // 显示断路器控制对话框
        function showBreakerControl(breakerId, serverName) {
            currentBreakerInfo = { breakerId, serverName };

            // 更新对话框信息
            document.getElementById('breakerInfo').textContent =
                breakerId === 'breaker1' ? '断路器#1 (端口503)' : '断路器#2 (端口505)';
            document.getElementById('serverInfo').textContent = `绑定服务器: ${serverName}`;
            document.getElementById('breakerControlTitle').textContent = `断路器控制操作 - ${serverName}`;

            // 重置步骤状态
            resetOperationSteps();

            // 隐藏进度条
            document.getElementById('shutdownProgressGroup').style.display = 'none';

            // 清空安全确认输入
            document.getElementById('safetyConfirmInput').value = '';

            // 显示对话框
            showModal('breakerControlModal');
        }

        // 重置操作步骤状态
        function resetOperationSteps() {
            const steps = ['step1', 'step2', 'step3'];
            const statuses = ['step1Status', 'step2Status', 'step3Status'];

            steps.forEach((stepId, index) => {
                const stepElement = document.getElementById(stepId);
                const statusElement = document.getElementById(statuses[index]);

                stepElement.classList.remove('active', 'completed');
                statusElement.textContent = '等待中';
            });
        }

        // 开始断路器控制流程
        function startBreakerControlProcess() {
            const safetyInput = document.getElementById('safetyConfirmInput').value.trim();

            if (safetyInput !== 'POWER OFF') {
                showNotification('请输入正确的安全确认文本: POWER OFF', 'error');
                return;
            }

            // 禁用执行按钮
            const executeBtn = document.getElementById('executeBreakerBtn');
            executeBtn.disabled = true;
            executeBtn.textContent = '执行中...';

            // 开始执行流程
            executeStep1();
        }

        // 执行步骤1: 远程关闭服务器
        function executeStep1() {
            const step1 = document.getElementById('step1');
            const step1Status = document.getElementById('step1Status');

            step1.classList.add('active');
            step1Status.textContent = '执行中';

            showNotification(`正在远程关闭${currentBreakerInfo.serverName}...`, 'info');

            // 模拟发送关机命令
            setTimeout(() => {
                step1.classList.remove('active');
                step1.classList.add('completed');
                step1Status.textContent = '已完成';

                showNotification(`${currentBreakerInfo.serverName}关机命令已发送`, 'success');

                // 开始步骤2
                executeStep2();
            }, 2000);
        }

        // 执行步骤2: 等待服务器完全关机
        function executeStep2() {
            const step2 = document.getElementById('step2');
            const step2Status = document.getElementById('step2Status');

            step2.classList.add('active');
            step2Status.textContent = '执行中';

            // 显示进度条
            document.getElementById('shutdownProgressGroup').style.display = 'block';

            showNotification(`等待${currentBreakerInfo.serverName}完全关机...`, 'info');

            // 模拟关机进度
            let progress = 0;
            const progressInterval = setInterval(() => {
                progress += 5;
                const progressFill = document.getElementById('shutdownProgress');
                const progressText = document.getElementById('shutdownProgressText');

                progressFill.style.width = progress + '%';

                if (progress <= 20) {
                    progressText.textContent = '正在保存数据...';
                } else if (progress <= 40) {
                    progressText.textContent = '正在关闭服务...';
                } else if (progress <= 60) {
                    progressText.textContent = '正在停止进程...';
                } else if (progress <= 80) {
                    progressText.textContent = '正在清理缓存...';
                } else if (progress < 100) {
                    progressText.textContent = '正在关闭系统...';
                } else {
                    progressText.textContent = '服务器已完全关机';
                    clearInterval(progressInterval);

                    // 完成步骤2
                    step2.classList.remove('active');
                    step2.classList.add('completed');
                    step2Status.textContent = '已完成';

                    showNotification(`${currentBreakerInfo.serverName}已完全关机`, 'success');

                    // 开始步骤3
                    setTimeout(() => executeStep3(), 1000);
                }
            }, 200);
        }

        // 执行步骤3: 断开断路器电源
        function executeStep3() {
            const step3 = document.getElementById('step3');
            const step3Status = document.getElementById('step3Status');

            step3.classList.add('active');
            step3Status.textContent = '执行中';

            const breakerName = currentBreakerInfo.breakerId === 'breaker1' ? '断路器#1' : '断路器#2';
            showNotification(`正在断开${breakerName}电源...`, 'warning');

            setTimeout(() => {
                step3.classList.remove('active');
                step3.classList.add('completed');
                step3Status.textContent = '已完成';

                showNotification(`${breakerName}已成功断开！${currentBreakerInfo.serverName}电源已切断！`, 'success');

                // 重新启用按钮并更改文本
                const executeBtn = document.getElementById('executeBreakerBtn');
                executeBtn.disabled = false;
                executeBtn.textContent = '操作完成';
                executeBtn.classList.remove('btn-danger');
                executeBtn.classList.add('btn-success');
                executeBtn.onclick = () => hideModal('breakerControlModal');

            }, 2000);
        }

        // 显示绑定设置模态框
        function showBindingModal(breakerId) {
            currentBindingBreaker = breakerId;

            // 更新模态框标题和断路器信息
            const breakerName = breakerId === 'breaker1' ? '断路器#1 (端口503)' : '断路器#2 (端口505)';
            document.getElementById('bindingModalTitle').textContent = `${breakerName} - 绑定设置`;
            document.getElementById('bindingBreakerInfo').textContent = breakerName;

            // 更新当前绑定状态
            const currentBinding = getCurrentBinding(breakerId);
            const statusElement = document.getElementById('currentBindingStatus');
            if (currentBinding === '未绑定') {
                statusElement.innerHTML = '<span style="color: #ff4d4f;">●</span> 未绑定服务器';
            } else {
                statusElement.innerHTML = `<span style="color: #52c41a;">●</span> 已绑定: ${currentBinding}`;
            }

            // 设置下拉框的当前值
            document.getElementById('serverSelect').value = currentBinding === '未绑定' ? '' : currentBinding;

            // 更新绑定历史
            updateBindingHistory(breakerId);

            // 显示模态框
            showModal('bindingModal');
        }

        // 更新绑定历史
        function updateBindingHistory(breakerId) {
            const historyElement = document.getElementById('bindingHistory');

            // 模拟绑定历史数据
            const histories = {
                breaker1: [
                    { time: '2025-09-15 08:00:00', action: '绑定', server: '主服务器', color: '#52c41a' },
                    { time: '2025-09-14 16:30:00', action: '修改', server: '备用服务器 → 主服务器', color: '#faad14' },
                    { time: '2025-09-14 10:15:00', action: '绑定', server: '备用服务器', color: '#52c41a' }
                ],
                breaker2: [
                    { time: '2025-09-15 08:00:00', action: '绑定', server: '备用服务器', color: '#52c41a' },
                    { time: '2025-09-13 14:20:00', action: '解除', server: '主服务器', color: '#ff4d4f' },
                    { time: '2025-09-13 09:45:00', action: '绑定', server: '主服务器', color: '#52c41a' }
                ]
            };

            const history = histories[breakerId] || [];
            historyElement.innerHTML = history.map(item => `
                <tr>
                    <td style="padding: 6px 8px;">${item.time}</td>
                    <td style="padding: 6px 8px; color: ${item.color};">${item.action}</td>
                    <td style="padding: 6px 8px;">${item.server}</td>
                </tr>
            `).join('');
        }

        // 保存绑定关系
        function saveBinding() {
            const selectedServer = document.getElementById('serverSelect').value;

            if (!selectedServer) {
                showNotification('请选择要绑定的服务器', 'error');
                return;
            }

            // 检查是否有其他断路器已绑定该服务器
            for (let breakerId in breakerBindings) {
                if (breakerId !== currentBindingBreaker && breakerBindings[breakerId] === selectedServer) {
                    showNotification(`${selectedServer} 已被 ${breakerId === 'breaker1' ? '断路器#1' : '断路器#2'} 绑定，请先解除绑定`, 'error');
                    return;
                }
            }

            const oldBinding = breakerBindings[currentBindingBreaker];
            breakerBindings[currentBindingBreaker] = selectedServer;

            // 更新表格显示
            updateBreakerBindingDisplay(currentBindingBreaker, selectedServer);

            // 显示成功通知
            const breakerName = currentBindingBreaker === 'breaker1' ? '断路器#1' : '断路器#2';
            if (oldBinding && oldBinding !== '未绑定') {
                showNotification(`${breakerName} 绑定已从 "${oldBinding}" 修改为 "${selectedServer}"`, 'success');
            } else {
                showNotification(`${breakerName} 已成功绑定到 "${selectedServer}"`, 'success');
            }

            // 关闭模态框
            hideModal('bindingModal');
        }

        // 解除绑定
        function unbindServer() {
            const currentBinding = getCurrentBinding(currentBindingBreaker);

            if (currentBinding === '未绑定') {
                showNotification('当前断路器未绑定任何服务器', 'warning');
                return;
            }

            breakerBindings[currentBindingBreaker] = '';

            // 更新表格显示
            updateBreakerBindingDisplay(currentBindingBreaker, '');

            // 显示成功通知
            const breakerName = currentBindingBreaker === 'breaker1' ? '断路器#1' : '断路器#2';
            showNotification(`${breakerName} 与 "${currentBinding}" 的绑定已解除`, 'success');

            // 关闭模态框
            hideModal('bindingModal');
        }

        // 更新断路器绑定显示
        function updateBreakerBindingDisplay(breakerId, serverName) {
            const bindingElement = document.getElementById(breakerId + 'Binding');
            if (serverName) {
                bindingElement.textContent = `绑定: ${serverName}`;
                bindingElement.style.color = '#666';
            } else {
                bindingElement.textContent = '未绑定';
                bindingElement.style.color = '#ff4d4f';
            }
        }

        // 定时任务数据
        let scheduledTasks = [
            {
                id: 1,
                name: '夜间自动断电',
                time: '23:00',
                type: 'daily',
                action: 'close',
                target: 'breaker1',
                description: '每日23:00执行',
                enabled: true
            },
            {
                id: 2,
                name: '早晨自动通电',
                time: '07:00',
                type: 'daily',
                action: 'open',
                target: 'breaker1',
                description: '每日07:00执行',
                enabled: true
            },
            {
                id: 3,
                name: '周末维护断电',
                time: '02:00',
                type: 'weekly',
                weekDay: 0,
                action: 'close',
                target: 'breaker2',
                description: '每周日02:00执行',
                enabled: false
            }
        ];

        let currentEditingTask = null;

        // 显示定时任务管理对话框
        function showScheduledTasksModal() {
            updateTaskStatistics();
            showModal('scheduledTasksModal');
        }

        // 更新任务统计
        function updateTaskStatistics() {
            const total = scheduledTasks.length;
            const active = scheduledTasks.filter(task => task.enabled).length;
            const inactive = total - active;

            document.getElementById('totalTasks').textContent = total;
            document.getElementById('activeTasks').textContent = active;
            document.getElementById('inactiveTasks').textContent = inactive;
            document.getElementById('taskCount').textContent = total + '个';
        }

        // 显示添加任务对话框
        function showAddTaskModal() {
            currentEditingTask = null;
            document.getElementById('taskModalTitle').textContent = '添加定时任务';

            // 清空表单
            document.getElementById('taskName').value = '';
            document.getElementById('taskType').value = 'daily';
            document.getElementById('taskTime').value = '';
            document.getElementById('taskAction').value = 'close';
            document.getElementById('targetBreaker').value = 'breaker1';
            document.getElementById('taskDescription').value = '';

            updateTimeOptions();
            showModal('addTaskModal');
        }

        // 编辑任务
        function editTask(taskId) {
            const task = scheduledTasks.find(t => t.id === taskId);
            if (!task) return;

            currentEditingTask = task;
            document.getElementById('taskModalTitle').textContent = '编辑定时任务';

            // 填充表单
            document.getElementById('taskName').value = task.name;
            document.getElementById('taskType').value = task.type;
            document.getElementById('taskTime').value = task.time;
            document.getElementById('taskAction').value = task.action;
            document.getElementById('targetBreaker').value = task.target;
            document.getElementById('taskDescription').value = task.description || '';

            if (task.type === 'weekly' && task.weekDay !== undefined) {
                document.getElementById('weekDay').value = task.weekDay;
            }
            if (task.type === 'monthly' && task.monthDay !== undefined) {
                document.getElementById('monthDay').value = task.monthDay;
            }

            updateTimeOptions();
            showModal('addTaskModal');
        }

        // 删除任务
        function deleteTask(taskId) {
            if (confirm('确定要删除这个定时任务吗？')) {
                scheduledTasks = scheduledTasks.filter(task => task.id !== taskId);
                updateTaskList();
                updateTaskStatistics();
                showNotification('定时任务已删除', 'success');
            }
        }

        // 切换任务启用状态
        function toggleTask(taskId, enabled) {
            const task = scheduledTasks.find(t => t.id === taskId);
            if (task) {
                task.enabled = enabled;
                updateTaskStatistics();
                showNotification(`任务 "${task.name}" 已${enabled ? '启用' : '禁用'}`, 'success');
            }
        }

        // 更新时间选项
        function updateTimeOptions() {
            const taskType = document.getElementById('taskType').value;
            const weekDaySelector = document.getElementById('weekDaySelector');
            const monthDaySelector = document.getElementById('monthDaySelector');

            weekDaySelector.style.display = taskType === 'weekly' ? 'block' : 'none';
            monthDaySelector.style.display = taskType === 'monthly' ? 'block' : 'none';

            if (taskType === 'monthly') {
                const monthDaySelect = document.getElementById('monthDay');
                monthDaySelect.innerHTML = '';
                for (let i = 1; i <= 31; i++) {
                    const option = document.createElement('option');
                    option.value = i;
                    option.textContent = i + '日';
                    monthDaySelect.appendChild(option);
                }
            }
        }

        // 保存任务
        function saveTask() {
            const name = document.getElementById('taskName').value.trim();
            const type = document.getElementById('taskType').value;
            const time = document.getElementById('taskTime').value;
            const action = document.getElementById('taskAction').value;
            const target = document.getElementById('targetBreaker').value;
            const description = document.getElementById('taskDescription').value.trim();

            if (!name || !time) {
                showNotification('请填写任务名称和执行时间', 'error');
                return;
            }

            const taskData = {
                name,
                time,
                type,
                action,
                target,
                description,
                enabled: true
            };

            if (type === 'weekly') {
                taskData.weekDay = parseInt(document.getElementById('weekDay').value);
            }
            if (type === 'monthly') {
                taskData.monthDay = parseInt(document.getElementById('monthDay').value);
            }

            if (currentEditingTask) {
                // 编辑现有任务
                Object.assign(currentEditingTask, taskData);
                showNotification('定时任务已更新', 'success');
            } else {
                // 添加新任务
                taskData.id = Math.max(...scheduledTasks.map(t => t.id), 0) + 1;
                scheduledTasks.push(taskData);
                showNotification('定时任务已添加', 'success');
            }

            updateTaskList();
            updateTaskStatistics();
            hideModal('addTaskModal');
        }

        // 更新任务列表显示
        function updateTaskList() {
            const tbody = document.getElementById('taskListBody');
            tbody.innerHTML = scheduledTasks.map(task => {
                const actionColor = task.action === 'close' ? '#ff4d4f' : '#52c41a';
                const actionBg = task.action === 'close' ? '#fff2f0' : '#f6ffed';
                const actionText = task.action === 'close' ? '分闸' : '合闸';
                const targetText = task.target === 'breaker1' ? '断路器#1' : '断路器#2';

                let timeDisplay = task.time;
                if (task.type === 'weekly') {
                    const weekDays = ['日', '一', '二', '三', '四', '五', '六'];
                    timeDisplay = `周${weekDays[task.weekDay]} ${task.time}`;
                } else if (task.type === 'monthly') {
                    timeDisplay = `每月${task.monthDay}日 ${task.time}`;
                }

                return `
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">
                            <div style="font-weight: bold;">${task.name}</div>
                            <div style="color: #666; font-size: 12px;">${task.description}</div>
                        </td>
                        <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">${timeDisplay}</td>
                        <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">
                            <span style="background: ${actionBg}; color: ${actionColor}; padding: 2px 8px; border-radius: 12px; font-size: 12px;">${actionText}</span>
                        </td>
                        <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">${targetText}</td>
                        <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">
                            <label class="switch">
                                <input type="checkbox" ${task.enabled ? 'checked' : ''} onchange="toggleTask(${task.id}, this.checked)">
                                <span class="slider"></span>
                            </label>
                        </td>
                        <td style="padding: 12px; border-bottom: 1px solid #f0f0f0;">
                            <button class="btn" style="padding: 4px 8px; font-size: 12px; margin-right: 4px;" onclick="editTask(${task.id})">编辑</button>
                            <button class="btn btn-danger" style="padding: 4px 8px; font-size: 12px;" onclick="deleteTask(${task.id})">删除</button>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        // AI智能策略管理
        let aiStrategies = [
            {
                id: 1,
                name: '温度保护策略',
                type: 'temperature',
                condition: '出风口温度 > 60°C',
                action: '自动关机 + 延迟断电',
                enabled: true,
                lastExecuted: '从未触发'
            },
            {
                id: 2,
                name: '节能优化策略',
                type: 'energy',
                condition: '非工作时间 + CPU < 20%',
                action: '自动断电',
                enabled: true,
                lastExecuted: '2025-09-14 23:00:00'
            }
        ];

        // 显示新增策略模态框
        function showAddStrategyModal() {
            // 重置表单
            document.getElementById('strategyName').value = '';
            document.getElementById('strategyType').value = 'temperature';
            document.getElementById('conditionParam').value = 'temperature';
            document.getElementById('conditionOperator').value = '>';
            document.getElementById('conditionValue').value = '';
            document.getElementById('strategyDescription').value = '';

            // 重置复选框
            document.getElementById('actionShutdown').checked = false;
            document.getElementById('actionBreaker').checked = false;
            document.getElementById('actionNotify').checked = true;
            document.getElementById('strategyEnabled').checked = true;
            document.getElementById('strategyLogging').checked = true;

            // 隐藏动作选项
            document.getElementById('shutdownOptions').style.display = 'none';
            document.getElementById('breakerOptions').style.display = 'none';
            document.getElementById('notifyOptions').style.display = 'none';

            updateStrategyOptions();
            updateConditionOptions();

            showModal('addStrategyModal');
        }

        // 更新策略选项
        function updateStrategyOptions() {
            const strategyType = document.getElementById('strategyType').value;
            const conditionParam = document.getElementById('conditionParam');

            // 根据策略类型更新条件参数选项
            const paramOptions = {
                temperature: [
                    { value: 'temperature', text: '温度' },
                    { value: 'cpu_temp', text: 'CPU温度' },
                    { value: 'ambient_temp', text: '环境温度' }
                ],
                humidity: [
                    { value: 'humidity', text: '湿度' },
                    { value: 'dew_point', text: '露点温度' }
                ],
                power: [
                    { value: 'power', text: '功耗' },
                    { value: 'current', text: '电流' },
                    { value: 'voltage', text: '电压' }
                ],
                time: [
                    { value: 'time', text: '时间' },
                    { value: 'weekday', text: '星期' }
                ],
                energy: [
                    { value: 'cpu', text: 'CPU使用率' },
                    { value: 'memory', text: '内存使用率' },
                    { value: 'power', text: '功耗' }
                ],
                safety: [
                    { value: 'temperature', text: '温度' },
                    { value: 'smoke', text: '烟雾检测' },
                    { value: 'vibration', text: '震动检测' }
                ]
            };

            const options = paramOptions[strategyType] || paramOptions.temperature;
            conditionParam.innerHTML = options.map(opt =>
                `<option value="${opt.value}">${opt.text}</option>`
            ).join('');

            updateConditionOptions();
        }

        // 更新条件选项
        function updateConditionOptions() {
            const param = document.getElementById('conditionParam').value;
            const unitElement = document.getElementById('conditionUnit');
            const valueInput = document.getElementById('conditionValue');

            const units = {
                temperature: '°C',
                cpu_temp: '°C',
                ambient_temp: '°C',
                humidity: '%',
                dew_point: '°C',
                power: 'W',
                current: 'A',
                voltage: 'V',
                cpu: '%',
                memory: '%',
                time: '',
                weekday: '',
                smoke: '',
                vibration: ''
            };

            const placeholders = {
                temperature: '60',
                cpu_temp: '80',
                ambient_temp: '35',
                humidity: '80',
                dew_point: '25',
                power: '1000',
                current: '5',
                voltage: '220',
                cpu: '20',
                memory: '80',
                time: '23:00',
                weekday: '1',
                smoke: '检测到',
                vibration: '异常'
            };

            unitElement.textContent = units[param] || '';
            valueInput.placeholder = placeholders[param] || '阈值';
        }

        // 切换动作选项显示
        document.getElementById('actionShutdown').addEventListener('change', function() {
            document.getElementById('shutdownOptions').style.display = this.checked ? 'block' : 'none';
        });

        document.getElementById('actionBreaker').addEventListener('change', function() {
            document.getElementById('breakerOptions').style.display = this.checked ? 'block' : 'none';
        });

        document.getElementById('actionNotify').addEventListener('change', function() {
            document.getElementById('notifyOptions').style.display = this.checked ? 'block' : 'none';
        });

        // 保存策略
        function saveStrategy() {
            const name = document.getElementById('strategyName').value.trim();
            const type = document.getElementById('strategyType').value;
            const param = document.getElementById('conditionParam').value;
            const operator = document.getElementById('conditionOperator').value;
            const value = document.getElementById('conditionValue').value.trim();
            const description = document.getElementById('strategyDescription').value.trim();

            if (!name || !value) {
                showNotification('请填写策略名称和触发条件', 'error');
                return;
            }

            // 构建条件描述
            const paramNames = {
                temperature: '出风口温度',
                cpu_temp: 'CPU温度',
                ambient_temp: '环境温度',
                humidity: '湿度',
                power: '功耗',
                current: '电流',
                voltage: '电压',
                cpu: 'CPU使用率',
                memory: '内存使用率'
            };

            const units = {
                temperature: '°C',
                cpu_temp: '°C',
                ambient_temp: '°C',
                humidity: '%',
                power: 'W',
                current: 'A',
                voltage: 'V',
                cpu: '%',
                memory: '%'
            };

            const condition = `${paramNames[param] || param} ${operator} ${value}${units[param] || ''}`;

            // 构建动作描述
            const actions = [];
            if (document.getElementById('actionShutdown').checked) {
                actions.push('自动关机');
            }
            if (document.getElementById('actionBreaker').checked) {
                const breakerAction = document.getElementById('breakerAction').value === 'close' ? '断电' : '通电';
                const delay = document.getElementById('breakerDelay').value;
                actions.push(`延迟${delay}秒${breakerAction}`);
            }
            if (document.getElementById('actionNotify').checked) {
                actions.push('发送通知');
            }

            const action = actions.join(' + ') || '无动作';

            // 创建新策略
            const newStrategy = {
                id: Math.max(...aiStrategies.map(s => s.id), 0) + 1,
                name,
                type,
                condition,
                action,
                enabled: document.getElementById('strategyEnabled').checked,
                lastExecuted: '从未触发',
                description
            };

            aiStrategies.push(newStrategy);

            showNotification(`AI智能策略 "${name}" 已创建成功`, 'success');
            hideModal('addStrategyModal');

            // 这里可以添加更新策略列表显示的代码
            console.log('新增策略:', newStrategy);
        }

        // 告警规则管理
        let alarmRules = [
            {
                id: 1,
                name: '温度异常告警',
                type: 'temperature',
                condition: '任意探头 > 50°C',
                level: 'warning',
                notifications: ['system', 'email'],
                enabled: true,
                lastTriggered: '从未触发'
            },
            {
                id: 2,
                name: '功耗过载告警',
                type: 'power',
                condition: '总功耗 > 2000W',
                level: 'error',
                notifications: ['system', 'dingtalk', 'sms'],
                enabled: true,
                lastTriggered: '2025-09-14 15:30:00'
            }
        ];

        // 显示新增告警规则模态框
        function showAddAlarmRuleModal() {
            // 重置表单
            document.getElementById('alarmRuleName').value = '';
            document.getElementById('alarmType').value = 'temperature';
            document.getElementById('alarmConditionParam').value = 'temperature';
            document.getElementById('alarmConditionOperator').value = '>';
            document.getElementById('alarmConditionValue').value = '';
            document.getElementById('alarmDuration').value = '5';
            document.getElementById('alarmRuleDescription').value = '';

            // 重置告警等级
            document.querySelector('input[name="alarmLevel"][value="warning"]').checked = true;

            // 重置通知方式
            document.getElementById('notifySystem').checked = true;
            document.getElementById('notifyEmail').checked = false;
            document.getElementById('notifyDingTalk').checked = false;

            // 重置高级设置
            document.getElementById('alarmRuleEnabled').checked = true;
            document.getElementById('alarmRuleLogging').checked = true;
            document.getElementById('alarmRuleAutoRecover').checked = false;

            // 隐藏配置区域
            document.getElementById('dingTalkConfig').style.display = 'none';
            document.getElementById('emailConfig').style.display = 'none';

            updateAlarmConditions();
            updateAlarmUnits();

            showModal('addAlarmRuleModal');
        }

        // 更新告警条件选项
        function updateAlarmConditions() {
            const alarmType = document.getElementById('alarmType').value;
            const conditionParam = document.getElementById('alarmConditionParam');

            const paramOptions = {
                temperature: [
                    { value: 'temperature', text: '出风口温度' },
                    { value: 'ambient_temp', text: '环境温度' },
                    { value: 'cpu_temp', text: 'CPU温度' },
                    { value: 'inlet_temp', text: '进风口温度' }
                ],
                humidity: [
                    { value: 'humidity', text: '相对湿度' },
                    { value: 'absolute_humidity', text: '绝对湿度' },
                    { value: 'dew_point', text: '露点温度' }
                ],
                power: [
                    { value: 'total_power', text: '总功耗' },
                    { value: 'server_power', text: '服务器功耗' },
                    { value: 'cooling_power', text: '制冷功耗' }
                ],
                voltage: [
                    { value: 'input_voltage', text: '输入电压' },
                    { value: 'output_voltage', text: '输出电压' },
                    { value: 'ups_voltage', text: 'UPS电压' }
                ],
                current: [
                    { value: 'input_current', text: '输入电流' },
                    { value: 'output_current', text: '输出电流' },
                    { value: 'neutral_current', text: '零线电流' }
                ],
                device: [
                    { value: 'device_status', text: '设备状态' },
                    { value: 'connection_status', text: '连接状态' },
                    { value: 'response_time', text: '响应时间' }
                ],
                network: [
                    { value: 'ping_status', text: 'Ping状态' },
                    { value: 'bandwidth_usage', text: '带宽使用率' },
                    { value: 'packet_loss', text: '丢包率' }
                ],
                system: [
                    { value: 'cpu_usage', text: 'CPU使用率' },
                    { value: 'memory_usage', text: '内存使用率' },
                    { value: 'disk_usage', text: '磁盘使用率' }
                ]
            };

            const options = paramOptions[alarmType] || paramOptions.temperature;
            conditionParam.innerHTML = options.map(opt =>
                `<option value="${opt.value}">${opt.text}</option>`
            ).join('');

            updateAlarmUnits();
        }

        // 更新告警单位
        function updateAlarmUnits() {
            const param = document.getElementById('alarmConditionParam').value;
            const unitElement = document.getElementById('alarmConditionUnit');
            const valueInput = document.getElementById('alarmConditionValue');

            const units = {
                temperature: '°C',
                ambient_temp: '°C',
                cpu_temp: '°C',
                inlet_temp: '°C',
                humidity: '%',
                absolute_humidity: 'g/m³',
                dew_point: '°C',
                total_power: 'W',
                server_power: 'W',
                cooling_power: 'W',
                input_voltage: 'V',
                output_voltage: 'V',
                ups_voltage: 'V',
                input_current: 'A',
                output_current: 'A',
                neutral_current: 'A',
                response_time: 'ms',
                bandwidth_usage: '%',
                packet_loss: '%',
                cpu_usage: '%',
                memory_usage: '%',
                disk_usage: '%'
            };

            const placeholders = {
                temperature: '50',
                ambient_temp: '35',
                cpu_temp: '80',
                inlet_temp: '25',
                humidity: '80',
                absolute_humidity: '15',
                dew_point: '20',
                total_power: '2000',
                server_power: '1500',
                cooling_power: '500',
                input_voltage: '220',
                output_voltage: '220',
                ups_voltage: '220',
                input_current: '10',
                output_current: '8',
                neutral_current: '2',
                response_time: '1000',
                bandwidth_usage: '90',
                packet_loss: '5',
                cpu_usage: '90',
                memory_usage: '85',
                disk_usage: '90'
            };

            unitElement.textContent = units[param] || '';
            valueInput.placeholder = placeholders[param] || '阈值';
        }

        // 通知方式变化处理
        document.getElementById('notifyDingTalk').addEventListener('change', function() {
            document.getElementById('dingTalkConfig').style.display = this.checked ? 'block' : 'none';
        });

        document.getElementById('notifyEmail').addEventListener('change', function() {
            document.getElementById('emailConfig').style.display = this.checked ? 'block' : 'none';
        });

        // 保存告警规则
        function saveAlarmRule() {
            const name = document.getElementById('alarmRuleName').value.trim();
            const type = document.getElementById('alarmType').value;
            const param = document.getElementById('alarmConditionParam').value;
            const operator = document.getElementById('alarmConditionOperator').value;
            const value = document.getElementById('alarmConditionValue').value.trim();
            const duration = document.getElementById('alarmDuration').value;
            const description = document.getElementById('alarmRuleDescription').value.trim();

            if (!name || !value) {
                showNotification('请填写规则名称和触发条件', 'error');
                return;
            }

            // 获取告警等级
            const level = document.querySelector('input[name="alarmLevel"]:checked').value;

            // 获取通知方式
            const notifications = [];
            if (document.getElementById('notifySystem').checked) notifications.push('system');
            if (document.getElementById('notifyEmail').checked) notifications.push('email');
            if (document.getElementById('notifyDingTalk').checked) notifications.push('dingtalk');

            if (notifications.length === 0) {
                showNotification('请至少选择一种通知方式', 'error');
                return;
            }

            // 构建条件描述
            const paramNames = {
                temperature: '出风口温度',
                ambient_temp: '环境温度',
                cpu_temp: 'CPU温度',
                inlet_temp: '进风口温度',
                humidity: '相对湿度',
                total_power: '总功耗',
                input_voltage: '输入电压',
                input_current: '输入电流'
            };

            const units = {
                temperature: '°C',
                ambient_temp: '°C',
                cpu_temp: '°C',
                humidity: '%',
                total_power: 'W',
                input_voltage: 'V',
                input_current: 'A'
            };

            const condition = `${paramNames[param] || param} ${operator} ${value}${units[param] || ''}`;

            // 验证钉钉配置
            if (notifications.includes('dingtalk')) {
                const webhook = document.getElementById('dingTalkWebhook').value.trim();
                if (!webhook) {
                    showNotification('启用钉钉通知时，请填写Webhook地址', 'error');
                    return;
                }
                if (!webhook.startsWith('https://oapi.dingtalk.com/robot/send')) {
                    showNotification('钉钉Webhook地址格式不正确', 'error');
                    return;
                }
            }

            // 创建新规则
            const newRule = {
                id: Math.max(...alarmRules.map(r => r.id), 0) + 1,
                name,
                type,
                condition,
                level,
                notifications,
                enabled: document.getElementById('alarmRuleEnabled').checked,
                lastTriggered: '从未触发',
                description,
                duration: parseInt(duration),
                config: {
                    dingtalk: notifications.includes('dingtalk') ? {
                        webhook: document.getElementById('dingTalkWebhook').value.trim(),
                        secret: document.getElementById('dingTalkSecret').value.trim(),
                        atMobiles: document.getElementById('dingTalkAtMobiles').value.trim().split(',').filter(m => m.trim())
                    } : null,
                    email: notifications.includes('email') ? {
                        recipients: document.getElementById('emailRecipients').value.trim().split(',').filter(e => e.trim())
                    } : null
                }
            };

            alarmRules.push(newRule);

            showNotification(`告警规则 "${name}" 已创建成功`, 'success');
            hideModal('addAlarmRuleModal');

            // 这里可以添加更新规则列表显示的代码
            console.log('新增告警规则:', newRule);
        }

        function executeBreakerControl() {
            showNotification('断路器控制操作已执行！请注意安全！', 'warning');
            hideModal('breakerControlModal');
        }

        function executeEmergencyPowerOff() {
            showNotification('紧急断电操作已执行！所有电源已切断！', 'error');
            hideModal('emergencyPowerOffModal');
        }

        function executeSystemLock() {
            showNotification('系统已锁定！所有控制功能已禁用！', 'warning');
            hideModal('systemLockModal');
        }

        // 模拟实时数据更新
        function updateRealTimeData() {
            // 更新温度数据
            const tempElements = document.querySelectorAll('.temp-value');
            tempElements.forEach(element => {
                const baseTemp = parseFloat(element.textContent) || 25;
                const newTemp = (baseTemp + (Math.random() - 0.5) * 2).toFixed(1);
                element.textContent = newTemp;
            });

            // 更新时间戳
            const timeElements = document.querySelectorAll('.last-update');
            const now = new Date().toLocaleString('zh-CN');
            timeElements.forEach(element => {
                element.textContent = `最后更新: ${now}`;
            });
        }

        // 新增弹窗相关函数
        function exportData() {
            showNotification('数据导出已开始，请稍候...', 'info');
            hideModal('exportDataModal');
        }

        function saveDeviceConfig() {
            showNotification('设备配置已保存', 'success');
            hideModal('deviceConfigModal');
        }

        function saveUserEdit() {
            showNotification('用户信息已更新', 'success');
            hideModal('userEditModal');
        }

        function saveAiStrategy() {
            showNotification('AI策略已保存', 'success');
            hideModal('aiStrategyEditModal');
        }

        function saveAlarmRule() {
            showNotification('告警规则已保存', 'success');
            hideModal('alarmRuleEditModal');
        }

        function changeTimeRange(range, clickedButton) {
            // 移除时间范围按钮组中所有按钮的active状态
            document.querySelectorAll('.time-range-buttons .btn').forEach(btn => {
                btn.classList.remove('active');
            });

            // 设置当前按钮为active
            if (clickedButton) {
                clickedButton.classList.add('active');
            }

            showNotification(`时间范围已切换到: ${range}`, 'info');
        }

        function addNewServer() {
            // 获取表单数据
            const serverName = document.querySelector('#addServerModal input[placeholder*="服务器名称"]').value;
            const serverIP = document.querySelector('#addServerModal input[placeholder*="192.168.110.102"]').value;
            const authMethod = document.getElementById('authMethodSelect').value;

            if (!serverName || !serverIP) {
                showNotification('请填写服务器名称和IP地址', 'error');
                return;
            }

            // 检查认证信息
            let authValid = false;
            let authInfo = '';

            switch(authMethod) {
                case 'rsa':
                    const rsaContent = document.querySelector('#rsaAuthFields textarea').value.trim();
                    if (rsaContent) {
                        if (rsaContent.includes('-----BEGIN') && rsaContent.includes('-----END')) {
                            authValid = true;
                            authInfo = 'RSA密钥认证';
                        } else {
                            showNotification('RSA私钥格式不正确，请确保包含BEGIN和END标记', 'error');
                            return;
                        }
                    } else {
                        showNotification('请输入RSA私钥内容', 'error');
                        return;
                    }
                    break;
                case 'password':
                    const password1 = document.getElementById('password1').value;
                    const password2 = document.getElementById('password2').value;

                    if (!password1 || !password2) {
                        showNotification('请输入密码并确认', 'error');
                        return;
                    }

                    if (password1 !== password2) {
                        showNotification('两次输入的密码不匹配', 'error');
                        return;
                    }

                    if (password1.length < 6) {
                        showNotification('密码长度至少6位', 'error');
                        return;
                    }

                    authValid = true;
                    authInfo = '密码认证';
                    break;
                case 'certificate':
                    const certContent = document.querySelector('#certificateAuthFields textarea:first-of-type').value.trim();
                    const keyContent = document.querySelector('#certificateAuthFields textarea:last-of-type').value.trim();

                    if (!certContent || !keyContent) {
                        showNotification('请输入证书内容和私钥内容', 'error');
                        return;
                    }

                    if (!certContent.includes('-----BEGIN CERTIFICATE-----') || !keyContent.includes('-----BEGIN')) {
                        showNotification('证书或私钥格式不正确', 'error');
                        return;
                    }

                    authValid = true;
                    authInfo = '证书认证';
                    break;
            }

            // 模拟添加服务器过程
            showNotification('正在添加服务器，请稍候...', 'info');

            setTimeout(() => {
                showNotification(`服务器 "${serverName}" (${serverIP}) 添加成功！\n认证方式: ${authInfo}`, 'success');
                hideModal('addServerModal');

                // 清空表单
                document.querySelector('#addServerModal input[placeholder*="服务器名称"]').value = '';
                document.querySelector('#addServerModal input[placeholder*="192.168.110.102"]').value = '';
                document.getElementById('password1').value = '';
                document.getElementById('password2').value = '';
                document.getElementById('passwordMatchMsg').textContent = '';

                // 清空所有textarea
                document.querySelectorAll('#addServerModal textarea').forEach(textarea => {
                    textarea.value = '';
                });

                // 重置认证方式选择
                document.getElementById('authMethodSelect').value = 'rsa';
                toggleAuthFields();
            }, 2000);
        }

        function refreshServerInfo() {
            showNotification('正在刷新服务器信息...', 'info');

            // 模拟刷新过程
            setTimeout(() => {
                showNotification('服务器信息已更新', 'success');

                // 模拟更新一些数据
                const cpuElements = document.querySelectorAll('.status-subtitle');
                cpuElements.forEach(element => {
                    if (element.textContent.includes('CPU:')) {
                        const randomCpu = Math.floor(Math.random() * 30) + 10;
                        const randomMem = Math.floor(Math.random() * 40) + 40;
                        element.textContent = `CPU: ${randomCpu}% | 内存: ${randomMem}% | 正常`;
                    }
                });
            }, 1500);
        }

        // 切换认证方式字段
        function toggleAuthFields() {
            const authMethod = document.getElementById('authMethodSelect').value;
            const rsaFields = document.getElementById('rsaAuthFields');
            const passwordFields = document.getElementById('passwordAuthFields');
            const certificateFields = document.getElementById('certificateAuthFields');

            // 隐藏所有认证字段
            rsaFields.style.display = 'none';
            passwordFields.style.display = 'none';
            certificateFields.style.display = 'none';

            // 根据选择显示对应字段
            switch(authMethod) {
                case 'rsa':
                    rsaFields.style.display = 'block';
                    break;
                case 'password':
                    passwordFields.style.display = 'block';
                    break;
                case 'certificate':
                    certificateFields.style.display = 'block';
                    break;
            }
        }

        // 检查密码匹配
        function checkPasswordMatch() {
            const password1 = document.getElementById('password1').value;
            const password2 = document.getElementById('password2').value;
            const msgElement = document.getElementById('passwordMatchMsg');

            if (password2 === '') {
                msgElement.textContent = '';
                msgElement.style.color = '';
                return;
            }

            if (password1 === password2) {
                msgElement.textContent = '✅ 密码匹配';
                msgElement.style.color = '#52c41a';
            } else {
                msgElement.textContent = '❌ 密码不匹配';
                msgElement.style.color = '#ff4d4f';
            }
        }

        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            showPage('dashboard', '', '🏠 系统概览');

            // 默认展开所有子菜单，方便用户查看
            // 先确保所有子菜单项都是显示状态
            document.querySelectorAll('.submenu-item').forEach(item => {
                item.style.display = 'block';
            });

            // 启动实时数据更新
            setInterval(updateRealTimeData, 5000);

            // 显示欢迎消息
            setTimeout(() => {
                showNotification('智能机房管理系统已启动！', 'success');
            }, 1000);
        });
    </script>
</body>
</html>
