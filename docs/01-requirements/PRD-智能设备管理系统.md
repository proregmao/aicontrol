# 智能设备管理系统产品需求文档 (PRD)

## 📋 文档信息
- **产品名称**: 智能设备管理系统 (Smart Device Management System)
- **版本**: v1.0
- **创建日期**: 2025-09-15
- **更新日期**: 2025-09-15
- **产品经理**: AI Assistant
- **目标用户**: 机房运维人员、系统管理员、IT运维团队

## 🎯 产品概述

### 产品定位
基于现代化Web技术栈的智能设备管理系统，通过集成温度监控、服务器管理、智能断路器控制等功能，实现机房设备的统一监控、智能控制和自动化运维。系统采用响应式设计，支持桌面端优先的用户界面，提供直观的设备管理和控制体验。

### 核心价值
- **安全保障**: 温度异常自动保护，避免设备过热损坏
- **智能控制**: 基于条件的自动开关机，提高运维效率
- **节能环保**: 智能电源管理，降低能耗成本
- **远程运维**: 7x24小时远程监控和控制能力

## 👥 目标用户分析

### 主要用户群体
1. **机房运维工程师**: 日常监控、设备维护、故障处理
2. **系统管理员**: 服务器管理、系统配置、安全维护
3. **IT经理**: 运维数据分析、成本控制、决策支持

### 用户痛点
- 机房温度监控不及时，设备过热风险高
- 服务器开关机需要现场操作，效率低下
- 缺乏统一的设备管理平台，信息分散
- 能耗管理粗放，缺乏智能化控制手段

## 🚀 核心功能需求

### F1. 系统概览模块
**功能描述**: 展示系统整体运行状态和关键指标
- F1.1 硬件信息展示：CPU、内存、磁盘、网络等本机硬件信息
- F1.2 系统状态监控：在线设备数量、离线设备数量、异常设备数量
- F1.3 实时数据概览：当前温度、服务器状态、电源状态等
- F1.4 告警信息汇总：当前活跃告警、历史告警统计

### F2. 温度监控模块
**功能描述**: 实时监控机房环境温度，提供数据分析和告警功能
**模块结构**: 分为两个二级菜单 - 实时监控和传感器管理

#### F2.1 实时监控子模块
- F2.1.1 四路温度监控：服务器进风口、出风口、防火墙区域、室温
- F2.1.2 实时数据展示：温度数值、状态指示、趋势图表
- F2.1.3 历史数据查询：支持24小时、1周、1月、1年等时间范围（数据默认保存1年）
- F2.1.4 温度告警设置：可配置温度阈值，超限自动告警

#### F2.2 传感器管理子模块
- F2.2.1 传感器连接管理：4路温度传感器的连接状态监控
- F2.2.2 传感器校准：支持传感器零点校准和精度调整
- F2.2.3 故障检测：自动检测传感器故障和连接异常
- F2.2.4 配置管理：数据采集频率配置（5-300秒）
- F2.2.5 操作日志：传感器操作和配置变更日志记录

#### F2.3 数据存储策略
- F2.3.1 实时数据：Redis缓存，5秒间隔，保存24小时
- F2.3.2 分钟数据：1分钟平均值，保存1周
- F2.3.3 小时数据：1小时平均值，保存1月
- F2.3.4 日数据：1天平均值，保存1年

### F3. 服务器管理模块
**功能描述**: 远程管理服务器，支持监控和控制操作
**模块结构**: 分为两个二级菜单 - 服务器监控和连接配置

#### F3.1 服务器监控子模块
- F3.1.1 硬件信息监控：CPU、内存、磁盘、网络等硬件信息实时显示
- F3.1.2 系统状态监控：开机时间、系统负载、进程状态、资源使用率
- F3.1.3 远程控制操作：关机、重启、系统命令执行
- F3.1.4 服务器健康评估：基于多维度指标的健康度评分

#### F3.2 连接配置子模块
- F3.2.1 服务器信息管理：IP地址、用户名、密码/证书配置和存储
- F3.2.2 连接状态管理：SSH连接状态监控，连接测试功能
- F3.2.3 认证方式配置：支持密码和SSH密钥两种认证方式
- F3.2.4 连接参数设置：超时时间、重试次数、端口配置
- F3.2.5 操作日志：服务器操作和配置变更日志记录

### F4. 智能断路器控制模块
**功能描述**: 控制智能断路器，实现服务器电源的远程管理
**模块结构**: 分为两个二级菜单 - 断路器监控和断路器配置

#### F4.1 断路器监控子模块
- F4.1.1 基础信息监控：IP地址+端口(503/505)、设备地址、通信状态
- F4.1.2 电气参数监控：实时电压、电流、功率、功率因数、频率
- F4.1.3 安全参数监控：漏电流、设备温度、保护阈值状态
- F4.1.4 设备状态监控：开关状态、锁定状态、故障记录
- F4.1.5 手动控制操作：远程合闸、分闸操作，支持服务器绑定管理
- F4.1.6 电能质量分析：电压偏差、负载率、功率因数评估
- F4.1.7 智能断电流程：远程关机→关机进度条→延迟断电的完整自动化流程
- F4.1.8 服务器绑定管理：断路器与服务器的绑定关系配置和管理

#### F4.2 断路器配置子模块
- F4.2.1 设备连接配置：IP地址、端口、通信参数设置
- F4.2.2 保护参数配置：过压、欠压、过流、漏电保护阈值设置
- F4.2.3 安全保护机制：断电前自动关机，延迟断电保护配置
- F4.2.4 定时控制配置：支持定时开关机任务设置，包含任务管理界面
- F4.2.5 条件控制配置：基于温度等条件的自动控制策略
- F4.2.6 操作日志：断路器操作和配置变更日志记录
- F4.2.7 绑定关系管理：断路器与服务器绑定配置，支持绑定历史记录

### F5. AI智能控制模块
**功能描述**: 基于规则和数据分析的智能控制决策
- F5.1 智能策略配置：支持多种策略类型（温度控制、湿度控制、功耗控制、时间控制、节能优化、安全保护）
- F5.2 触发条件构建器：可视化的条件设置界面，支持参数选择、操作符设置、阈值配置
- F5.3 执行动作配置：远程关机、断路器操作、通知发送等多种动作组合
- F5.4 自动控制执行：基于配置的策略自动执行控制决策
- F5.5 控制历史记录：完整的策略执行历史和结果跟踪
- F5.6 系统健康评估：基于多维度数据的系统健康度评估

### F6. 智能告警模块
**功能描述**: 统一的告警管理和通知系统
- F6.1 告警规则配置：支持8种告警类型（温度异常、湿度异常、功耗异常、电压异常、电流异常、设备异常、网络异常、系统异常）
- F6.2 告警等级管理：信息、警告、严重、紧急四级告警分类
- F6.3 告警通知方式：系统界面通知、邮件通知、钉钉通知（支持Webhook配置）
- F6.4 触发条件设置：支持持续时间设置，避免瞬时波动误报
- F6.5 告警历史管理：告警记录查询、统计分析、趋势分析
- F6.6 告警处理流程：告警确认、处理记录、自动恢复检测
- F6.7 钉钉集成：完整的钉钉机器人配置，支持@提醒和安全密钥

### F7. 安全控制模块
**功能描述**: 系统安全和权限管理
- F7.1 用户权限管理：不同用户角色的操作权限控制
- F7.2 操作确认机制：危险操作的二次确认和安全检查
- F7.3 操作审计日志：完整的用户操作记录和审计追踪
- F7.4 紧急控制功能：一键紧急断电、系统锁定等紧急操作
- F7.5 会话管理：用户登录超时、强制下线等会话安全控制

## 🔧 非功能需求

### 性能需求
- **响应时间**: Web界面响应时间 < 2秒
- **数据更新**: 温度数据实时更新，延迟 < 5秒
- **并发支持**: 支持10个并发用户同时访问
- **数据处理**: 支持每秒处理100个温度数据点

### 可靠性需求
- **系统可用性**: 99.5%以上的系统可用性
- **故障恢复**: 系统故障后5分钟内自动恢复
- **数据完整性**: 温度数据丢失率 < 0.1%
- **通信可靠性**: 设备通信成功率 > 95%

### 安全性需求
- **访问控制**: 用户身份认证和权限管理
- **数据加密**: 敏感数据传输和存储加密
- **操作审计**: 关键操作的完整审计日志
- **安全防护**: 防止未授权访问和恶意操作
- **危险操作确认**: 断路器控制等危险操作需要安全确认机制

### 兼容性需求
- **浏览器支持**: Chrome 90+, Firefox 88+, Safari 14+
- **操作系统**: 支持Linux服务器部署
- **设备兼容**: 支持标准Modbus协议的工业设备
- **网络协议**: 支持TCP/IP、RS485、SSH等通信协议

### 用户界面需求
- **桌面端优先**: 优先设计桌面端界面（>1200px）
- **响应式设计**: 支持不同屏幕尺寸的自适应布局
- **菜单导航**: 手风琴式菜单，支持一级菜单展开/收拢
- **面包屑导航**: 清晰的页面层级导航
- **状态指示**: 直观的设备状态和告警状态显示

## 📖 用户故事

### 运维工程师视角
```
作为一名机房运维工程师
我希望能够实时监控机房温度
以便及时发现温度异常，避免设备损坏

验收标准：
- 能够同时查看4个位置的实时温度
- 温度超过阈值时能够及时收到告警
- 能够查看温度历史趋势图表
```

```
作为一名机房运维工程师
我希望能够远程控制服务器开关机
以便在非工作时间也能处理紧急情况

验收标准：
- 能够远程查看服务器运行状态
- 能够安全地远程关机和重启服务器
- 关机前系统能够自动保存数据
```

### 系统管理员视角
```
作为一名系统管理员
我希望能够统一管理所有设备
以便提高运维效率，减少人工操作

验收标准：
- 能够在一个界面查看所有设备状态
- 能够批量配置设备参数
- 能够查看详细的操作日志
```

### IT经理视角
```
作为一名IT经理
我希望能够获得运维数据分析报告
以便优化资源配置，控制运营成本

验收标准：
- 能够查看设备运行时长统计
- 能够分析温度变化趋势
- 能够评估节能效果
```

```
作为一名运维工程师
我希望能够通过钉钉接收告警通知
以便及时响应设备异常，提高处理效率

验收标准：
- 能够配置钉钉机器人Webhook地址
- 告警发生时能够自动发送钉钉消息
- 支持@指定人员功能
- 钉钉消息包含完整的告警信息
```

```
作为一名运维工程师
我希望能够将断路器与服务器绑定
以便实现智能化的电源管理和安全断电

验收标准：
- 能够配置断路器与服务器的绑定关系
- 断电前能够自动关机绑定的服务器
- 能够显示关机进度和状态
- 能够查看绑定历史记录
```

```
作为一名系统管理员
我希望能够设置定时开关机任务
以便实现自动化的电源管理，节约能耗

验收标准：
- 能够创建定时开机/关机任务
- 支持一次性和周期性任务设置
- 能够查看和管理所有定时任务
- 任务执行前有确认和通知机制
```

## ✅ 验收标准

### 功能验收标准
1. **温度监控功能**: 4路温度数据实时显示，支持分级数据存储，历史数据查询功能完整，支持1小时/6小时/24小时时间范围切换
2. **服务器管理功能**: 支持SSH连接，能够获取硬件信息和执行控制命令，支持密钥认证，手风琴菜单导航正常
3. **断路器控制功能**: 能够远程控制断路器合闸/分闸，完整的电气参数监控，服务器绑定管理，智能断电流程（关机→进度条→断电）
4. **智能控制功能**: 支持6种策略类型，可视化条件构建器，支持多种触发条件和执行动作配置
5. **告警管理功能**: 支持8种告警类型，四级告警分类，钉钉通知集成，告警处理流程完整
6. **安全控制功能**: 用户权限管理，危险操作确认（如"POWER OFF"输入确认），完整的操作审计
7. **定时任务功能**: 支持定时开关机任务创建和管理，任务执行状态跟踪
8. **界面交互功能**: 手风琴菜单正常展开收拢，箭头大小一致且居中对齐，面包屑导航正确更新

### 性能验收标准
1. **页面加载时间**: 首页加载时间 < 3秒
2. **数据更新延迟**: 温度数据更新延迟 < 5秒
3. **操作响应时间**: 控制操作响应时间 < 2秒
4. **系统稳定性**: 连续运行24小时无崩溃

### 安全验收标准
1. **身份认证**: 用户登录验证功能正常
2. **权限控制**: 不同用户具有不同操作权限
3. **操作审计**: 关键操作有完整的日志记录
4. **数据保护**: 敏感数据加密存储和传输

## 🚫 约束条件

### 技术约束
- 后端必须使用Go语言开发
- 前端基于现有Vue3项目进行扩展
- 数据库使用PostgreSQL (192.168.110.21, 密码: abcd1234)
- 缓存系统使用Redis进行实时数据缓存
- 支持标准Modbus通信协议
- 钉钉通知必须使用钉钉机器人Webhook API
- 界面必须采用桌面端优先设计（>1200px）
- 菜单导航必须使用手风琴式交互模式

### 业务约束
- 系统必须支持离线运行
- 关键控制操作必须有确认机制
- 温度数据必须持久化存储
- 系统操作必须有完整的日志记录

### 资源约束
- 开发周期：8-12周
- 开发人员：1-2名全栈工程师
- 硬件设备：已有的温度传感器和智能断路器
- 部署环境：本地服务器或云服务器

## 📅 项目里程碑

### 第一阶段 (2周)
- 完成需求分析和系统设计
- 搭建基础开发环境
- 实现基础的前端界面

### 第二阶段 (3周)
- 实现温度监控功能
- 实现服务器管理功能
- 完成基础数据存储

### 第三阶段 (3周)
- 实现断路器控制功能
- 实现设备管理功能
- 完成智能控制逻辑

### 第四阶段 (2周)
- 系统集成测试
- 性能优化
- 安全加固

### 第五阶段 (2周)
- 部署上线
- 用户培训
- 运维文档

## 📊 成功指标

### 业务指标
- 设备故障率降低50%
- 运维响应时间缩短70%
- 能耗成本降低20%
- 用户满意度 > 90%

### 技术指标
- 系统可用性 > 99.5%
- 数据准确性 > 99.9%
- 响应时间 < 2秒
- 并发用户数 > 10
- 钉钉通知成功率 > 95%
- 服务器绑定准确率 > 99%
- 定时任务执行成功率 > 98%
- 界面交互响应时间 < 1秒

---

**文档状态**: ✅ 已完成
**审核状态**: 待审核
**下一步**: 进入系统设计阶段
