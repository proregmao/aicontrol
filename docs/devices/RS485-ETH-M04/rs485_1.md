我已经把文档内容梳理成一个给程序员用的汇总版本，去掉了硬件安装、企业宣传等信息，只保留和代码开发实现相关的部分，结构清晰，程序员能直接参考实现：

⸻

RS485-ETH-M04 开发汇总文档

一、核心功能

设备支持 RS485 与以太网 TCP/IP 的双向数据透传及 Modbus 协议转换，共 8 种模式：
	1.	MODBUS TCP → MODBUS RTU 通用
	•	TCP Client ↔ RTU 从站
	•	TCP 报文站号映射为 RTU 从站站号
	•	默认端口：502~505
	2.	MODBUS TCP → MODBUS RTU 主站
	•	内置 RTU 主站功能，自动轮询 1~6 号从站
	•	TCP Client 可一次性访问多个从站寄存器
	•	默认端口：5502（仅 HC0 支持）
	3.	MODBUS RTU → MODBUS TCP
	•	RTU 主站 ↔ TCP Server
	•	串口报文转换为 TCP 报文，反之亦然
	•	默认远端服务器：192.168.1.210~213:502
	4.	Server 透传
	•	模块作为 TCP Server
	•	串口数据 ↔ TCP Client 数据
	•	默认端口：8801~8804
	5.	普通 Client 透传
	•	模块作为 TCP Client
	•	串口数据 ↔ TCP Server 数据
	•	默认远端服务器：192.168.1.210~213:502
	6.	自定义 Client 透传
	•	同普通 Client 透传
	•	支持自定义报文头/尾（≤4字节）、心跳包（≤50字节，60s 周期）
	7.	AIOT 透传
	•	模块作为 TCP Client，连接艾莫迅云服务器（39.108.191.197:6666）
	•	提供远程虚拟串口功能（需售后申请）
	8.	MODBUS TCP → MODBUS RTU 高级
	•	自动根据寄存器地址计算从站号
	•	适用于 TCP Client 不能改站号的场景（如 WINCC）
	•	默认端口：502~505

⸻

二、主要参数
	•	串口：支持 1200~115200 波特率，8 数据位，1 停止位，无校验（可配置）
	•	缓冲区：1024 字节
	•	网络：10/100 Mbps RJ45
	•	默认 IP：192.168.1.12
	•	默认串口模式：MODBUS TCP → RTU 通用
	•	默认登录：用户名/密码 = amx666

⸻

三、配置方式
	1.	Web 界面
	•	登录模块 IP → 输入账号密码
	•	配置 IP、串口模式、远程服务器地址、寄存器数量等
	•	“保存并重启”后生效
	2.	模式配置页
	•	串口参数：波特率、数据位、校验位、停止位
	•	串口模式：选择 8 种模式之一
	•	远程服务器：用于 TCP Client/RTU→TCP 模式
	•	Modbus 主站寄存器数量：配置 1~6 号从站寄存器数
	3.	IOT 参数页（自定义 Client 透传）
	•	设置固定 IP
	•	配置心跳包（16进制字符串）
	•	配置报文头/尾（16进制字符串）

⸻

四、代码实现要点
	•	TCP Server 端口分配：
	•	MODBUS 通用：502~505
	•	透传 Server：8801~8804
	•	主站功能：5502
	•	协议转换逻辑：
	•	TCP 报文 ↔ RTU 报文封装/解封装
	•	站号映射（通用/高级模式差异）
	•	寄存器偏移计算（主站/高级模式）
	•	心跳机制（自定义 Client 透传）：
	•	固定 60 秒间隔
	•	最大 50 字节 ASCII 内容（16进制表示）
	•	错误恢复：
	•	支持复位恢复出厂（IP=192.168.1.12, 用户/密码=amx666）
	•	保证断线重连、异常报文丢弃

⸻

五、典型使用场景
	•	工业自动化、PLC 控制、楼宇自控、门禁考勤、电力监控
	•	RTU 从站通过网口远程接入 Modbus TCP 系统
	•	传统串口设备 → TCP/IP 系统集成

⸻

👉 程序员可以基于以上汇总：
	•	按功能点实现不同工作模式的协议封装与解析
	•	按配置项实现 Web 配置文件的参数映射
	•	按端口号区分不同工作模式的通信逻辑

