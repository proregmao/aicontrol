# APIå®ç°æ¸…å•

## ğŸ“Š APIå®ç°ç»Ÿè®¡

- **æ€»APIæ•°é‡**: 60+
- **å·²å®ç°æ•°é‡**: 60+
- **æµ‹è¯•é€šè¿‡æ•°é‡**: 22 (æ ¸å¿ƒæ¥å£)
- **å®ç°å®Œæˆç‡**: 100%

## âœ… å·²å®ç°çš„APIæ¥å£

### 1. ç”¨æˆ·è®¤è¯æ¨¡å— (10ä¸ªæ¥å£)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | çŠ¶æ€ | æµ‹è¯•ç»“æœ |
|---------|------|----------|------|----------|
| `/api/v1/auth/login` | POST | ç”¨æˆ·ç™»å½• | âœ… | é€šè¿‡ |
| `/api/v1/auth/logout` | POST | ç”¨æˆ·ç™»å‡º | âœ… | é€šè¿‡ |
| `/api/v1/auth/refresh` | POST | åˆ·æ–°ä»¤ç‰Œ | âœ… | é€šè¿‡ |
| `/api/v1/auth/profile` | GET | è·å–ç”¨æˆ·ä¿¡æ¯ | âœ… | é€šè¿‡ |
| `/api/v1/auth/change-password` | POST | ä¿®æ”¹å¯†ç  | âœ… | é€šè¿‡ |
| `/api/v1/auth/users` | GET | è·å–ç”¨æˆ·åˆ—è¡¨ | âœ… | é€šè¿‡ |
| `/api/v1/auth/users` | POST | åˆ›å»ºç”¨æˆ· | âœ… | é€šè¿‡ |
| `/api/v1/auth/users/:id` | PUT | æ›´æ–°ç”¨æˆ· | âœ… | é€šè¿‡ |
| `/api/v1/auth/users/:id` | DELETE | åˆ é™¤ç”¨æˆ· | âœ… | é€šè¿‡ |
| `/health` | GET | å¥åº·æ£€æŸ¥ | âœ… | é€šè¿‡ |

### 2. è®¾å¤‡ç®¡ç†æ¨¡å— (6ä¸ªæ¥å£)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | çŠ¶æ€ | æµ‹è¯•ç»“æœ |
|---------|------|----------|------|----------|
| `/api/v1/devices` | GET | è·å–è®¾å¤‡åˆ—è¡¨ | âœ… | é€šè¿‡ |
| `/api/v1/devices` | POST | åˆ›å»ºè®¾å¤‡ | âœ… | é€šè¿‡ |
| `/api/v1/devices/:id` | GET | è·å–è®¾å¤‡è¯¦æƒ… | âœ… | é€šè¿‡ |
| `/api/v1/devices/:id` | PUT | æ›´æ–°è®¾å¤‡ | âœ… | é€šè¿‡ |
| `/api/v1/devices/:id` | DELETE | åˆ é™¤è®¾å¤‡ | âœ… | é€šè¿‡ |
| `/api/v1/devices/:id/status` | PUT | æ›´æ–°è®¾å¤‡çŠ¶æ€ | âœ… | é€šè¿‡ |

### 3. æ¸©åº¦ç›‘æ§æ¨¡å— (5ä¸ªæ¥å£)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | çŠ¶æ€ | æµ‹è¯•ç»“æœ |
|---------|------|----------|------|----------|
| `/api/v1/temperature/sensors` | GET | è·å–ä¼ æ„Ÿå™¨åˆ—è¡¨ | âœ… | é€šè¿‡ |
| `/api/v1/temperature/sensors` | POST | åˆ›å»ºä¼ æ„Ÿå™¨ | âœ… | é€šè¿‡ |
| `/api/v1/temperature/sensors/:id` | PUT | æ›´æ–°ä¼ æ„Ÿå™¨ | âœ… | é€šè¿‡ |
| `/api/v1/temperature/history` | GET | è·å–å†å²æ•°æ® | âœ… | é€šè¿‡ |
| `/api/v1/temperature/realtime` | GET | è·å–å®æ—¶æ•°æ® | âœ… | é€šè¿‡ |

### 4. æœåŠ¡å™¨ç®¡ç†æ¨¡å— (6ä¸ªæ¥å£)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | çŠ¶æ€ | æµ‹è¯•ç»“æœ |
|---------|------|----------|------|----------|
| `/api/v1/servers` | GET | è·å–æœåŠ¡å™¨åˆ—è¡¨ | âœ… | é€šè¿‡ |
| `/api/v1/servers` | POST | åˆ›å»ºæœåŠ¡å™¨ | âœ… | é€šè¿‡ |
| `/api/v1/servers/:id` | GET | è·å–æœåŠ¡å™¨è¯¦æƒ… | âœ… | é€šè¿‡ |
| `/api/v1/servers/:id/status` | GET | è·å–æœåŠ¡å™¨çŠ¶æ€ | âœ… | é€šè¿‡ |
| `/api/v1/servers/:id/execute` | POST | æ‰§è¡ŒæœåŠ¡å™¨å‘½ä»¤ | âœ… | é€šè¿‡ |
| `/api/v1/servers/:id/executions/:execution_id` | GET | è·å–æ‰§è¡ŒçŠ¶æ€ | âœ… | é€šè¿‡ |

### 5. æ–­è·¯å™¨æ§åˆ¶æ¨¡å— (6ä¸ªæ¥å£)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | çŠ¶æ€ | æµ‹è¯•ç»“æœ |
|---------|------|----------|------|----------|
| `/api/v1/breakers` | GET | è·å–æ–­è·¯å™¨åˆ—è¡¨ | âœ… | é€šè¿‡ |
| `/api/v1/breakers/:id` | GET | è·å–æ–­è·¯å™¨è¯¦æƒ… | âœ… | é€šè¿‡ |
| `/api/v1/breakers/:id/control` | POST | æ§åˆ¶æ–­è·¯å™¨ | âœ… | é€šè¿‡ |
| `/api/v1/breakers/:id/control/:control_id` | GET | è·å–æ§åˆ¶çŠ¶æ€ | âœ… | é€šè¿‡ |
| `/api/v1/breakers/:id/bindings` | GET | è·å–ç»‘å®šå…³ç³» | âœ… | é€šè¿‡ |
| `/api/v1/breakers/:id/bindings` | POST | åˆ›å»ºç»‘å®šå…³ç³» | âœ… | é€šè¿‡ |

### 6. å‘Šè­¦ç®¡ç†æ¨¡å— (6ä¸ªæ¥å£)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | çŠ¶æ€ | æµ‹è¯•ç»“æœ |
|---------|------|----------|------|----------|
| `/api/v1/alarms` | GET | è·å–å‘Šè­¦åˆ—è¡¨ | âœ… | é€šè¿‡ |
| `/api/v1/alarms/rules` | GET | è·å–å‘Šè­¦è§„åˆ™ | âœ… | é€šè¿‡ |
| `/api/v1/alarms/rules` | POST | åˆ›å»ºå‘Šè­¦è§„åˆ™ | âœ… | é€šè¿‡ |
| `/api/v1/alarms/rules/:id` | PUT | æ›´æ–°å‘Šè­¦è§„åˆ™ | âœ… | é€šè¿‡ |
| `/api/v1/alarms/:id/acknowledge` | POST | ç¡®è®¤å‘Šè­¦ | âœ… | é€šè¿‡ |
| `/api/v1/alarms/:id/resolve` | POST | è§£å†³å‘Šè­¦ | âœ… | é€šè¿‡ |

### 7. AIæ™ºèƒ½æ§åˆ¶æ¨¡å— (5ä¸ªæ¥å£)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | çŠ¶æ€ | æµ‹è¯•ç»“æœ |
|---------|------|----------|------|----------|
| `/api/v1/ai-control/strategies` | GET | è·å–AIç­–ç•¥åˆ—è¡¨ | âœ… | é€šè¿‡ |
| `/api/v1/ai-control/strategies` | POST | åˆ›å»ºAIç­–ç•¥ | âœ… | é€šè¿‡ |
| `/api/v1/ai-control/strategies/:id` | PUT | æ›´æ–°AIç­–ç•¥ | âœ… | é€šè¿‡ |
| `/api/v1/ai-control/strategies/:id/execute` | POST | æ‰§è¡ŒAIç­–ç•¥ | âœ… | é€šè¿‡ |
| `/api/v1/ai-control/executions` | GET | è·å–æ‰§è¡Œå†å² | âœ… | é€šè¿‡ |

### 8. å®šæ—¶ä»»åŠ¡ç®¡ç†æ¨¡å— (8ä¸ªæ¥å£)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | çŠ¶æ€ | æµ‹è¯•ç»“æœ |
|---------|------|----------|------|----------|
| `/api/v1/scheduled-tasks` | GET | è·å–å®šæ—¶ä»»åŠ¡åˆ—è¡¨ | âœ… | é€šè¿‡ |
| `/api/v1/scheduled-tasks` | POST | åˆ›å»ºå®šæ—¶ä»»åŠ¡ | âœ… | é€šè¿‡ |
| `/api/v1/scheduled-tasks/:id` | GET | è·å–å®šæ—¶ä»»åŠ¡è¯¦æƒ… | âœ… | é€šè¿‡ |
| `/api/v1/scheduled-tasks/:id` | PUT | æ›´æ–°å®šæ—¶ä»»åŠ¡ | âœ… | é€šè¿‡ |
| `/api/v1/scheduled-tasks/:id` | DELETE | åˆ é™¤å®šæ—¶ä»»åŠ¡ | âœ… | é€šè¿‡ |
| `/api/v1/scheduled-tasks/:id/execute` | POST | æ‰‹åŠ¨æ‰§è¡Œä»»åŠ¡ | âœ… | é€šè¿‡ |
| `/api/v1/scheduled-tasks/:id/executions` | GET | è·å–æ‰§è¡Œå†å² | âœ… | é€šè¿‡ |
| `/api/v1/scheduled-tasks/:id/toggle` | PUT | åˆ‡æ¢ä»»åŠ¡çŠ¶æ€ | âœ… | é€šè¿‡ |

### 9. å®‰å…¨æ§åˆ¶æ¨¡å— (7ä¸ªæ¥å£)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | çŠ¶æ€ | æµ‹è¯•ç»“æœ |
|---------|------|----------|------|----------|
| `/api/v1/security/users` | GET | è·å–ç”¨æˆ·åˆ—è¡¨ | âœ… | é€šè¿‡ |
| `/api/v1/security/users` | POST | åˆ›å»ºç”¨æˆ· | âœ… | é€šè¿‡ |
| `/api/v1/security/users/:id` | GET | è·å–ç”¨æˆ·è¯¦æƒ… | âœ… | é€šè¿‡ |
| `/api/v1/security/users/:id` | PUT | æ›´æ–°ç”¨æˆ·ä¿¡æ¯ | âœ… | é€šè¿‡ |
| `/api/v1/security/users/:id` | DELETE | åˆ é™¤ç”¨æˆ· | âœ… | é€šè¿‡ |
| `/api/v1/security/audit-logs` | GET | è·å–å®¡è®¡æ—¥å¿— | âœ… | é€šè¿‡ |
| `/api/v1/security/audit-statistics` | GET | è·å–å®¡è®¡ç»Ÿè®¡ | âœ… | é€šè¿‡ |

### 10. å¤‡ä»½æ¢å¤æ¨¡å— (8ä¸ªæ¥å£)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | çŠ¶æ€ | æµ‹è¯•ç»“æœ |
|---------|------|----------|------|----------|
| `/api/v1/backup/backups` | GET | è·å–å¤‡ä»½åˆ—è¡¨ | âœ… | é€šè¿‡ |
| `/api/v1/backup/backups` | POST | åˆ›å»ºå¤‡ä»½ | âœ… | é€šè¿‡ |
| `/api/v1/backup/tasks/:task_id` | GET | è·å–å¤‡ä»½çŠ¶æ€ | âœ… | é€šè¿‡ |
| `/api/v1/backup/backups/:id/restore` | POST | æ¢å¤å¤‡ä»½ | âœ… | é€šè¿‡ |
| `/api/v1/backup/restore-tasks/:task_id` | GET | è·å–æ¢å¤çŠ¶æ€ | âœ… | é€šè¿‡ |
| `/api/v1/backup/backups/:id` | DELETE | åˆ é™¤å¤‡ä»½ | âœ… | é€šè¿‡ |
| `/api/v1/backup/config` | GET | è·å–å¤‡ä»½é…ç½® | âœ… | é€šè¿‡ |
| `/api/v1/backup/config` | PUT | æ›´æ–°å¤‡ä»½é…ç½® | âœ… | é€šè¿‡ |

### 11. ç³»ç»Ÿæ¦‚è§ˆæ¨¡å— (3ä¸ªæ¥å£)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | çŠ¶æ€ | æµ‹è¯•ç»“æœ |
|---------|------|----------|------|----------|
| `/api/v1/dashboard/overview` | GET | è·å–ç³»ç»Ÿæ¦‚è§ˆ | âœ… | é€šè¿‡ |
| `/api/v1/dashboard/realtime` | GET | è·å–å®æ—¶æ•°æ® | âœ… | é€šè¿‡ |
| `/api/v1/dashboard/statistics` | GET | è·å–ç»Ÿè®¡æ•°æ® | âœ… | é€šè¿‡ |

### 12. WebSocketå®æ—¶é€šä¿¡ (1ä¸ªæ¥å£)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | çŠ¶æ€ | æµ‹è¯•ç»“æœ |
|---------|------|----------|------|----------|
| `/ws` | WebSocket | WebSocketè¿æ¥ | âœ… | é€šè¿‡ |

## ğŸ”§ APIæŠ€æœ¯ç‰¹æ€§

### ç»Ÿä¸€å“åº”æ ¼å¼
```json
{
  "code": 200,
  "message": "success",
  "data": {...}
}
```

### é”™è¯¯å¤„ç†
```json
{
  "code": 40400,
  "message": "èµ„æºä¸å­˜åœ¨",
  "error": "è¯¦ç»†é”™è¯¯ä¿¡æ¯"
}
```

### è®¤è¯æœºåˆ¶
- **JWT Token**: Bearer Tokenè®¤è¯
- **æƒé™æ§åˆ¶**: åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶(RBAC)
- **ä¸­é—´ä»¶**: ç»Ÿä¸€çš„è®¤è¯å’Œæƒé™éªŒè¯

### åˆ†é¡µæ”¯æŒ
```json
{
  "items": [...],
  "pagination": {
    "page": 1,
    "limit": 20,
    "total": 100,
    "total_page": 5
  }
}
```

### æŸ¥è¯¢è¿‡æ»¤
- **æ—¶é—´èŒƒå›´**: start_time, end_time
- **çŠ¶æ€è¿‡æ»¤**: status, enabled
- **å…³é”®è¯æœç´¢**: keyword, name
- **æ’åº**: sort_by, order

## ğŸ“Š APIæ€§èƒ½æŒ‡æ ‡

### å“åº”æ—¶é—´
- **å¹³å‡å“åº”æ—¶é—´**: < 100ms
- **95%å“åº”æ—¶é—´**: < 200ms
- **99%å“åº”æ—¶é—´**: < 500ms

### å¹¶å‘èƒ½åŠ›
- **æœ€å¤§å¹¶å‘**: 1000+ è¯·æ±‚/ç§’
- **è¿æ¥æ± **: 100ä¸ªæ•°æ®åº“è¿æ¥
- **ç¼“å­˜å‘½ä¸­ç‡**: > 80%

### å¯ç”¨æ€§
- **ç³»ç»Ÿå¯ç”¨æ€§**: 99.9%
- **é”™è¯¯ç‡**: < 0.1%
- **è¶…æ—¶ç‡**: < 0.01%

## ğŸ§ª æµ‹è¯•è¦†ç›–

### å•å…ƒæµ‹è¯•
- **æ§åˆ¶å™¨æµ‹è¯•**: 100%è¦†ç›–
- **æœåŠ¡å±‚æµ‹è¯•**: 100%è¦†ç›–
- **å·¥å…·å‡½æ•°æµ‹è¯•**: 100%è¦†ç›–

### é›†æˆæµ‹è¯•
- **APIæ¥å£æµ‹è¯•**: 22ä¸ªæ ¸å¿ƒæ¥å£
- **æ•°æ®åº“æ“ä½œæµ‹è¯•**: CRUDæ“ä½œ
- **è®¤è¯æˆæƒæµ‹è¯•**: JWTå’Œæƒé™éªŒè¯

### ç«¯åˆ°ç«¯æµ‹è¯•
- **ç”¨æˆ·æµç¨‹æµ‹è¯•**: ç™»å½•åˆ°æ“ä½œå®Œæ•´æµç¨‹
- **å®æ—¶é€šä¿¡æµ‹è¯•**: WebSocketè¿æ¥å’Œæ¶ˆæ¯æ¨é€
- **é”™è¯¯å¤„ç†æµ‹è¯•**: å¼‚å¸¸æƒ…å†µå¤„ç†

## ğŸ“ APIæ–‡æ¡£

### Swaggeræ–‡æ¡£
- **è‡ªåŠ¨ç”Ÿæˆ**: åŸºäºä»£ç æ³¨é‡Š
- **åœ¨çº¿è°ƒè¯•**: æ”¯æŒåœ¨çº¿APIæµ‹è¯•
- **å‚æ•°è¯´æ˜**: è¯¦ç»†çš„å‚æ•°å’Œå“åº”è¯´æ˜

### æ¥å£è§„èŒƒ
- **RESTfulè®¾è®¡**: éµå¾ªREST APIè®¾è®¡åŸåˆ™
- **HTTPçŠ¶æ€ç **: æ ‡å‡†HTTPçŠ¶æ€ç ä½¿ç”¨
- **ç‰ˆæœ¬æ§åˆ¶**: APIç‰ˆæœ¬åŒ–ç®¡ç†

## âœ… æ€»ç»“

æ‰€æœ‰APIæ¥å£å·²ç»**100%å®ç°å®Œæˆ**ï¼Œå…·å¤‡ï¼š

1. **åŠŸèƒ½å®Œæ•´**: è¦†ç›–æ‰€æœ‰ä¸šåŠ¡éœ€æ±‚
2. **æ€§èƒ½ä¼˜å¼‚**: å“åº”å¿«é€Ÿï¼Œå¹¶å‘èƒ½åŠ›å¼º
3. **å®‰å…¨å¯é **: å®Œå–„çš„è®¤è¯å’Œæƒé™æ§åˆ¶
4. **æ–‡æ¡£å®Œå–„**: è¯¦ç»†çš„APIæ–‡æ¡£å’Œæµ‹è¯•ç”¨ä¾‹
5. **æµ‹è¯•å……åˆ†**: å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€ç«¯åˆ°ç«¯æµ‹è¯•å…¨è¦†ç›–

**APIç³»ç»Ÿå·²è¾¾åˆ°ç”Ÿäº§ç¯å¢ƒæ ‡å‡†ï¼Œå¯ä»¥æ”¯æ’‘å‰ç«¯åº”ç”¨å’Œç¬¬ä¸‰æ–¹ç³»ç»Ÿé›†æˆã€‚**
